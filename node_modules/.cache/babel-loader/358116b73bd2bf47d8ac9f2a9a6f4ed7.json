{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\n\n/*!\n * Bootstrap-select v1.14.0-beta3 (https://developer.snapappointments.com/bootstrap-select)\n *\n * Copyright 2012-2022 SnapAppointments, LLC\n * Licensed under MIT (https://github.com/snapappointments/bootstrap-select/blob/master/LICENSE)\n */\n(function (root, factory) {\n  if (root === undefined && window !== undefined) root = window;\n\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    define([\"jquery\"], function (a0) {\n      return factory(a0);\n    });\n  } else if (typeof module === 'object' && module.exports) {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require(\"jquery\"));\n  } else {\n    factory(root[\"jQuery\"]);\n  }\n})(this, function (jQuery) {\n  (function ($) {\n    'use strict';\n\n    var DISALLOWED_ATTRIBUTES = ['sanitize', 'whiteList', 'sanitizeFn'];\n    var uriAttrs = ['background', 'cite', 'href', 'itemtype', 'longdesc', 'poster', 'src', 'xlink:href'];\n    var ARIA_ATTRIBUTE_PATTERN = /^aria-[\\w-]*$/i;\n    var DefaultWhitelist = {\n      // Global attributes allowed on any supplied element below.\n      '*': ['class', 'dir', 'id', 'lang', 'role', 'tabindex', 'style', ARIA_ATTRIBUTE_PATTERN],\n      a: ['target', 'href', 'title', 'rel'],\n      area: [],\n      b: [],\n      br: [],\n      col: [],\n      code: [],\n      div: [],\n      em: [],\n      hr: [],\n      h1: [],\n      h2: [],\n      h3: [],\n      h4: [],\n      h5: [],\n      h6: [],\n      i: [],\n      img: ['src', 'alt', 'title', 'width', 'height'],\n      li: [],\n      ol: [],\n      p: [],\n      pre: [],\n      s: [],\n      small: [],\n      span: [],\n      sub: [],\n      sup: [],\n      strong: [],\n      u: [],\n      ul: []\n    };\n    /**\n     * A pattern that recognizes a commonly useful subset of URLs that are safe.\n     *\n     * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts\n     */\n\n    var SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi;\n    /**\n     * A pattern that matches safe data URLs. Only matches image, video and audio types.\n     *\n     * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts\n     */\n\n    var DATA_URL_PATTERN = /^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;\n    var ParseableAttributes = ['title', 'placeholder']; // attributes to use as settings, can add others in the future\n\n    function allowedAttribute(attr, allowedAttributeList) {\n      var attrName = attr.nodeName.toLowerCase();\n\n      if ($.inArray(attrName, allowedAttributeList) !== -1) {\n        if ($.inArray(attrName, uriAttrs) !== -1) {\n          return Boolean(attr.nodeValue.match(SAFE_URL_PATTERN) || attr.nodeValue.match(DATA_URL_PATTERN));\n        }\n\n        return true;\n      }\n\n      var regExp = $(allowedAttributeList).filter(function (index, value) {\n        return value instanceof RegExp;\n      }); // Check if a regular expression validates the attribute.\n\n      for (var i = 0, l = regExp.length; i < l; i++) {\n        if (attrName.match(regExp[i])) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    function sanitizeHtml(unsafeElements, whiteList, sanitizeFn) {\n      if (sanitizeFn && typeof sanitizeFn === 'function') {\n        return sanitizeFn(unsafeElements);\n      }\n\n      var whitelistKeys = Object.keys(whiteList);\n\n      for (var i = 0, len = unsafeElements.length; i < len; i++) {\n        var elements = unsafeElements[i].querySelectorAll('*');\n\n        for (var j = 0, len2 = elements.length; j < len2; j++) {\n          var el = elements[j];\n          var elName = el.nodeName.toLowerCase();\n\n          if (whitelistKeys.indexOf(elName) === -1) {\n            el.parentNode.removeChild(el);\n            continue;\n          }\n\n          var attributeList = [].slice.call(el.attributes);\n          var whitelistedAttributes = [].concat(whiteList['*'] || [], whiteList[elName] || []);\n\n          for (var k = 0, len3 = attributeList.length; k < len3; k++) {\n            var attr = attributeList[k];\n\n            if (!allowedAttribute(attr, whitelistedAttributes)) {\n              el.removeAttribute(attr.nodeName);\n            }\n          }\n        }\n      }\n    }\n\n    function getAttributesObject($select) {\n      var attributesObject = {},\n          attrVal;\n      ParseableAttributes.forEach(function (item) {\n        attrVal = $select.attr(item);\n        if (attrVal) attributesObject[item] = attrVal;\n      }); // for backwards compatibility\n      // (using title as placeholder is deprecated - remove in v2.0.0)\n\n      if (!attributesObject.placeholder && attributesObject.title) {\n        attributesObject.placeholder = attributesObject.title;\n      }\n\n      return attributesObject;\n    } // Polyfill for browsers with no classList support\n    // Remove in v2\n\n\n    if (!('classList' in document.createElement('_'))) {\n      (function (view) {\n        if (!('Element' in view)) return;\n\n        var classListProp = 'classList',\n            protoProp = 'prototype',\n            elemCtrProto = view.Element[protoProp],\n            objCtr = Object,\n            classListGetter = function () {\n          var $elem = $(this);\n          return {\n            add: function (classes) {\n              classes = Array.prototype.slice.call(arguments).join(' ');\n              return $elem.addClass(classes);\n            },\n            remove: function (classes) {\n              classes = Array.prototype.slice.call(arguments).join(' ');\n              return $elem.removeClass(classes);\n            },\n            toggle: function (classes, force) {\n              return $elem.toggleClass(classes, force);\n            },\n            contains: function (classes) {\n              return $elem.hasClass(classes);\n            }\n          };\n        };\n\n        if (objCtr.defineProperty) {\n          var classListPropDesc = {\n            get: classListGetter,\n            enumerable: true,\n            configurable: true\n          };\n\n          try {\n            objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n          } catch (ex) {\n            // IE 8 doesn't support enumerable:true\n            // adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\n            // modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\n            if (ex.number === undefined || ex.number === -0x7FF5EC54) {\n              classListPropDesc.enumerable = false;\n              objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n            }\n          }\n        } else if (objCtr[protoProp].__defineGetter__) {\n          elemCtrProto.__defineGetter__(classListProp, classListGetter);\n        }\n      })(window);\n    }\n\n    var testElement = document.createElement('_');\n    testElement.classList.add('c1', 'c2');\n\n    if (!testElement.classList.contains('c2')) {\n      var _add = DOMTokenList.prototype.add,\n          _remove = DOMTokenList.prototype.remove;\n\n      DOMTokenList.prototype.add = function () {\n        Array.prototype.forEach.call(arguments, _add.bind(this));\n      };\n\n      DOMTokenList.prototype.remove = function () {\n        Array.prototype.forEach.call(arguments, _remove.bind(this));\n      };\n    }\n\n    testElement.classList.toggle('c3', false); // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n    // support the second argument.\n\n    if (testElement.classList.contains('c3')) {\n      var _toggle = DOMTokenList.prototype.toggle;\n\n      DOMTokenList.prototype.toggle = function (token, force) {\n        if (1 in arguments && !this.contains(token) === !force) {\n          return force;\n        } else {\n          return _toggle.call(this, token);\n        }\n      };\n    }\n\n    testElement = null; // Polyfill for IE (remove in v2)\n\n    Object.values = typeof Object.values === 'function' ? Object.values : function (obj) {\n      return Object.keys(obj).map(function (key) {\n        return obj[key];\n      });\n    }; // shallow array comparison\n\n    function isEqual(array1, array2) {\n      return array1.length === array2.length && array1.every(function (element, index) {\n        return element === array2[index];\n      });\n    }\n\n    ; // <editor-fold desc=\"Shims\">\n\n    if (!String.prototype.startsWith) {\n      (function () {\n        'use strict'; // needed to support `apply`/`call` with `undefined`/`null`\n\n        var toString = {}.toString;\n\n        var startsWith = function (search) {\n          if (this == null) {\n            throw new TypeError();\n          }\n\n          var string = String(this);\n\n          if (search && toString.call(search) == '[object RegExp]') {\n            throw new TypeError();\n          }\n\n          var stringLength = string.length;\n          var searchString = String(search);\n          var searchLength = searchString.length;\n          var position = arguments.length > 1 ? arguments[1] : undefined; // `ToInteger`\n\n          var pos = position ? Number(position) : 0;\n\n          if (pos != pos) {\n            // better `isNaN`\n            pos = 0;\n          }\n\n          var start = Math.min(Math.max(pos, 0), stringLength); // Avoid the `indexOf` call if no match is possible\n\n          if (searchLength + start > stringLength) {\n            return false;\n          }\n\n          var index = -1;\n\n          while (++index < searchLength) {\n            if (string.charCodeAt(start + index) != searchString.charCodeAt(index)) {\n              return false;\n            }\n          }\n\n          return true;\n        };\n\n        if (Object.defineProperty) {\n          Object.defineProperty(String.prototype, 'startsWith', {\n            'value': startsWith,\n            'configurable': true,\n            'writable': true\n          });\n        } else {\n          String.prototype.startsWith = startsWith;\n        }\n      })();\n    }\n\n    function toKebabCase(str) {\n      return str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, function ($, ofs) {\n        return (ofs ? '-' : '') + $.toLowerCase();\n      });\n    }\n\n    function getSelectedOptions() {\n      var options = this.selectpicker.main.data;\n\n      if (this.options.source.data || this.options.source.search) {\n        options = Object.values(this.selectpicker.optionValuesDataMap);\n      }\n\n      var selectedOptions = options.filter(function (item) {\n        if (item.selected) {\n          if (this.options.hideDisabled && item.disabled) return false;\n          return true;\n        }\n\n        return false;\n      }, this); // ensure only 1 option is selected if multiple are set in the data source\n\n      if (this.options.source.data && !this.multiple && selectedOptions.length > 1) {\n        for (var i = 0; i < selectedOptions.length - 1; i++) {\n          selectedOptions[i].selected = false;\n        }\n\n        selectedOptions = [selectedOptions[selectedOptions.length - 1]];\n      }\n\n      return selectedOptions;\n    } // much faster than $.val()\n\n\n    function getSelectValues(selectedOptions) {\n      var value = [],\n          options = selectedOptions || getSelectedOptions.call(this),\n          opt;\n\n      for (var i = 0, len = options.length; i < len; i++) {\n        opt = options[i];\n\n        if (!opt.disabled) {\n          value.push(opt.value === undefined ? opt.text : opt.value);\n        }\n      }\n\n      if (!this.multiple) {\n        return !value.length ? null : value[0];\n      }\n\n      return value;\n    } // set data-selected on select element if the value has been programmatically selected\n    // prior to initialization of bootstrap-select\n    // * consider removing or replacing an alternative method *\n\n\n    var valHooks = {\n      useDefault: false,\n      _set: $.valHooks.select.set\n    };\n\n    $.valHooks.select.set = function (elem, value) {\n      if (value && !valHooks.useDefault) $(elem).data('selected', true);\n      return valHooks._set.apply(this, arguments);\n    };\n\n    var changedArguments = null;\n\n    var EventIsSupported = function () {\n      try {\n        new Event('change');\n        return true;\n      } catch (e) {\n        return false;\n      }\n    }();\n\n    $.fn.triggerNative = function (eventName) {\n      var el = this[0],\n          event;\n\n      if (el.dispatchEvent) {\n        // for modern browsers & IE9+\n        if (EventIsSupported) {\n          // For modern browsers\n          event = new Event(eventName, {\n            bubbles: true\n          });\n        } else {\n          // For IE since it doesn't support Event constructor\n          event = document.createEvent('Event');\n          event.initEvent(eventName, true, false);\n        }\n\n        el.dispatchEvent(event);\n      }\n    }; // </editor-fold>\n\n\n    function stringSearch(li, searchString, method, normalize) {\n      var stringTypes = ['display', 'subtext', 'tokens'],\n          searchSuccess = false;\n\n      for (var i = 0; i < stringTypes.length; i++) {\n        var stringType = stringTypes[i],\n            string = li[stringType];\n\n        if (string) {\n          string = string.toString(); // Strip HTML tags. This isn't perfect, but it's much faster than any other method\n\n          if (stringType === 'display') {\n            string = string.replace(/<[^>]+>/g, '');\n          }\n\n          if (normalize) string = normalizeToBase(string);\n          string = string.toUpperCase();\n\n          if (typeof method === 'function') {\n            searchSuccess = method(string, searchString);\n          } else if (method === 'contains') {\n            searchSuccess = string.indexOf(searchString) >= 0;\n          } else {\n            searchSuccess = string.startsWith(searchString);\n          }\n\n          if (searchSuccess) break;\n        }\n      }\n\n      return searchSuccess;\n    }\n\n    function toInteger(value) {\n      return parseInt(value, 10) || 0;\n    } // Borrowed from Lodash (_.deburr)\n\n    /** Used to map Latin Unicode letters to basic Latin letters. */\n\n\n    var deburredLetters = {\n      // Latin-1 Supplement block.\n      '\\xc0': 'A',\n      '\\xc1': 'A',\n      '\\xc2': 'A',\n      '\\xc3': 'A',\n      '\\xc4': 'A',\n      '\\xc5': 'A',\n      '\\xe0': 'a',\n      '\\xe1': 'a',\n      '\\xe2': 'a',\n      '\\xe3': 'a',\n      '\\xe4': 'a',\n      '\\xe5': 'a',\n      '\\xc7': 'C',\n      '\\xe7': 'c',\n      '\\xd0': 'D',\n      '\\xf0': 'd',\n      '\\xc8': 'E',\n      '\\xc9': 'E',\n      '\\xca': 'E',\n      '\\xcb': 'E',\n      '\\xe8': 'e',\n      '\\xe9': 'e',\n      '\\xea': 'e',\n      '\\xeb': 'e',\n      '\\xcc': 'I',\n      '\\xcd': 'I',\n      '\\xce': 'I',\n      '\\xcf': 'I',\n      '\\xec': 'i',\n      '\\xed': 'i',\n      '\\xee': 'i',\n      '\\xef': 'i',\n      '\\xd1': 'N',\n      '\\xf1': 'n',\n      '\\xd2': 'O',\n      '\\xd3': 'O',\n      '\\xd4': 'O',\n      '\\xd5': 'O',\n      '\\xd6': 'O',\n      '\\xd8': 'O',\n      '\\xf2': 'o',\n      '\\xf3': 'o',\n      '\\xf4': 'o',\n      '\\xf5': 'o',\n      '\\xf6': 'o',\n      '\\xf8': 'o',\n      '\\xd9': 'U',\n      '\\xda': 'U',\n      '\\xdb': 'U',\n      '\\xdc': 'U',\n      '\\xf9': 'u',\n      '\\xfa': 'u',\n      '\\xfb': 'u',\n      '\\xfc': 'u',\n      '\\xdd': 'Y',\n      '\\xfd': 'y',\n      '\\xff': 'y',\n      '\\xc6': 'Ae',\n      '\\xe6': 'ae',\n      '\\xde': 'Th',\n      '\\xfe': 'th',\n      '\\xdf': 'ss',\n      // Latin Extended-A block.\n      '\\u0100': 'A',\n      '\\u0102': 'A',\n      '\\u0104': 'A',\n      '\\u0101': 'a',\n      '\\u0103': 'a',\n      '\\u0105': 'a',\n      '\\u0106': 'C',\n      '\\u0108': 'C',\n      '\\u010a': 'C',\n      '\\u010c': 'C',\n      '\\u0107': 'c',\n      '\\u0109': 'c',\n      '\\u010b': 'c',\n      '\\u010d': 'c',\n      '\\u010e': 'D',\n      '\\u0110': 'D',\n      '\\u010f': 'd',\n      '\\u0111': 'd',\n      '\\u0112': 'E',\n      '\\u0114': 'E',\n      '\\u0116': 'E',\n      '\\u0118': 'E',\n      '\\u011a': 'E',\n      '\\u0113': 'e',\n      '\\u0115': 'e',\n      '\\u0117': 'e',\n      '\\u0119': 'e',\n      '\\u011b': 'e',\n      '\\u011c': 'G',\n      '\\u011e': 'G',\n      '\\u0120': 'G',\n      '\\u0122': 'G',\n      '\\u011d': 'g',\n      '\\u011f': 'g',\n      '\\u0121': 'g',\n      '\\u0123': 'g',\n      '\\u0124': 'H',\n      '\\u0126': 'H',\n      '\\u0125': 'h',\n      '\\u0127': 'h',\n      '\\u0128': 'I',\n      '\\u012a': 'I',\n      '\\u012c': 'I',\n      '\\u012e': 'I',\n      '\\u0130': 'I',\n      '\\u0129': 'i',\n      '\\u012b': 'i',\n      '\\u012d': 'i',\n      '\\u012f': 'i',\n      '\\u0131': 'i',\n      '\\u0134': 'J',\n      '\\u0135': 'j',\n      '\\u0136': 'K',\n      '\\u0137': 'k',\n      '\\u0138': 'k',\n      '\\u0139': 'L',\n      '\\u013b': 'L',\n      '\\u013d': 'L',\n      '\\u013f': 'L',\n      '\\u0141': 'L',\n      '\\u013a': 'l',\n      '\\u013c': 'l',\n      '\\u013e': 'l',\n      '\\u0140': 'l',\n      '\\u0142': 'l',\n      '\\u0143': 'N',\n      '\\u0145': 'N',\n      '\\u0147': 'N',\n      '\\u014a': 'N',\n      '\\u0144': 'n',\n      '\\u0146': 'n',\n      '\\u0148': 'n',\n      '\\u014b': 'n',\n      '\\u014c': 'O',\n      '\\u014e': 'O',\n      '\\u0150': 'O',\n      '\\u014d': 'o',\n      '\\u014f': 'o',\n      '\\u0151': 'o',\n      '\\u0154': 'R',\n      '\\u0156': 'R',\n      '\\u0158': 'R',\n      '\\u0155': 'r',\n      '\\u0157': 'r',\n      '\\u0159': 'r',\n      '\\u015a': 'S',\n      '\\u015c': 'S',\n      '\\u015e': 'S',\n      '\\u0160': 'S',\n      '\\u015b': 's',\n      '\\u015d': 's',\n      '\\u015f': 's',\n      '\\u0161': 's',\n      '\\u0162': 'T',\n      '\\u0164': 'T',\n      '\\u0166': 'T',\n      '\\u0163': 't',\n      '\\u0165': 't',\n      '\\u0167': 't',\n      '\\u0168': 'U',\n      '\\u016a': 'U',\n      '\\u016c': 'U',\n      '\\u016e': 'U',\n      '\\u0170': 'U',\n      '\\u0172': 'U',\n      '\\u0169': 'u',\n      '\\u016b': 'u',\n      '\\u016d': 'u',\n      '\\u016f': 'u',\n      '\\u0171': 'u',\n      '\\u0173': 'u',\n      '\\u0174': 'W',\n      '\\u0175': 'w',\n      '\\u0176': 'Y',\n      '\\u0177': 'y',\n      '\\u0178': 'Y',\n      '\\u0179': 'Z',\n      '\\u017b': 'Z',\n      '\\u017d': 'Z',\n      '\\u017a': 'z',\n      '\\u017c': 'z',\n      '\\u017e': 'z',\n      '\\u0132': 'IJ',\n      '\\u0133': 'ij',\n      '\\u0152': 'Oe',\n      '\\u0153': 'oe',\n      '\\u0149': \"'n\",\n      '\\u017f': 's'\n    };\n    /** Used to match Latin Unicode letters (excluding mathematical operators). */\n\n    var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n    /** Used to compose unicode character classes. */\n\n    var rsComboMarksRange = '\\\\u0300-\\\\u036f',\n        reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n        rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n        rsComboMarksExtendedRange = '\\\\u1ab0-\\\\u1aff',\n        rsComboMarksSupplementRange = '\\\\u1dc0-\\\\u1dff',\n        rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange + rsComboMarksExtendedRange + rsComboMarksSupplementRange;\n    /** Used to compose unicode capture groups. */\n\n    var rsCombo = '[' + rsComboRange + ']';\n    /**\n     * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n     * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n     */\n\n    var reComboMark = RegExp(rsCombo, 'g');\n\n    function deburrLetter(key) {\n      return deburredLetters[key];\n    }\n\n    ;\n\n    function normalizeToBase(string) {\n      string = string.toString();\n      return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n    } // List of HTML entities for escaping.\n\n\n    var escapeMap = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#x27;',\n      '`': '&#x60;'\n    }; // Functions for escaping and unescaping strings to/from HTML interpolation.\n\n    var createEscaper = function (map) {\n      var escaper = function (match) {\n        return map[match];\n      }; // Regexes for identifying a key that needs to be escaped.\n\n\n      var source = '(?:' + Object.keys(map).join('|') + ')';\n      var testRegexp = RegExp(source);\n      var replaceRegexp = RegExp(source, 'g');\n      return function (string) {\n        string = string == null ? '' : '' + string;\n        return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n      };\n    };\n\n    var htmlEscape = createEscaper(escapeMap);\n    /**\n     * ------------------------------------------------------------------------\n     * Constants\n     * ------------------------------------------------------------------------\n     */\n\n    var keyCodeMap = {\n      32: ' ',\n      48: '0',\n      49: '1',\n      50: '2',\n      51: '3',\n      52: '4',\n      53: '5',\n      54: '6',\n      55: '7',\n      56: '8',\n      57: '9',\n      59: ';',\n      65: 'A',\n      66: 'B',\n      67: 'C',\n      68: 'D',\n      69: 'E',\n      70: 'F',\n      71: 'G',\n      72: 'H',\n      73: 'I',\n      74: 'J',\n      75: 'K',\n      76: 'L',\n      77: 'M',\n      78: 'N',\n      79: 'O',\n      80: 'P',\n      81: 'Q',\n      82: 'R',\n      83: 'S',\n      84: 'T',\n      85: 'U',\n      86: 'V',\n      87: 'W',\n      88: 'X',\n      89: 'Y',\n      90: 'Z',\n      96: '0',\n      97: '1',\n      98: '2',\n      99: '3',\n      100: '4',\n      101: '5',\n      102: '6',\n      103: '7',\n      104: '8',\n      105: '9'\n    };\n    var keyCodes = {\n      ESCAPE: 27,\n      // KeyboardEvent.which value for Escape (Esc) key\n      ENTER: 13,\n      // KeyboardEvent.which value for Enter key\n      SPACE: 32,\n      // KeyboardEvent.which value for space key\n      TAB: 9,\n      // KeyboardEvent.which value for tab key\n      ARROW_UP: 38,\n      // KeyboardEvent.which value for up arrow key\n      ARROW_DOWN: 40 // KeyboardEvent.which value for down arrow key\n\n    }; // eslint-disable-next-line no-undef\n\n    var Dropdown = window.Dropdown || bootstrap.Dropdown;\n\n    function getVersion() {\n      var version;\n\n      try {\n        version = $.fn.dropdown.Constructor.VERSION;\n      } catch (err) {\n        version = Dropdown.VERSION;\n      }\n\n      return version;\n    }\n\n    var version = {\n      success: false,\n      major: '3'\n    };\n\n    try {\n      version.full = (getVersion() || '').split(' ')[0].split('.');\n      version.major = version.full[0];\n      version.success = true;\n    } catch (err) {// do nothing\n    }\n\n    var selectId = 0;\n    var EVENT_KEY = '.bs.select';\n    var classNames = {\n      DISABLED: 'disabled',\n      DIVIDER: 'divider',\n      SHOW: 'open',\n      DROPUP: 'dropup',\n      MENU: 'dropdown-menu',\n      MENURIGHT: 'dropdown-menu-right',\n      MENULEFT: 'dropdown-menu-left',\n      // to-do: replace with more advanced template/customization options\n      BUTTONCLASS: 'btn-default',\n      POPOVERHEADER: 'popover-title',\n      ICONBASE: 'glyphicon',\n      TICKICON: 'glyphicon-ok'\n    };\n    var Selector = {\n      MENU: '.' + classNames.MENU,\n      DATA_TOGGLE: 'data-toggle=\"dropdown\"'\n    };\n    var elementTemplates = {\n      div: document.createElement('div'),\n      span: document.createElement('span'),\n      i: document.createElement('i'),\n      subtext: document.createElement('small'),\n      a: document.createElement('a'),\n      li: document.createElement('li'),\n      whitespace: document.createTextNode('\\u00A0'),\n      fragment: document.createDocumentFragment(),\n      option: document.createElement('option')\n    };\n    elementTemplates.selectedOption = elementTemplates.option.cloneNode(false);\n    elementTemplates.selectedOption.setAttribute('selected', true);\n    elementTemplates.noResults = elementTemplates.li.cloneNode(false);\n    elementTemplates.noResults.className = 'no-results';\n    elementTemplates.a.setAttribute('role', 'option');\n    elementTemplates.a.className = 'dropdown-item';\n    elementTemplates.subtext.className = 'text-muted';\n    elementTemplates.text = elementTemplates.span.cloneNode(false);\n    elementTemplates.text.className = 'text';\n    elementTemplates.checkMark = elementTemplates.span.cloneNode(false);\n    var REGEXP_ARROW = new RegExp(keyCodes.ARROW_UP + '|' + keyCodes.ARROW_DOWN);\n    var REGEXP_TAB_OR_ESCAPE = new RegExp('^' + keyCodes.TAB + '$|' + keyCodes.ESCAPE);\n    var generateOption = {\n      li: function (content, classes, optgroup) {\n        var li = elementTemplates.li.cloneNode(false);\n\n        if (content) {\n          if (content.nodeType === 1 || content.nodeType === 11) {\n            li.appendChild(content);\n          } else {\n            li.innerHTML = content;\n          }\n        }\n\n        if (typeof classes !== 'undefined' && classes !== '') li.className = classes;\n        if (typeof optgroup !== 'undefined' && optgroup !== null) li.classList.add('optgroup-' + optgroup);\n        return li;\n      },\n      a: function (text, classes, inline) {\n        var a = elementTemplates.a.cloneNode(true);\n\n        if (text) {\n          if (text.nodeType === 11) {\n            a.appendChild(text);\n          } else {\n            a.insertAdjacentHTML('beforeend', text);\n          }\n        }\n\n        if (typeof classes !== 'undefined' && classes !== '') a.classList.add.apply(a.classList, classes.split(/\\s+/));\n        if (inline) a.setAttribute('style', inline);\n        return a;\n      },\n      text: function (options, useFragment) {\n        var textElement = elementTemplates.text.cloneNode(false),\n            subtextElement,\n            iconElement;\n\n        if (options.content) {\n          textElement.innerHTML = options.content;\n        } else {\n          textElement.textContent = options.text;\n\n          if (options.icon) {\n            var whitespace = elementTemplates.whitespace.cloneNode(false); // need to use <i> for icons in the button to prevent a breaking change\n            // note: switch to span in next major release\n\n            iconElement = (useFragment === true ? elementTemplates.i : elementTemplates.span).cloneNode(false);\n            iconElement.className = this.options.iconBase + ' ' + options.icon;\n            elementTemplates.fragment.appendChild(iconElement);\n            elementTemplates.fragment.appendChild(whitespace);\n          }\n\n          if (options.subtext) {\n            subtextElement = elementTemplates.subtext.cloneNode(false);\n            subtextElement.textContent = options.subtext;\n            textElement.appendChild(subtextElement);\n          }\n        }\n\n        if (useFragment === true) {\n          while (textElement.childNodes.length > 0) {\n            elementTemplates.fragment.appendChild(textElement.childNodes[0]);\n          }\n        } else {\n          elementTemplates.fragment.appendChild(textElement);\n        }\n\n        return elementTemplates.fragment;\n      },\n      label: function (options) {\n        var textElement = elementTemplates.text.cloneNode(false),\n            subtextElement,\n            iconElement;\n        textElement.innerHTML = options.display;\n\n        if (options.icon) {\n          var whitespace = elementTemplates.whitespace.cloneNode(false);\n          iconElement = elementTemplates.span.cloneNode(false);\n          iconElement.className = this.options.iconBase + ' ' + options.icon;\n          elementTemplates.fragment.appendChild(iconElement);\n          elementTemplates.fragment.appendChild(whitespace);\n        }\n\n        if (options.subtext) {\n          subtextElement = elementTemplates.subtext.cloneNode(false);\n          subtextElement.textContent = options.subtext;\n          textElement.appendChild(subtextElement);\n        }\n\n        elementTemplates.fragment.appendChild(textElement);\n        return elementTemplates.fragment;\n      }\n    };\n    var getOptionData = {\n      fromOption: function (option, type) {\n        var value;\n\n        switch (type) {\n          case 'divider':\n            value = option.getAttribute('data-divider') === 'true';\n            break;\n\n          case 'text':\n            value = option.textContent;\n            break;\n\n          case 'label':\n            value = option.label;\n            break;\n\n          case 'style':\n            value = option.style.cssText;\n            break;\n\n          case 'title':\n            value = option.title;\n            break;\n\n          default:\n            value = option.getAttribute('data-' + toKebabCase(type));\n            break;\n        }\n\n        return value;\n      },\n      fromDataSource: function (option, type) {\n        var value;\n\n        switch (type) {\n          case 'text':\n          case 'label':\n            value = option.text || option.value || '';\n            break;\n\n          default:\n            value = option[type];\n            break;\n        }\n\n        return value;\n      }\n    };\n\n    function showNoResults(searchMatch, searchValue) {\n      if (!searchMatch.length) {\n        elementTemplates.noResults.innerHTML = this.options.noneResultsText.replace('{0}', '\"' + htmlEscape(searchValue) + '\"');\n        this.$menuInner[0].firstChild.appendChild(elementTemplates.noResults);\n      }\n    }\n\n    function filterHidden(item) {\n      return !(item.hidden || this.options.hideDisabled && item.disabled);\n    }\n\n    var Selectpicker = function (element, options) {\n      var that = this; // bootstrap-select has been initialized - revert valHooks.select.set back to its original function\n\n      if (!valHooks.useDefault) {\n        $.valHooks.select.set = valHooks._set;\n        valHooks.useDefault = true;\n      }\n\n      this.$element = $(element);\n      this.$newElement = null;\n      this.$button = null;\n      this.$menu = null;\n      this.options = options;\n      this.selectpicker = {\n        main: {\n          data: [],\n          optionQueue: elementTemplates.fragment.cloneNode(false),\n          hasMore: false\n        },\n        search: {\n          data: [],\n          hasMore: false\n        },\n        current: {},\n        // current is either equal to main or search depending on if a search is in progress\n        view: {},\n        // map of option values and their respective data (only used in conjunction with options.source)\n        optionValuesDataMap: {},\n        isSearching: false,\n        keydown: {\n          keyHistory: '',\n          resetKeyHistory: {\n            start: function () {\n              return setTimeout(function () {\n                that.selectpicker.keydown.keyHistory = '';\n              }, 800);\n            }\n          }\n        }\n      };\n      this.sizeInfo = {}; // Format window padding\n\n      var winPad = this.options.windowPadding;\n\n      if (typeof winPad === 'number') {\n        this.options.windowPadding = [winPad, winPad, winPad, winPad];\n      } // Expose public methods\n\n\n      this.val = Selectpicker.prototype.val;\n      this.render = Selectpicker.prototype.render;\n      this.refresh = Selectpicker.prototype.refresh;\n      this.setStyle = Selectpicker.prototype.setStyle;\n      this.selectAll = Selectpicker.prototype.selectAll;\n      this.deselectAll = Selectpicker.prototype.deselectAll;\n      this.destroy = Selectpicker.prototype.destroy;\n      this.remove = Selectpicker.prototype.remove;\n      this.show = Selectpicker.prototype.show;\n      this.hide = Selectpicker.prototype.hide;\n      this.init();\n    };\n\n    Selectpicker.VERSION = '1.14.0-beta3'; // part of this is duplicated in i18n/defaults-en_US.js. Make sure to update both.\n\n    Selectpicker.DEFAULTS = {\n      noneSelectedText: 'Nothing selected',\n      noneResultsText: 'No results matched {0}',\n      countSelectedText: function (numSelected, numTotal) {\n        return numSelected == 1 ? '{0} item selected' : '{0} items selected';\n      },\n      maxOptionsText: function (numAll, numGroup) {\n        return [numAll == 1 ? 'Limit reached ({n} item max)' : 'Limit reached ({n} items max)', numGroup == 1 ? 'Group limit reached ({n} item max)' : 'Group limit reached ({n} items max)'];\n      },\n      selectAllText: 'Select All',\n      deselectAllText: 'Deselect All',\n      source: {\n        pageSize: 40\n      },\n      chunkSize: 40,\n      doneButton: false,\n      doneButtonText: 'Close',\n      multipleSeparator: ', ',\n      styleBase: 'btn',\n      style: classNames.BUTTONCLASS,\n      size: 'auto',\n      title: null,\n      placeholder: null,\n      allowClear: false,\n      selectedTextFormat: 'values',\n      width: false,\n      container: false,\n      hideDisabled: false,\n      showSubtext: false,\n      showIcon: true,\n      showContent: true,\n      dropupAuto: true,\n      header: false,\n      liveSearch: false,\n      liveSearchPlaceholder: null,\n      liveSearchNormalize: false,\n      liveSearchStyle: 'contains',\n      actionsBox: false,\n      iconBase: classNames.ICONBASE,\n      tickIcon: classNames.TICKICON,\n      showTick: false,\n      template: {\n        caret: '<span class=\"caret\"></span>'\n      },\n      maxOptions: false,\n      mobile: false,\n      selectOnTab: true,\n      dropdownAlignRight: false,\n      windowPadding: 0,\n      virtualScroll: 600,\n      display: false,\n      sanitize: true,\n      sanitizeFn: null,\n      whiteList: DefaultWhitelist\n    };\n    Selectpicker.prototype = {\n      constructor: Selectpicker,\n      init: function () {\n        var that = this,\n            id = this.$element.attr('id'),\n            element = this.$element[0],\n            form = element.form;\n        selectId++;\n        this.selectId = 'bs-select-' + selectId;\n        element.classList.add('bs-select-hidden');\n        this.multiple = this.$element.prop('multiple');\n        this.autofocus = this.$element.prop('autofocus');\n\n        if (element.classList.contains('show-tick')) {\n          this.options.showTick = true;\n        }\n\n        this.$newElement = this.createDropdown();\n        this.$element.after(this.$newElement).prependTo(this.$newElement); // ensure select is associated with form element if it got unlinked after moving it inside newElement\n\n        if (form && element.form === null) {\n          if (!form.id) form.id = 'form-' + this.selectId;\n          element.setAttribute('form', form.id);\n        }\n\n        this.$button = this.$newElement.children('button');\n        if (this.options.allowClear) this.$clearButton = this.$button.children('.bs-select-clear-selected');\n        this.$menu = this.$newElement.children(Selector.MENU);\n        this.$menuInner = this.$menu.children('.inner');\n        this.$searchbox = this.$menu.find('input');\n        element.classList.remove('bs-select-hidden');\n        this.fetchData(function () {\n          that.render(true);\n          that.buildList();\n          requestAnimationFrame(function () {\n            that.$element.trigger('loaded' + EVENT_KEY);\n          });\n        });\n        if (this.options.dropdownAlignRight === true) this.$menu[0].classList.add(classNames.MENURIGHT);\n\n        if (typeof id !== 'undefined') {\n          this.$button.attr('data-id', id);\n        }\n\n        this.checkDisabled();\n        this.clickListener();\n        if (version.major > 4) this.dropdown = new Dropdown(this.$button[0]);\n\n        if (this.options.liveSearch) {\n          this.liveSearchListener();\n          this.focusedParent = this.$searchbox[0];\n        } else {\n          this.focusedParent = this.$menuInner[0];\n        }\n\n        this.setStyle();\n        this.setWidth();\n\n        if (this.options.container) {\n          this.selectPosition();\n        } else {\n          this.$element.on('hide' + EVENT_KEY, function () {\n            if (that.isVirtual()) {\n              // empty menu on close\n              var menuInner = that.$menuInner[0],\n                  emptyMenu = menuInner.firstChild.cloneNode(false); // replace the existing UL with an empty one - this is faster than $.empty() or innerHTML = ''\n\n              menuInner.replaceChild(emptyMenu, menuInner.firstChild);\n              menuInner.scrollTop = 0;\n            }\n          });\n        }\n\n        this.$menu.data('this', this);\n        this.$newElement.data('this', this);\n        if (this.options.mobile) this.mobile();\n        this.$newElement.on({\n          'hide.bs.dropdown': function (e) {\n            that.$element.trigger('hide' + EVENT_KEY, e);\n          },\n          'hidden.bs.dropdown': function (e) {\n            that.$element.trigger('hidden' + EVENT_KEY, e);\n          },\n          'show.bs.dropdown': function (e) {\n            that.$element.trigger('show' + EVENT_KEY, e);\n          },\n          'shown.bs.dropdown': function (e) {\n            that.$element.trigger('shown' + EVENT_KEY, e);\n          }\n        });\n\n        if (element.hasAttribute('required')) {\n          this.$element.on('invalid' + EVENT_KEY, function () {\n            that.$button[0].classList.add('bs-invalid');\n            that.$element.on('shown' + EVENT_KEY + '.invalid', function () {\n              that.$element.val(that.$element.val()) // set the value to hide the validation message in Chrome when menu is opened\n              .off('shown' + EVENT_KEY + '.invalid');\n            }).on('rendered' + EVENT_KEY, function () {\n              // if select is no longer invalid, remove the bs-invalid class\n              if (this.validity.valid) that.$button[0].classList.remove('bs-invalid');\n              that.$element.off('rendered' + EVENT_KEY);\n            });\n            that.$button.on('blur' + EVENT_KEY, function () {\n              that.$element.trigger('focus').trigger('blur');\n              that.$button.off('blur' + EVENT_KEY);\n            });\n          });\n        }\n\n        if (form) {\n          $(form).on('reset' + EVENT_KEY, function () {\n            requestAnimationFrame(function () {\n              that.render();\n            });\n          });\n        }\n      },\n      createDropdown: function () {\n        // Options\n        // If we are multiple or showTick option is set, then add the show-tick class\n        var showTick = this.multiple || this.options.showTick ? ' show-tick' : '',\n            multiselectable = this.multiple ? ' aria-multiselectable=\"true\"' : '',\n            inputGroup = '',\n            autofocus = this.autofocus ? ' autofocus' : '';\n\n        if (version.major < 4 && this.$element.parent().hasClass('input-group')) {\n          inputGroup = ' input-group-btn';\n        } // Elements\n\n\n        var drop,\n            header = '',\n            searchbox = '',\n            actionsbox = '',\n            donebutton = '',\n            clearButton = '';\n\n        if (this.options.header) {\n          header = '<div class=\"' + classNames.POPOVERHEADER + '\">' + '<button type=\"button\" class=\"close\" aria-hidden=\"true\">&times;</button>' + this.options.header + '</div>';\n        }\n\n        if (this.options.liveSearch) {\n          searchbox = '<div class=\"bs-searchbox\">' + '<input type=\"search\" class=\"form-control\" autocomplete=\"off\"' + (this.options.liveSearchPlaceholder === null ? '' : ' placeholder=\"' + htmlEscape(this.options.liveSearchPlaceholder) + '\"') + ' role=\"combobox\" aria-label=\"Search\" aria-controls=\"' + this.selectId + '\" aria-autocomplete=\"list\">' + '</div>';\n        }\n\n        if (this.multiple && this.options.actionsBox) {\n          actionsbox = '<div class=\"bs-actionsbox\">' + '<div class=\"btn-group btn-group-sm\">' + '<button type=\"button\" class=\"actions-btn bs-select-all btn ' + classNames.BUTTONCLASS + '\">' + this.options.selectAllText + '</button>' + '<button type=\"button\" class=\"actions-btn bs-deselect-all btn ' + classNames.BUTTONCLASS + '\">' + this.options.deselectAllText + '</button>' + '</div>' + '</div>';\n        }\n\n        if (this.multiple && this.options.doneButton) {\n          donebutton = '<div class=\"bs-donebutton\">' + '<div class=\"btn-group\">' + '<button type=\"button\" class=\"btn btn-sm ' + classNames.BUTTONCLASS + '\">' + this.options.doneButtonText + '</button>' + '</div>' + '</div>';\n        }\n\n        if (this.options.allowClear) {\n          clearButton = '<span class=\"close bs-select-clear-selected\" title=\"' + this.options.deselectAllText + '\"><span>&times;</span>';\n        }\n\n        drop = '<div class=\"dropdown bootstrap-select' + showTick + inputGroup + '\">' + '<button type=\"button\" tabindex=\"-1\" class=\"' + this.options.styleBase + ' dropdown-toggle\" ' + (this.options.display === 'static' ? 'data-display=\"static\"' : '') + Selector.DATA_TOGGLE + autofocus + ' role=\"combobox\" aria-owns=\"' + this.selectId + '\" aria-haspopup=\"listbox\" aria-expanded=\"false\">' + '<div class=\"filter-option\">' + '<div class=\"filter-option-inner\">' + '<div class=\"filter-option-inner-inner\">&nbsp;</div>' + '</div> ' + '</div>' + clearButton + '</span>' + (version.major >= '4' ? '' : '<span class=\"bs-caret\">' + this.options.template.caret + '</span>') + '</button>' + '<div class=\"' + classNames.MENU + ' ' + (version.major >= '4' ? '' : classNames.SHOW) + '\">' + header + searchbox + actionsbox + '<div class=\"inner ' + classNames.SHOW + '\" role=\"listbox\" id=\"' + this.selectId + '\" tabindex=\"-1\" ' + multiselectable + '>' + '<ul class=\"' + classNames.MENU + ' inner ' + (version.major >= '4' ? classNames.SHOW : '') + '\" role=\"presentation\">' + '</ul>' + '</div>' + donebutton + '</div>' + '</div>';\n        return $(drop);\n      },\n      setPositionData: function () {\n        this.selectpicker.view.canHighlight = [];\n        this.selectpicker.view.size = 0;\n        this.selectpicker.view.firstHighlightIndex = false;\n\n        for (var i = 0; i < this.selectpicker.current.data.length; i++) {\n          var li = this.selectpicker.current.data[i],\n              canHighlight = true;\n\n          if (li.type === 'divider') {\n            canHighlight = false;\n            li.height = this.sizeInfo.dividerHeight;\n          } else if (li.type === 'optgroup-label') {\n            canHighlight = false;\n            li.height = this.sizeInfo.dropdownHeaderHeight;\n          } else {\n            li.height = this.sizeInfo.liHeight;\n          }\n\n          if (li.disabled) canHighlight = false;\n          this.selectpicker.view.canHighlight.push(canHighlight);\n\n          if (canHighlight) {\n            this.selectpicker.view.size++;\n            li.posinset = this.selectpicker.view.size;\n            if (this.selectpicker.view.firstHighlightIndex === false) this.selectpicker.view.firstHighlightIndex = i;\n          }\n\n          li.position = (i === 0 ? 0 : this.selectpicker.current.data[i - 1].position) + li.height;\n        }\n      },\n      isVirtual: function () {\n        return this.options.virtualScroll !== false && this.selectpicker.main.data.length >= this.options.virtualScroll || this.options.virtualScroll === true;\n      },\n      createView: function (isSearching, setSize, refresh) {\n        var that = this,\n            scrollTop = 0;\n        this.selectpicker.isSearching = isSearching;\n        this.selectpicker.current = isSearching ? this.selectpicker.search : this.selectpicker.main;\n        this.setPositionData();\n\n        if (setSize) {\n          if (refresh) {\n            scrollTop = this.$menuInner[0].scrollTop;\n          } else if (!that.multiple) {\n            var element = that.$element[0],\n                selectedIndex = (element.options[element.selectedIndex] || {}).liIndex;\n\n            if (typeof selectedIndex === 'number' && that.options.size !== false) {\n              var selectedData = that.selectpicker.main.data[selectedIndex],\n                  position = selectedData && selectedData.position;\n\n              if (position) {\n                scrollTop = position - (that.sizeInfo.menuInnerHeight + that.sizeInfo.liHeight) / 2;\n              }\n            }\n          }\n        }\n\n        scroll(scrollTop, true);\n        this.$menuInner.off('scroll.createView').on('scroll.createView', function (e, updateValue) {\n          if (!that.noScroll) scroll(this.scrollTop, updateValue);\n          that.noScroll = false;\n        });\n\n        function scroll(scrollTop, init) {\n          var size = that.selectpicker.current.data.length,\n              chunks = [],\n              chunkSize,\n              chunkCount,\n              firstChunk,\n              lastChunk,\n              currentChunk,\n              prevPositions,\n              positionIsDifferent,\n              previousElements,\n              menuIsDifferent = true,\n              isVirtual = that.isVirtual();\n          that.selectpicker.view.scrollTop = scrollTop;\n          chunkSize = that.options.chunkSize; // number of options in a chunk\n\n          chunkCount = Math.ceil(size / chunkSize) || 1; // number of chunks\n\n          for (var i = 0; i < chunkCount; i++) {\n            var endOfChunk = (i + 1) * chunkSize;\n\n            if (i === chunkCount - 1) {\n              endOfChunk = size;\n            }\n\n            chunks[i] = [i * chunkSize + (!i ? 0 : 1), endOfChunk];\n            if (!size) break;\n\n            if (currentChunk === undefined && scrollTop - 1 <= that.selectpicker.current.data[endOfChunk - 1].position - that.sizeInfo.menuInnerHeight) {\n              currentChunk = i;\n            }\n          }\n\n          if (currentChunk === undefined) currentChunk = 0;\n          prevPositions = [that.selectpicker.view.position0, that.selectpicker.view.position1]; // always display previous, current, and next chunks\n\n          firstChunk = Math.max(0, currentChunk - 1);\n          lastChunk = Math.min(chunkCount - 1, currentChunk + 1);\n          that.selectpicker.view.position0 = isVirtual === false ? 0 : Math.max(0, chunks[firstChunk][0]) || 0;\n          that.selectpicker.view.position1 = isVirtual === false ? size : Math.min(size, chunks[lastChunk][1]) || 0;\n          positionIsDifferent = prevPositions[0] !== that.selectpicker.view.position0 || prevPositions[1] !== that.selectpicker.view.position1;\n\n          if (that.activeElement !== undefined) {\n            if (init) {\n              if (that.activeElement !== that.selectedElement) {\n                that.defocusItem(that.activeElement);\n              }\n\n              that.activeElement = undefined;\n            }\n\n            if (that.activeElement !== that.selectedElement) {\n              that.defocusItem(that.selectedElement);\n            }\n          }\n\n          if (that.prevActiveElement !== undefined && that.prevActiveElement !== that.activeElement && that.prevActiveElement !== that.selectedElement) {\n            that.defocusItem(that.prevActiveElement);\n          }\n\n          if (init || positionIsDifferent || that.selectpicker.current.hasMore) {\n            previousElements = that.selectpicker.view.visibleElements ? that.selectpicker.view.visibleElements.slice() : [];\n\n            if (isVirtual === false) {\n              that.selectpicker.view.visibleElements = that.selectpicker.current.elements;\n            } else {\n              that.selectpicker.view.visibleElements = that.selectpicker.current.elements.slice(that.selectpicker.view.position0, that.selectpicker.view.position1);\n            }\n\n            that.setOptionStatus(); // if searching, check to make sure the list has actually been updated before updating DOM\n            // this prevents unnecessary repaints\n\n            if (isSearching || isVirtual === false && init) menuIsDifferent = !isEqual(previousElements, that.selectpicker.view.visibleElements); // if virtual scroll is disabled and not searching,\n            // menu should never need to be updated more than once\n\n            if ((init || isVirtual === true) && menuIsDifferent) {\n              var menuInner = that.$menuInner[0],\n                  menuFragment = document.createDocumentFragment(),\n                  emptyMenu = menuInner.firstChild.cloneNode(false),\n                  marginTop,\n                  marginBottom,\n                  elements = that.selectpicker.view.visibleElements,\n                  toSanitize = []; // replace the existing UL with an empty one - this is faster than $.empty()\n\n              menuInner.replaceChild(emptyMenu, menuInner.firstChild);\n\n              for (var i = 0, visibleElementsLen = elements.length; i < visibleElementsLen; i++) {\n                var element = elements[i],\n                    elText,\n                    elementData;\n\n                if (that.options.sanitize) {\n                  elText = element.lastChild;\n\n                  if (elText) {\n                    elementData = that.selectpicker.current.data[i + that.selectpicker.view.position0];\n\n                    if (elementData && elementData.content && !elementData.sanitized) {\n                      toSanitize.push(elText);\n                      elementData.sanitized = true;\n                    }\n                  }\n                }\n\n                menuFragment.appendChild(element);\n              }\n\n              if (that.options.sanitize && toSanitize.length) {\n                sanitizeHtml(toSanitize, that.options.whiteList, that.options.sanitizeFn);\n              }\n\n              if (isVirtual === true) {\n                marginTop = that.selectpicker.view.position0 === 0 ? 0 : that.selectpicker.current.data[that.selectpicker.view.position0 - 1].position;\n                marginBottom = that.selectpicker.view.position1 > size - 1 ? 0 : that.selectpicker.current.data[size - 1].position - that.selectpicker.current.data[that.selectpicker.view.position1 - 1].position;\n                menuInner.firstChild.style.marginTop = marginTop + 'px';\n                menuInner.firstChild.style.marginBottom = marginBottom + 'px';\n              } else {\n                menuInner.firstChild.style.marginTop = 0;\n                menuInner.firstChild.style.marginBottom = 0;\n              }\n\n              menuInner.firstChild.appendChild(menuFragment); // if an option is encountered that is wider than the current menu width, update the menu width accordingly\n              // switch to ResizeObserver with increased browser support\n\n              if (isVirtual === true && that.sizeInfo.hasScrollBar) {\n                var menuInnerInnerWidth = menuInner.firstChild.offsetWidth;\n\n                if (init && menuInnerInnerWidth < that.sizeInfo.menuInnerInnerWidth && that.sizeInfo.totalMenuWidth > that.sizeInfo.selectWidth) {\n                  menuInner.firstChild.style.minWidth = that.sizeInfo.menuInnerInnerWidth + 'px';\n                } else if (menuInnerInnerWidth > that.sizeInfo.menuInnerInnerWidth) {\n                  // set to 0 to get actual width of menu\n                  that.$menu[0].style.minWidth = 0;\n                  var actualMenuWidth = menuInner.firstChild.offsetWidth;\n\n                  if (actualMenuWidth > that.sizeInfo.menuInnerInnerWidth) {\n                    that.sizeInfo.menuInnerInnerWidth = actualMenuWidth;\n                    menuInner.firstChild.style.minWidth = that.sizeInfo.menuInnerInnerWidth + 'px';\n                  } // reset to default CSS styling\n\n\n                  that.$menu[0].style.minWidth = '';\n                }\n              }\n            }\n\n            if ((!isSearching && that.options.source.data || isSearching && that.options.source.search) && that.selectpicker.current.hasMore && currentChunk === chunkCount - 1) {\n              // Don't load the next chunk until scrolling has started\n              // This prevents unnecessary requests while the user is typing if pageSize is <= chunkSize\n              if (scrollTop > 0) {\n                // Chunks use 0-based indexing, but pages use 1-based. Add 1 to convert and add 1 again to get next page\n                var page = Math.floor(currentChunk * that.options.chunkSize / that.options.source.pageSize) + 2;\n                that.fetchData(function () {\n                  that.render();\n                  that.buildList(size, isSearching);\n                  that.setPositionData();\n                  scroll(scrollTop);\n                }, isSearching ? 'search' : 'data', page, isSearching ? that.selectpicker.search.previousValue : undefined);\n              }\n            }\n          }\n\n          that.prevActiveElement = that.activeElement;\n\n          if (!that.options.liveSearch) {\n            that.$menuInner.trigger('focus');\n          } else if (isSearching && init) {\n            var index = 0,\n                newActive;\n\n            if (!that.selectpicker.view.canHighlight[index]) {\n              index = 1 + that.selectpicker.view.canHighlight.slice(1).indexOf(true);\n            }\n\n            newActive = that.selectpicker.view.visibleElements[index];\n            that.defocusItem(that.selectpicker.view.currentActive);\n            that.activeElement = (that.selectpicker.current.data[index] || {}).element;\n            that.focusItem(newActive);\n          }\n        }\n\n        $(window).off('resize' + EVENT_KEY + '.' + this.selectId + '.createView').on('resize' + EVENT_KEY + '.' + this.selectId + '.createView', function () {\n          var isActive = that.$newElement.hasClass(classNames.SHOW);\n          if (isActive) scroll(that.$menuInner[0].scrollTop);\n        });\n      },\n      focusItem: function (li, liData, noStyle) {\n        if (li) {\n          liData = liData || this.selectpicker.current.data[this.selectpicker.current.elements.indexOf(this.activeElement)];\n          var a = li.firstChild;\n\n          if (a) {\n            a.setAttribute('aria-setsize', this.selectpicker.view.size);\n            a.setAttribute('aria-posinset', liData.posinset);\n\n            if (noStyle !== true) {\n              this.focusedParent.setAttribute('aria-activedescendant', a.id);\n              li.classList.add('active');\n              a.classList.add('active');\n            }\n          }\n        }\n      },\n      defocusItem: function (li) {\n        if (li) {\n          li.classList.remove('active');\n          if (li.firstChild) li.firstChild.classList.remove('active');\n        }\n      },\n      setPlaceholder: function () {\n        var that = this,\n            updateIndex = false;\n\n        if ((this.options.placeholder || this.options.allowClear) && !this.multiple) {\n          if (!this.selectpicker.view.titleOption) this.selectpicker.view.titleOption = document.createElement('option'); // this option doesn't create a new <li> element, but does add a new option at the start,\n          // so startIndex should increase to prevent having to check every option for the bs-title-option class\n\n          updateIndex = true;\n          var element = this.$element[0],\n              selectTitleOption = false,\n              titleNotAppended = !this.selectpicker.view.titleOption.parentNode,\n              selectedIndex = element.selectedIndex,\n              selectedOption = element.options[selectedIndex],\n              firstSelectable = element.querySelector('select > *:not(:disabled)'),\n              firstSelectableIndex = firstSelectable ? firstSelectable.index : 0,\n              navigation = window.performance && window.performance.getEntriesByType('navigation'),\n              // Safari doesn't support getEntriesByType('navigation') - fall back to performance.navigation\n          isNotBackForward = navigation && navigation.length ? navigation[0].type !== 'back_forward' : window.performance.navigation.type !== 2;\n\n          if (titleNotAppended) {\n            // Use native JS to prepend option (faster)\n            this.selectpicker.view.titleOption.className = 'bs-title-option';\n            this.selectpicker.view.titleOption.value = ''; // Check if selected or data-selected attribute is already set on an option. If not, select the titleOption option.\n            // the selected item may have been changed by user or programmatically before the bootstrap select plugin runs,\n            // if so, the select will have the data-selected attribute\n\n            selectTitleOption = !selectedOption || selectedIndex === firstSelectableIndex && selectedOption.defaultSelected === false && this.$element.data('selected') === undefined;\n          }\n\n          if (titleNotAppended || this.selectpicker.view.titleOption.index !== 0) {\n            element.insertBefore(this.selectpicker.view.titleOption, element.firstChild);\n          } // Set selected *after* appending to select,\n          // otherwise the option doesn't get selected in IE\n          // set using selectedIndex, as setting the selected attr to true here doesn't work in IE11\n\n\n          if (selectTitleOption && isNotBackForward) {\n            element.selectedIndex = 0;\n          } else if (document.readyState !== 'complete') {\n            // if navigation type is back_forward, there's a chance the select will have its value set by BFCache\n            // wait for that value to be set, then run render again\n            window.addEventListener('pageshow', function () {\n              if (that.selectpicker.view.displayedValue !== element.value) that.render();\n            });\n          }\n        }\n\n        return updateIndex;\n      },\n      fetchData: function (callback, type, page, searchValue) {\n        page = page || 1;\n        type = type || 'data';\n        var that = this,\n            data = this.options.source[type],\n            builtData;\n\n        if (data) {\n          this.options.virtualScroll = true;\n\n          if (typeof data === 'function') {\n            data.call(this, function (data, more, totalItems) {\n              var current = that.selectpicker[type === 'search' ? 'search' : 'main'];\n              current.hasMore = more;\n              current.totalItems = totalItems;\n              builtData = that.buildData(data, type);\n              callback.call(that, builtData);\n              that.$element.trigger('fetched' + EVENT_KEY);\n            }, page, searchValue);\n          } else if (Array.isArray(data)) {\n            builtData = that.buildData(data, type);\n            callback.call(that, builtData);\n          }\n        } else {\n          builtData = this.buildData(false, type);\n          callback.call(that, builtData);\n        }\n      },\n      buildData: function (data, type) {\n        var that = this;\n        var dataGetter = data === false ? getOptionData.fromOption : getOptionData.fromDataSource;\n        var optionSelector = ':not([hidden]):not([data-hidden=\"true\"]):not([style*=\"display: none\"])',\n            mainData = [],\n            startLen = this.selectpicker.main.data ? this.selectpicker.main.data.length : 0,\n            optID = 0,\n            startIndex = this.setPlaceholder() && !data ? 1 : 0; // append the titleOption if necessary and skip the first option in the loop\n\n        if (type === 'search') {\n          startLen = this.selectpicker.search.data.length;\n        }\n\n        if (this.options.hideDisabled) optionSelector += ':not(:disabled)';\n        var selectOptions = data ? data.filter(filterHidden, this) : this.$element[0].querySelectorAll('select > *' + optionSelector);\n\n        function addDivider(config) {\n          var previousData = mainData[mainData.length - 1]; // ensure optgroup doesn't create back-to-back dividers\n\n          if (previousData && previousData.type === 'divider' && (previousData.optID || config.optID)) {\n            return;\n          }\n\n          config = config || {};\n          config.type = 'divider';\n          mainData.push(config);\n        }\n\n        function addOption(item, config) {\n          config = config || {};\n          config.divider = dataGetter(item, 'divider');\n\n          if (config.divider === true) {\n            addDivider({\n              optID: config.optID\n            });\n          } else {\n            var liIndex = mainData.length + startLen,\n                cssText = dataGetter(item, 'style'),\n                inlineStyle = cssText ? htmlEscape(cssText) : '',\n                optionClass = (item.className || '') + (config.optgroupClass || '');\n            if (config.optID) optionClass = 'opt ' + optionClass;\n            config.optionClass = optionClass.trim();\n            config.inlineStyle = inlineStyle;\n            config.text = dataGetter(item, 'text');\n            config.title = dataGetter(item, 'title');\n            config.content = dataGetter(item, 'content');\n            config.tokens = dataGetter(item, 'tokens');\n            config.subtext = dataGetter(item, 'subtext');\n            config.icon = dataGetter(item, 'icon');\n            config.display = config.content || config.text;\n            config.value = item.value === undefined ? item.text : item.value;\n            config.type = 'option';\n            config.index = liIndex;\n            config.option = !item.option ? item : item.option; // reference option element if it exists\n\n            config.option.liIndex = liIndex;\n            config.selected = !!item.selected;\n            config.disabled = config.disabled || !!item.disabled;\n\n            if (data !== false) {\n              if (that.selectpicker.optionValuesDataMap[config.value]) {\n                config = $.extend(that.selectpicker.optionValuesDataMap[config.value], config);\n              } else {\n                that.selectpicker.optionValuesDataMap[config.value] = config;\n              }\n            }\n\n            mainData.push(config);\n          }\n        }\n\n        function addOptgroup(index, selectOptions) {\n          var optgroup = selectOptions[index],\n              // skip placeholder option\n          previous = index - 1 < startIndex ? false : selectOptions[index - 1],\n              next = selectOptions[index + 1],\n              options = data ? optgroup.children.filter(filterHidden, this) : optgroup.querySelectorAll('option' + optionSelector);\n          if (!options.length) return;\n          var config = {\n            display: htmlEscape(dataGetter(item, 'label')),\n            subtext: dataGetter(optgroup, 'subtext'),\n            icon: dataGetter(optgroup, 'icon'),\n            type: 'optgroup-label',\n            optgroupClass: ' ' + (optgroup.className || ''),\n            optgroup: optgroup\n          },\n              headerIndex,\n              lastIndex;\n          optID++;\n\n          if (previous) {\n            addDivider({\n              optID: optID\n            });\n          }\n\n          config.optID = optID;\n          mainData.push(config);\n\n          for (var j = 0, len = options.length; j < len; j++) {\n            var option = options[j];\n\n            if (j === 0) {\n              headerIndex = mainData.length - 1;\n              lastIndex = headerIndex + len;\n            }\n\n            addOption(option, {\n              headerIndex: headerIndex,\n              lastIndex: lastIndex,\n              optID: config.optID,\n              optgroupClass: config.optgroupClass,\n              disabled: optgroup.disabled\n            });\n          }\n\n          if (next) {\n            addDivider({\n              optID: optID\n            });\n          }\n        }\n\n        for (var len = selectOptions.length, i = startIndex; i < len; i++) {\n          var item = selectOptions[i],\n              children = item.children;\n\n          if (children && children.length) {\n            addOptgroup.call(this, i, selectOptions);\n          } else {\n            addOption.call(this, item, {});\n          }\n        }\n\n        switch (type) {\n          case 'data':\n            {\n              if (!this.selectpicker.main.data) {\n                this.selectpicker.main.data = [];\n              }\n\n              Array.prototype.push.apply(this.selectpicker.main.data, mainData);\n              this.selectpicker.current.data = this.selectpicker.main.data;\n              break;\n            }\n\n          case 'search':\n            {\n              Array.prototype.push.apply(this.selectpicker.search.data, mainData);\n              break;\n            }\n        }\n\n        return mainData;\n      },\n      buildList: function (size, searching) {\n        var that = this,\n            selectData = searching ? this.selectpicker.search.data : this.selectpicker.main.data,\n            mainElements = [],\n            widestOptionLength = 0;\n\n        if ((that.options.showTick || that.multiple) && !elementTemplates.checkMark.parentNode) {\n          elementTemplates.checkMark.className = this.options.iconBase + ' ' + that.options.tickIcon + ' check-mark';\n          elementTemplates.a.appendChild(elementTemplates.checkMark);\n        }\n\n        function buildElement(mainElements, item) {\n          var liElement,\n              combinedLength = 0;\n\n          switch (item.type) {\n            case 'divider':\n              liElement = generateOption.li(false, classNames.DIVIDER, item.optID ? item.optID + 'div' : undefined);\n              break;\n\n            case 'option':\n              liElement = generateOption.li(generateOption.a(generateOption.text.call(that, item), item.optionClass, item.inlineStyle), '', item.optID);\n\n              if (liElement.firstChild) {\n                liElement.firstChild.id = that.selectId + '-' + item.index;\n              }\n\n              break;\n\n            case 'optgroup-label':\n              liElement = generateOption.li(generateOption.label.call(that, item), 'dropdown-header' + item.optgroupClass, item.optID);\n              break;\n          }\n\n          if (!item.element) {\n            item.element = liElement;\n          } else {\n            item.element.innerHTML = liElement.innerHTML;\n          }\n\n          mainElements.push(item.element); // count the number of characters in the option - not perfect, but should work in most cases\n\n          if (item.display) combinedLength += item.display.length;\n          if (item.subtext) combinedLength += item.subtext.length; // if there is an icon, ensure this option's width is checked\n\n          if (item.icon) combinedLength += 1;\n\n          if (combinedLength > widestOptionLength) {\n            widestOptionLength = combinedLength; // guess which option is the widest\n            // use this when calculating menu width\n            // not perfect, but it's fast, and the width will be updating accordingly when scrolling\n\n            that.selectpicker.view.widestOption = mainElements[mainElements.length - 1];\n          }\n        }\n\n        var startIndex = size || 0;\n\n        for (var len = selectData.length, i = startIndex; i < len; i++) {\n          var item = selectData[i];\n          buildElement(mainElements, item);\n        }\n\n        if (size) {\n          if (searching) {\n            Array.prototype.push.apply(this.selectpicker.search.elements, mainElements);\n          } else {\n            Array.prototype.push.apply(this.selectpicker.main.elements, mainElements);\n            this.selectpicker.current.elements = this.selectpicker.main.elements;\n          }\n        } else {\n          if (searching) {\n            this.selectpicker.search.elements = mainElements;\n          } else {\n            this.selectpicker.main.elements = this.selectpicker.current.elements = mainElements;\n          }\n        }\n      },\n      findLis: function () {\n        return this.$menuInner.find('.inner > li');\n      },\n      render: function (init) {\n        var that = this,\n            element = this.$element[0],\n            // ensure titleOption is appended and selected (if necessary) before getting selectedOptions\n        placeholderSelected = this.setPlaceholder() && element.selectedIndex === 0,\n            selectedOptions = getSelectedOptions.call(this),\n            selectedCount = selectedOptions.length,\n            selectedValues = getSelectValues.call(this, selectedOptions),\n            button = this.$button[0],\n            buttonInner = button.querySelector('.filter-option-inner-inner'),\n            multipleSeparator = document.createTextNode(this.options.multipleSeparator),\n            titleFragment = elementTemplates.fragment.cloneNode(false),\n            showCount,\n            countMax,\n            hasContent = false;\n\n        function createSelected(item) {\n          if (item.selected) {\n            that.createOption(item, true);\n          } else if (item.children && item.children.length) {\n            item.children.map(createSelected);\n          }\n        } // create selected option elements to ensure select value is correct\n\n\n        if (this.options.source.data && init) {\n          selectedOptions.map(createSelected);\n          element.appendChild(this.selectpicker.main.optionQueue);\n          if (placeholderSelected) placeholderSelected = element.selectedIndex === 0;\n        }\n\n        button.classList.toggle('bs-placeholder', that.multiple ? !selectedCount : !selectedValues && selectedValues !== 0);\n\n        if (!that.multiple && selectedOptions.length === 1) {\n          that.selectpicker.view.displayedValue = selectedValues;\n        }\n\n        if (this.options.selectedTextFormat === 'static') {\n          titleFragment = generateOption.text.call(this, {\n            text: this.options.placeholder\n          }, true);\n        } else {\n          showCount = this.multiple && this.options.selectedTextFormat.indexOf('count') !== -1 && selectedCount > 0; // determine if the number of selected options will be shown (showCount === true)\n\n          if (showCount) {\n            countMax = this.options.selectedTextFormat.split('>');\n            showCount = countMax.length > 1 && selectedCount > countMax[1] || countMax.length === 1 && selectedCount >= 2;\n          } // only loop through all selected options if the count won't be shown\n\n\n          if (showCount === false) {\n            if (!placeholderSelected) {\n              for (var selectedIndex = 0; selectedIndex < selectedCount; selectedIndex++) {\n                if (selectedIndex < 50) {\n                  var option = selectedOptions[selectedIndex],\n                      titleOptions = {};\n\n                  if (option) {\n                    if (this.multiple && selectedIndex > 0) {\n                      titleFragment.appendChild(multipleSeparator.cloneNode(false));\n                    }\n\n                    if (option.title) {\n                      titleOptions.text = option.title;\n                    } else if (option.content && that.options.showContent) {\n                      titleOptions.content = option.content.toString();\n                      hasContent = true;\n                    } else {\n                      if (that.options.showIcon) {\n                        titleOptions.icon = option.icon;\n                      }\n\n                      if (that.options.showSubtext && !that.multiple && option.subtext) titleOptions.subtext = ' ' + option.subtext;\n                      titleOptions.text = option.text.trim();\n                    }\n\n                    titleFragment.appendChild(generateOption.text.call(this, titleOptions, true));\n                  }\n                } else {\n                  break;\n                }\n              } // add ellipsis\n\n\n              if (selectedCount > 49) {\n                titleFragment.appendChild(document.createTextNode('...'));\n              }\n            }\n          } else {\n            var optionSelector = ':not([hidden]):not([data-hidden=\"true\"]):not([data-divider=\"true\"]):not([style*=\"display: none\"])';\n            if (this.options.hideDisabled) optionSelector += ':not(:disabled)'; // If this is a multiselect, and selectedTextFormat is count, then show 1 of 2 selected, etc.\n\n            var totalCount = this.$element[0].querySelectorAll('select > option' + optionSelector + ', optgroup' + optionSelector + ' option' + optionSelector).length,\n                tr8nText = typeof this.options.countSelectedText === 'function' ? this.options.countSelectedText(selectedCount, totalCount) : this.options.countSelectedText;\n            titleFragment = generateOption.text.call(this, {\n              text: tr8nText.replace('{0}', selectedCount.toString()).replace('{1}', totalCount.toString())\n            }, true);\n          }\n        } // If the select doesn't have a title, then use the default, or if nothing is set at all, use noneSelectedText\n\n\n        if (!titleFragment.childNodes.length) {\n          titleFragment = generateOption.text.call(this, {\n            text: this.options.placeholder ? this.options.placeholder : this.options.noneSelectedText\n          }, true);\n        } // if the select has a title, apply it to the button, and if not, apply titleFragment text\n        // strip all HTML tags and trim the result, then unescape any escaped tags\n\n\n        button.title = titleFragment.textContent.replace(/<[^>]*>?/g, '').trim();\n\n        if (this.options.sanitize && hasContent) {\n          sanitizeHtml([titleFragment], that.options.whiteList, that.options.sanitizeFn);\n        }\n\n        buttonInner.innerHTML = '';\n        buttonInner.appendChild(titleFragment);\n\n        if (version.major < 4 && this.$newElement[0].classList.contains('bs3-has-addon')) {\n          var filterExpand = button.querySelector('.filter-expand'),\n              clone = buttonInner.cloneNode(true);\n          clone.className = 'filter-expand';\n\n          if (filterExpand) {\n            button.replaceChild(clone, filterExpand);\n          } else {\n            button.appendChild(clone);\n          }\n        }\n\n        this.$element.trigger('rendered' + EVENT_KEY);\n      },\n\n      /**\n       * @param [style]\n       * @param [status]\n       */\n      setStyle: function (newStyle, status) {\n        var button = this.$button[0],\n            newElement = this.$newElement[0],\n            style = this.options.style.trim(),\n            buttonClass;\n\n        if (this.$element.attr('class')) {\n          this.$newElement.addClass(this.$element.attr('class').replace(/selectpicker|mobile-device|bs-select-hidden|validate\\[.*\\]/gi, ''));\n        }\n\n        if (version.major < 4) {\n          newElement.classList.add('bs3');\n\n          if (newElement.parentNode.classList && newElement.parentNode.classList.contains('input-group') && (newElement.previousElementSibling || newElement.nextElementSibling) && (newElement.previousElementSibling || newElement.nextElementSibling).classList.contains('input-group-addon')) {\n            newElement.classList.add('bs3-has-addon');\n          }\n        }\n\n        if (newStyle) {\n          buttonClass = newStyle.trim();\n        } else {\n          buttonClass = style;\n        }\n\n        if (status == 'add') {\n          if (buttonClass) button.classList.add.apply(button.classList, buttonClass.split(' '));\n        } else if (status == 'remove') {\n          if (buttonClass) button.classList.remove.apply(button.classList, buttonClass.split(' '));\n        } else {\n          if (style) button.classList.remove.apply(button.classList, style.split(' '));\n          if (buttonClass) button.classList.add.apply(button.classList, buttonClass.split(' '));\n        }\n      },\n      liHeight: function (refresh) {\n        if (!refresh && (this.options.size === false || Object.keys(this.sizeInfo).length)) return;\n        var newElement = elementTemplates.div.cloneNode(false),\n            menu = elementTemplates.div.cloneNode(false),\n            menuInner = elementTemplates.div.cloneNode(false),\n            menuInnerInner = document.createElement('ul'),\n            divider = elementTemplates.li.cloneNode(false),\n            dropdownHeader = elementTemplates.li.cloneNode(false),\n            li,\n            a = elementTemplates.a.cloneNode(false),\n            text = elementTemplates.span.cloneNode(false),\n            header = this.options.header && this.$menu.find('.' + classNames.POPOVERHEADER).length > 0 ? this.$menu.find('.' + classNames.POPOVERHEADER)[0].cloneNode(true) : null,\n            search = this.options.liveSearch ? elementTemplates.div.cloneNode(false) : null,\n            actions = this.options.actionsBox && this.multiple && this.$menu.find('.bs-actionsbox').length > 0 ? this.$menu.find('.bs-actionsbox')[0].cloneNode(true) : null,\n            doneButton = this.options.doneButton && this.multiple && this.$menu.find('.bs-donebutton').length > 0 ? this.$menu.find('.bs-donebutton')[0].cloneNode(true) : null,\n            firstOption = this.$element[0].options[0];\n        this.sizeInfo.selectWidth = this.$newElement[0].offsetWidth;\n        text.className = 'text';\n        a.className = 'dropdown-item ' + (firstOption ? firstOption.className : '');\n        newElement.className = this.$menu[0].parentNode.className + ' ' + classNames.SHOW;\n        newElement.style.width = 0; // ensure button width doesn't affect natural width of menu when calculating\n\n        if (this.options.width === 'auto') menu.style.minWidth = 0;\n        menu.className = classNames.MENU + ' ' + classNames.SHOW;\n        menuInner.className = 'inner ' + classNames.SHOW;\n        menuInnerInner.className = classNames.MENU + ' inner ' + (version.major >= '4' ? classNames.SHOW : '');\n        divider.className = classNames.DIVIDER;\n        dropdownHeader.className = 'dropdown-header';\n        text.appendChild(document.createTextNode('\\u200b'));\n\n        if (this.selectpicker.current.data.length) {\n          for (var i = 0; i < this.selectpicker.current.data.length; i++) {\n            var data = this.selectpicker.current.data[i];\n\n            if (data.type === 'option' && $(data.element.firstChild).css('display') !== 'none') {\n              li = data.element;\n              break;\n            }\n          }\n        } else {\n          li = elementTemplates.li.cloneNode(false);\n          a.appendChild(text);\n          li.appendChild(a);\n        }\n\n        dropdownHeader.appendChild(text.cloneNode(true));\n\n        if (this.selectpicker.view.widestOption) {\n          menuInnerInner.appendChild(this.selectpicker.view.widestOption.cloneNode(true));\n        }\n\n        menuInnerInner.appendChild(li);\n        menuInnerInner.appendChild(divider);\n        menuInnerInner.appendChild(dropdownHeader);\n        if (header) menu.appendChild(header);\n\n        if (search) {\n          var input = document.createElement('input');\n          search.className = 'bs-searchbox';\n          input.className = 'form-control';\n          search.appendChild(input);\n          menu.appendChild(search);\n        }\n\n        if (actions) menu.appendChild(actions);\n        menuInner.appendChild(menuInnerInner);\n        menu.appendChild(menuInner);\n        if (doneButton) menu.appendChild(doneButton);\n        newElement.appendChild(menu);\n        document.body.appendChild(newElement);\n        var liHeight = li.offsetHeight,\n            dropdownHeaderHeight = dropdownHeader ? dropdownHeader.offsetHeight : 0,\n            headerHeight = header ? header.offsetHeight : 0,\n            searchHeight = search ? search.offsetHeight : 0,\n            actionsHeight = actions ? actions.offsetHeight : 0,\n            doneButtonHeight = doneButton ? doneButton.offsetHeight : 0,\n            dividerHeight = $(divider).outerHeight(true),\n            menuStyle = window.getComputedStyle(menu),\n            menuWidth = menu.offsetWidth,\n            menuPadding = {\n          vert: toInteger(menuStyle.paddingTop) + toInteger(menuStyle.paddingBottom) + toInteger(menuStyle.borderTopWidth) + toInteger(menuStyle.borderBottomWidth),\n          horiz: toInteger(menuStyle.paddingLeft) + toInteger(menuStyle.paddingRight) + toInteger(menuStyle.borderLeftWidth) + toInteger(menuStyle.borderRightWidth)\n        },\n            menuExtras = {\n          vert: menuPadding.vert + toInteger(menuStyle.marginTop) + toInteger(menuStyle.marginBottom) + 2,\n          horiz: menuPadding.horiz + toInteger(menuStyle.marginLeft) + toInteger(menuStyle.marginRight) + 2\n        },\n            scrollBarWidth;\n        menuInner.style.overflowY = 'scroll';\n        scrollBarWidth = menu.offsetWidth - menuWidth;\n        document.body.removeChild(newElement);\n        this.sizeInfo.liHeight = liHeight;\n        this.sizeInfo.dropdownHeaderHeight = dropdownHeaderHeight;\n        this.sizeInfo.headerHeight = headerHeight;\n        this.sizeInfo.searchHeight = searchHeight;\n        this.sizeInfo.actionsHeight = actionsHeight;\n        this.sizeInfo.doneButtonHeight = doneButtonHeight;\n        this.sizeInfo.dividerHeight = dividerHeight;\n        this.sizeInfo.menuPadding = menuPadding;\n        this.sizeInfo.menuExtras = menuExtras;\n        this.sizeInfo.menuWidth = menuWidth;\n        this.sizeInfo.menuInnerInnerWidth = menuWidth - menuPadding.horiz;\n        this.sizeInfo.totalMenuWidth = this.sizeInfo.menuWidth;\n        this.sizeInfo.scrollBarWidth = scrollBarWidth;\n        this.sizeInfo.selectHeight = this.$newElement[0].offsetHeight;\n        this.setPositionData();\n      },\n      getSelectPosition: function () {\n        var that = this,\n            $window = $(window),\n            pos = that.$newElement.offset(),\n            $container = $(that.options.container),\n            containerPos;\n\n        if (that.options.container && $container.length && !$container.is('body')) {\n          containerPos = $container.offset();\n          containerPos.top += parseInt($container.css('borderTopWidth'));\n          containerPos.left += parseInt($container.css('borderLeftWidth'));\n        } else {\n          containerPos = {\n            top: 0,\n            left: 0\n          };\n        }\n\n        var winPad = that.options.windowPadding;\n        this.sizeInfo.selectOffsetTop = pos.top - containerPos.top - $window.scrollTop();\n        this.sizeInfo.selectOffsetBot = $window.height() - this.sizeInfo.selectOffsetTop - this.sizeInfo.selectHeight - containerPos.top - winPad[2];\n        this.sizeInfo.selectOffsetLeft = pos.left - containerPos.left - $window.scrollLeft();\n        this.sizeInfo.selectOffsetRight = $window.width() - this.sizeInfo.selectOffsetLeft - this.sizeInfo.selectWidth - containerPos.left - winPad[1];\n        this.sizeInfo.selectOffsetTop -= winPad[0];\n        this.sizeInfo.selectOffsetLeft -= winPad[3];\n      },\n      setMenuSize: function (isAuto) {\n        this.getSelectPosition();\n\n        var selectWidth = this.sizeInfo.selectWidth,\n            liHeight = this.sizeInfo.liHeight,\n            headerHeight = this.sizeInfo.headerHeight,\n            searchHeight = this.sizeInfo.searchHeight,\n            actionsHeight = this.sizeInfo.actionsHeight,\n            doneButtonHeight = this.sizeInfo.doneButtonHeight,\n            divHeight = this.sizeInfo.dividerHeight,\n            menuPadding = this.sizeInfo.menuPadding,\n            menuInnerHeight,\n            menuHeight,\n            divLength = 0,\n            minHeight,\n            _minHeight,\n            maxHeight,\n            menuInnerMinHeight,\n            estimate,\n            isDropup;\n\n        if (this.options.dropupAuto) {\n          // Get the estimated height of the menu without scrollbars.\n          // This is useful for smaller menus, where there might be plenty of room\n          // below the button without setting dropup, but we can't know\n          // the exact height of the menu until createView is called later\n          estimate = liHeight * this.selectpicker.current.data.length + menuPadding.vert;\n          isDropup = this.sizeInfo.selectOffsetTop - this.sizeInfo.selectOffsetBot > this.sizeInfo.menuExtras.vert && estimate + this.sizeInfo.menuExtras.vert + 50 > this.sizeInfo.selectOffsetBot; // ensure dropup doesn't change while searching (so menu doesn't bounce back and forth)\n\n          if (this.selectpicker.isSearching === true) {\n            isDropup = this.selectpicker.dropup;\n          }\n\n          this.$newElement.toggleClass(classNames.DROPUP, isDropup);\n          this.selectpicker.dropup = isDropup;\n        }\n\n        if (this.options.size === 'auto') {\n          _minHeight = this.selectpicker.current.data.length > 3 ? this.sizeInfo.liHeight * 3 + this.sizeInfo.menuExtras.vert - 2 : 0;\n          menuHeight = this.sizeInfo.selectOffsetBot - this.sizeInfo.menuExtras.vert;\n          minHeight = _minHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight;\n          menuInnerMinHeight = Math.max(_minHeight - menuPadding.vert, 0);\n\n          if (this.$newElement.hasClass(classNames.DROPUP)) {\n            menuHeight = this.sizeInfo.selectOffsetTop - this.sizeInfo.menuExtras.vert;\n          }\n\n          maxHeight = menuHeight;\n          menuInnerHeight = menuHeight - headerHeight - searchHeight - actionsHeight - doneButtonHeight - menuPadding.vert;\n        } else if (this.options.size && this.options.size != 'auto' && this.selectpicker.current.elements.length > this.options.size) {\n          for (var i = 0; i < this.options.size; i++) {\n            if (this.selectpicker.current.data[i].type === 'divider') divLength++;\n          }\n\n          menuHeight = liHeight * this.options.size + divLength * divHeight + menuPadding.vert;\n          menuInnerHeight = menuHeight - menuPadding.vert;\n          maxHeight = menuHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight;\n          minHeight = menuInnerMinHeight = '';\n        }\n\n        this.$menu.css({\n          'max-height': maxHeight + 'px',\n          'overflow': 'hidden',\n          'min-height': minHeight + 'px'\n        });\n        this.$menuInner.css({\n          'max-height': menuInnerHeight + 'px',\n          'overflow': 'hidden auto',\n          'min-height': menuInnerMinHeight + 'px'\n        }); // ensure menuInnerHeight is always a positive number to prevent issues calculating chunkSize in createView\n\n        this.sizeInfo.menuInnerHeight = Math.max(menuInnerHeight, 1);\n\n        if (this.selectpicker.current.data.length && this.selectpicker.current.data[this.selectpicker.current.data.length - 1].position > this.sizeInfo.menuInnerHeight) {\n          this.sizeInfo.hasScrollBar = true;\n          this.sizeInfo.totalMenuWidth = this.sizeInfo.menuWidth + this.sizeInfo.scrollBarWidth;\n        }\n\n        if (this.options.dropdownAlignRight === 'auto') {\n          this.$menu.toggleClass(classNames.MENURIGHT, this.sizeInfo.selectOffsetLeft > this.sizeInfo.selectOffsetRight && this.sizeInfo.selectOffsetRight < this.sizeInfo.totalMenuWidth - selectWidth);\n        }\n\n        if (this.dropdown && this.dropdown._popper) this.dropdown._popper.update();\n      },\n      setSize: function (refresh) {\n        this.liHeight(refresh);\n        if (this.options.header) this.$menu.css('padding-top', 0);\n\n        if (this.options.size !== false) {\n          var that = this,\n              $window = $(window);\n          this.setMenuSize();\n\n          if (this.options.liveSearch) {\n            this.$searchbox.off('input.setMenuSize propertychange.setMenuSize').on('input.setMenuSize propertychange.setMenuSize', function () {\n              return that.setMenuSize();\n            });\n          }\n\n          if (this.options.size === 'auto') {\n            $window.off('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize').on('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize', function () {\n              return that.setMenuSize();\n            });\n          } else if (this.options.size && this.options.size != 'auto' && this.selectpicker.current.elements.length > this.options.size) {\n            $window.off('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize');\n          }\n        }\n\n        this.createView(false, true, refresh);\n      },\n      setWidth: function () {\n        var that = this;\n\n        if (this.options.width === 'auto') {\n          requestAnimationFrame(function () {\n            that.$menu.css('min-width', '0');\n            that.$element.on('loaded' + EVENT_KEY, function () {\n              that.liHeight();\n              that.setMenuSize(); // Get correct width if element is hidden\n\n              var $selectClone = that.$newElement.clone().appendTo('body'),\n                  btnWidth = $selectClone.css('width', 'auto').children('button').outerWidth();\n              $selectClone.remove(); // Set width to whatever's larger, button title or longest option\n\n              that.sizeInfo.selectWidth = Math.max(that.sizeInfo.totalMenuWidth, btnWidth);\n              that.$newElement.css('width', that.sizeInfo.selectWidth + 'px');\n            });\n          });\n        } else if (this.options.width === 'fit') {\n          // Remove inline min-width so width can be changed from 'auto'\n          this.$menu.css('min-width', '');\n          this.$newElement.css('width', '').addClass('fit-width');\n        } else if (this.options.width) {\n          // Remove inline min-width so width can be changed from 'auto'\n          this.$menu.css('min-width', '');\n          this.$newElement.css('width', this.options.width);\n        } else {\n          // Remove inline min-width/width so width can be changed\n          this.$menu.css('min-width', '');\n          this.$newElement.css('width', '');\n        } // Remove fit-width class if width is changed programmatically\n\n\n        if (this.$newElement.hasClass('fit-width') && this.options.width !== 'fit') {\n          this.$newElement[0].classList.remove('fit-width');\n        }\n      },\n      selectPosition: function () {\n        this.$bsContainer = $('<div class=\"bs-container\" />');\n\n        var that = this,\n            $container = $(this.options.container),\n            pos,\n            containerPos,\n            actualHeight,\n            getPlacement = function ($element) {\n          var containerPosition = {},\n              // fall back to dropdown's default display setting if display is not manually set\n          display = that.options.display || ( // Bootstrap 3 doesn't have $.fn.dropdown.Constructor.Default\n          $.fn.dropdown.Constructor.Default ? $.fn.dropdown.Constructor.Default.display : false);\n          that.$bsContainer.addClass($element.attr('class').replace(/form-control|fit-width/gi, '')).toggleClass(classNames.DROPUP, $element.hasClass(classNames.DROPUP));\n          pos = $element.offset();\n\n          if (!$container.is('body')) {\n            containerPos = $container.offset();\n            containerPos.top += parseInt($container.css('borderTopWidth')) - $container.scrollTop();\n            containerPos.left += parseInt($container.css('borderLeftWidth')) - $container.scrollLeft();\n          } else {\n            containerPos = {\n              top: 0,\n              left: 0\n            };\n          }\n\n          actualHeight = $element.hasClass(classNames.DROPUP) ? 0 : $element[0].offsetHeight; // Bootstrap 4+ uses Popper for menu positioning\n\n          if (version.major < 4 || display === 'static') {\n            containerPosition.top = pos.top - containerPos.top + actualHeight;\n            containerPosition.left = pos.left - containerPos.left;\n          }\n\n          containerPosition.width = $element[0].offsetWidth;\n          that.$bsContainer.css(containerPosition);\n        };\n\n        this.$button.on('click.bs.dropdown.data-api', function () {\n          if (that.isDisabled()) {\n            return;\n          }\n\n          getPlacement(that.$newElement);\n          that.$bsContainer.appendTo(that.options.container).toggleClass(classNames.SHOW, !that.$button.hasClass(classNames.SHOW)).append(that.$menu);\n        });\n        $(window).off('resize' + EVENT_KEY + '.' + this.selectId + ' scroll' + EVENT_KEY + '.' + this.selectId).on('resize' + EVENT_KEY + '.' + this.selectId + ' scroll' + EVENT_KEY + '.' + this.selectId, function () {\n          var isActive = that.$newElement.hasClass(classNames.SHOW);\n          if (isActive) getPlacement(that.$newElement);\n        });\n        this.$element.on('hide' + EVENT_KEY, function () {\n          that.$menu.data('height', that.$menu.height());\n          that.$bsContainer.detach();\n        });\n      },\n      createOption: function (data, init) {\n        var optionData = !data.option ? data : data.option;\n\n        if (optionData && optionData.nodeType !== 1) {\n          var option = (init ? elementTemplates.selectedOption : elementTemplates.option).cloneNode(true);\n          if (optionData.value !== undefined) option.value = optionData.value;\n          option.textContent = optionData.text;\n          option.selected = true;\n\n          if (optionData.liIndex !== undefined) {\n            option.liIndex = optionData.liIndex;\n          } else if (!init) {\n            option.liIndex = data.index;\n          }\n\n          data.option = option;\n          this.selectpicker.main.optionQueue.appendChild(option);\n        }\n      },\n      setOptionStatus: function (selectedOnly) {\n        var that = this;\n        that.noScroll = false;\n\n        if (that.selectpicker.view.visibleElements && that.selectpicker.view.visibleElements.length) {\n          for (var i = 0; i < that.selectpicker.view.visibleElements.length; i++) {\n            var liData = that.selectpicker.current.data[i + that.selectpicker.view.position0],\n                option = liData.option;\n\n            if (option) {\n              if (selectedOnly !== true) {\n                that.setDisabled(liData);\n              }\n\n              that.setSelected(liData);\n            }\n          } // append optionQueue (documentFragment with option elements for select options)\n\n\n          if (this.options.source.data) this.$element[0].appendChild(this.selectpicker.main.optionQueue);\n        }\n      },\n\n      /**\n       * @param {Object} liData - the option object that is being changed\n       * @param {boolean} selected - true if the option is being selected, false if being deselected\n       */\n      setSelected: function (liData, selected) {\n        selected = selected === undefined ? liData.selected : selected;\n        var li = liData.element,\n            activeElementIsSet = this.activeElement !== undefined,\n            thisIsActive = this.activeElement === li,\n            prevActive,\n            a,\n            // if current option is already active\n        // OR\n        // if the current option is being selected, it's NOT multiple, and\n        // activeElement is undefined:\n        //  - when the menu is first being opened, OR\n        //  - after a search has been performed, OR\n        //  - when retainActive is false when selecting a new option (i.e. index of the newly selected option is not the same as the current activeElement)\n        keepActive = thisIsActive || selected && !this.multiple && !activeElementIsSet;\n        if (!li) return;\n\n        if (selected !== undefined) {\n          liData.selected = selected;\n          if (liData.option) liData.option.selected = selected;\n        }\n\n        if (selected && this.options.source.data) {\n          this.createOption(liData, false);\n        }\n\n        a = li.firstChild;\n\n        if (selected) {\n          this.selectedElement = li;\n        }\n\n        li.classList.toggle('selected', selected);\n\n        if (keepActive) {\n          this.focusItem(li, liData);\n          this.selectpicker.view.currentActive = li;\n          this.activeElement = li;\n        } else {\n          this.defocusItem(li);\n        }\n\n        if (a) {\n          a.classList.toggle('selected', selected);\n\n          if (selected) {\n            a.setAttribute('aria-selected', true);\n          } else {\n            if (this.multiple) {\n              a.setAttribute('aria-selected', false);\n            } else {\n              a.removeAttribute('aria-selected');\n            }\n          }\n        }\n\n        if (!keepActive && !activeElementIsSet && selected && this.prevActiveElement !== undefined) {\n          prevActive = this.prevActiveElement;\n          this.defocusItem(prevActive);\n        }\n      },\n\n      /**\n       * @param {number} index - the index of the option that is being disabled\n       * @param {boolean} disabled - true if the option is being disabled, false if being enabled\n       */\n      setDisabled: function (liData) {\n        var disabled = liData.disabled,\n            li = liData.element,\n            a;\n        if (!li) return;\n        a = li.firstChild;\n        li.classList.toggle(classNames.DISABLED, disabled);\n\n        if (a) {\n          if (version.major >= '4') a.classList.toggle(classNames.DISABLED, disabled);\n\n          if (disabled) {\n            a.setAttribute('aria-disabled', disabled);\n            a.setAttribute('tabindex', -1);\n          } else {\n            a.removeAttribute('aria-disabled');\n            a.setAttribute('tabindex', 0);\n          }\n        }\n      },\n      isDisabled: function () {\n        return this.$element[0].disabled;\n      },\n      checkDisabled: function () {\n        if (this.isDisabled()) {\n          this.$newElement[0].classList.add(classNames.DISABLED);\n          this.$button.addClass(classNames.DISABLED).attr('aria-disabled', true);\n        } else {\n          if (this.$button[0].classList.contains(classNames.DISABLED)) {\n            this.$newElement[0].classList.remove(classNames.DISABLED);\n            this.$button.removeClass(classNames.DISABLED).attr('aria-disabled', false);\n          }\n        }\n      },\n      clickListener: function () {\n        var that = this,\n            $document = $(document);\n        $document.data('spaceSelect', false);\n        this.$button.on('keyup', function (e) {\n          if (/(32)/.test(e.keyCode.toString(10)) && $document.data('spaceSelect')) {\n            e.preventDefault();\n            $document.data('spaceSelect', false);\n          }\n        });\n        this.$newElement.on('show.bs.dropdown', function () {\n          if (!that.dropdown && version.major === '4') {\n            that.dropdown = that.$button.data('bs.dropdown');\n            that.dropdown._menu = that.$menu[0];\n          }\n        });\n\n        function clearSelection(e) {\n          if (that.multiple) {\n            that.deselectAll();\n          } else {\n            var element = that.$element[0],\n                prevValue = element.value,\n                prevIndex = element.selectedIndex,\n                prevOption = element.options[prevIndex],\n                prevData = prevOption ? that.selectpicker.main.data[prevOption.liIndex] : false;\n\n            if (prevData) {\n              that.setSelected(prevData, false);\n            }\n\n            element.selectedIndex = 0;\n            changedArguments = [prevIndex, false, prevValue];\n            that.$element.triggerNative('change');\n          } // remove selected styling if menu is open\n\n\n          if (that.$newElement.hasClass(classNames.SHOW)) {\n            if (that.options.liveSearch) {\n              that.$searchbox.trigger('focus');\n            }\n\n            that.createView(false);\n          }\n        }\n\n        this.$button.on('click.bs.dropdown.data-api', function (e) {\n          if (that.options.allowClear) {\n            var target = e.target,\n                clearButton = that.$clearButton[0]; // IE doesn't support event listeners on child elements of buttons\n\n            if (/MSIE|Trident/.test(window.navigator.userAgent)) {\n              target = document.elementFromPoint(e.clientX, e.clientY);\n            }\n\n            if (target === clearButton || target.parentElement === clearButton) {\n              e.stopImmediatePropagation();\n              clearSelection(e);\n            }\n          }\n\n          if (!that.$newElement.hasClass(classNames.SHOW)) {\n            that.setSize();\n          }\n        });\n\n        function setFocus() {\n          if (that.options.liveSearch) {\n            that.$searchbox.trigger('focus');\n          } else {\n            that.$menuInner.trigger('focus');\n          }\n        }\n\n        function checkPopperExists() {\n          if (that.dropdown && that.dropdown._popper && that.dropdown._popper.state) {\n            setFocus();\n          } else {\n            requestAnimationFrame(checkPopperExists);\n          }\n        }\n\n        this.$element.on('shown' + EVENT_KEY, function () {\n          if (that.$menuInner[0].scrollTop !== that.selectpicker.view.scrollTop) {\n            that.$menuInner[0].scrollTop = that.selectpicker.view.scrollTop;\n          }\n\n          if (version.major > 3) {\n            requestAnimationFrame(checkPopperExists);\n          } else {\n            setFocus();\n          }\n        }); // ensure posinset and setsize are correct before selecting an option via a click\n\n        this.$menuInner.on('mouseenter', 'li a', function (e) {\n          var hoverLi = this.parentElement,\n              position0 = that.isVirtual() ? that.selectpicker.view.position0 : 0,\n              index = Array.prototype.indexOf.call(hoverLi.parentElement.children, hoverLi),\n              hoverData = that.selectpicker.current.data[index + position0];\n          that.focusItem(hoverLi, hoverData, true);\n        });\n        this.$menuInner.on('click', 'li a', function (e, retainActive) {\n          var $this = $(this),\n              element = that.$element[0],\n              position0 = that.isVirtual() ? that.selectpicker.view.position0 : 0,\n              clickedData = that.selectpicker.current.data[$this.parent().index() + position0],\n              clickedElement = clickedData.element,\n              prevValue = getSelectValues.call(that),\n              prevIndex = element.selectedIndex,\n              prevOption = element.options[prevIndex],\n              prevData = prevOption ? that.selectpicker.main.data[prevOption.liIndex] : false,\n              triggerChange = true; // Don't close on multi choice menu\n\n          if (that.multiple && that.options.maxOptions !== 1) {\n            e.stopPropagation();\n          }\n\n          e.preventDefault(); // Don't run if the select is disabled\n\n          if (!that.isDisabled() && !$this.parent().hasClass(classNames.DISABLED)) {\n            var option = clickedData.option,\n                $option = $(option),\n                state = option.selected,\n                optgroupData = that.selectpicker.current.data.find(function (datum) {\n              return datum.optID === clickedData.optID && datum.type === 'optgroup-label';\n            }),\n                optgroup = optgroupData ? optgroupData.optgroup : undefined,\n                dataGetter = optgroup instanceof Element ? getOptionData.fromOption : getOptionData.fromDataSource,\n                optgroupOptions = optgroup && optgroup.children,\n                maxOptions = parseInt(that.options.maxOptions),\n                maxOptionsGrp = optgroup && parseInt(dataGetter(optgroup, 'maxOptions')) || false;\n            if (clickedElement === that.activeElement) retainActive = true;\n\n            if (!retainActive) {\n              that.prevActiveElement = that.activeElement;\n              that.activeElement = undefined;\n            }\n\n            if (!that.multiple || maxOptions === 1) {\n              // Deselect previous option if not multi select\n              if (prevData) that.setSelected(prevData, false);\n              that.setSelected(clickedData, true);\n            } else {\n              // Toggle the clicked option if multi select.\n              that.setSelected(clickedData, !state);\n              that.focusedParent.focus();\n\n              if (maxOptions !== false || maxOptionsGrp !== false) {\n                var maxReached = maxOptions < getSelectedOptions.call(that).length,\n                    selectedGroupOptions = 0;\n\n                if (optgroup && optgroup.children) {\n                  for (var i = 0; i < optgroup.children.length; i++) {\n                    if (optgroup.children[i].selected) selectedGroupOptions++;\n                  }\n                }\n\n                var maxReachedGrp = maxOptionsGrp < selectedGroupOptions;\n\n                if (maxOptions && maxReached || maxOptionsGrp && maxReachedGrp) {\n                  if (maxOptions && maxOptions === 1) {\n                    element.selectedIndex = -1;\n                    that.setOptionStatus(true);\n                  } else if (maxOptionsGrp && maxOptionsGrp === 1) {\n                    for (var i = 0; i < optgroupOptions.length; i++) {\n                      var _option = optgroupOptions[i];\n                      that.setSelected(that.selectpicker.current.data[_option.liIndex], false);\n                    }\n\n                    that.setSelected(clickedData, true);\n                  } else {\n                    var maxOptionsText = typeof that.options.maxOptionsText === 'string' ? [that.options.maxOptionsText, that.options.maxOptionsText] : that.options.maxOptionsText,\n                        maxOptionsArr = typeof maxOptionsText === 'function' ? maxOptionsText(maxOptions, maxOptionsGrp) : maxOptionsText,\n                        maxTxt = maxOptionsArr[0].replace('{n}', maxOptions),\n                        maxTxtGrp = maxOptionsArr[1].replace('{n}', maxOptionsGrp),\n                        $notify = $('<div class=\"notify\"></div>'); // If {var} is set in array, replace it\n\n                    /** @deprecated */\n\n                    if (maxOptionsArr[2]) {\n                      maxTxt = maxTxt.replace('{var}', maxOptionsArr[2][maxOptions > 1 ? 0 : 1]);\n                      maxTxtGrp = maxTxtGrp.replace('{var}', maxOptionsArr[2][maxOptionsGrp > 1 ? 0 : 1]);\n                    }\n\n                    that.$menu.append($notify);\n\n                    if (maxOptions && maxReached) {\n                      $notify.append($('<div>' + maxTxt + '</div>'));\n                      triggerChange = false;\n                      that.$element.trigger('maxReached' + EVENT_KEY);\n                    }\n\n                    if (maxOptionsGrp && maxReachedGrp) {\n                      $notify.append($('<div>' + maxTxtGrp + '</div>'));\n                      triggerChange = false;\n                      that.$element.trigger('maxReachedGrp' + EVENT_KEY);\n                    }\n\n                    setTimeout(function () {\n                      that.setSelected(clickedData, false);\n                    }, 10);\n                    $notify[0].classList.add('fadeOut');\n                    setTimeout(function () {\n                      $notify.remove();\n                    }, 1050);\n                  }\n                }\n              }\n            }\n\n            if (that.options.source.data) that.$element[0].appendChild(that.selectpicker.main.optionQueue);\n\n            if (!that.multiple || that.multiple && that.options.maxOptions === 1) {\n              that.$button.trigger('focus');\n            } else if (that.options.liveSearch) {\n              that.$searchbox.trigger('focus');\n            } // Trigger select 'change'\n\n\n            if (triggerChange) {\n              if (that.multiple || prevIndex !== element.selectedIndex) {\n                // $option.prop('selected') is current option state (selected/unselected). prevValue is the value of the select prior to being changed.\n                changedArguments = [option.index, $option.prop('selected'), prevValue];\n                that.$element.triggerNative('change');\n              }\n            }\n          }\n        });\n        this.$menu.on('click', 'li.' + classNames.DISABLED + ' a, .' + classNames.POPOVERHEADER + ', .' + classNames.POPOVERHEADER + ' :not(.close)', function (e) {\n          if (e.currentTarget == this) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (that.options.liveSearch && !$(e.target).hasClass('close')) {\n              that.$searchbox.trigger('focus');\n            } else {\n              that.$button.trigger('focus');\n            }\n          }\n        });\n        this.$menuInner.on('click', '.divider, .dropdown-header', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n\n          if (that.options.liveSearch) {\n            that.$searchbox.trigger('focus');\n          } else {\n            that.$button.trigger('focus');\n          }\n        });\n        this.$menu.on('click', '.' + classNames.POPOVERHEADER + ' .close', function () {\n          that.$button.trigger('click');\n        });\n        this.$searchbox.on('click', function (e) {\n          e.stopPropagation();\n        });\n        this.$menu.on('click', '.actions-btn', function (e) {\n          if (that.options.liveSearch) {\n            that.$searchbox.trigger('focus');\n          } else {\n            that.$button.trigger('focus');\n          }\n\n          e.preventDefault();\n          e.stopPropagation();\n\n          if ($(this).hasClass('bs-select-all')) {\n            that.selectAll();\n          } else {\n            that.deselectAll();\n          }\n        });\n        this.$button.on('focus' + EVENT_KEY, function (e) {\n          var tabindex = that.$element[0].getAttribute('tabindex'); // only change when button is actually focused\n\n          if (tabindex !== undefined && e.originalEvent && e.originalEvent.isTrusted) {\n            // apply select element's tabindex to ensure correct order is followed when tabbing to the next element\n            this.setAttribute('tabindex', tabindex); // set element's tabindex to -1 to allow for reverse tabbing\n\n            that.$element[0].setAttribute('tabindex', -1);\n            that.selectpicker.view.tabindex = tabindex;\n          }\n        }).on('blur' + EVENT_KEY, function (e) {\n          // revert everything to original tabindex\n          if (that.selectpicker.view.tabindex !== undefined && e.originalEvent && e.originalEvent.isTrusted) {\n            that.$element[0].setAttribute('tabindex', that.selectpicker.view.tabindex);\n            this.setAttribute('tabindex', -1);\n            that.selectpicker.view.tabindex = undefined;\n          }\n        });\n        this.$element.on('change' + EVENT_KEY, function () {\n          that.render();\n          that.$element.trigger('changed' + EVENT_KEY, changedArguments);\n          changedArguments = null;\n        }).on('focus' + EVENT_KEY, function () {\n          if (!that.options.mobile) that.$button[0].focus();\n        });\n      },\n      liveSearchListener: function () {\n        var that = this;\n        this.$button.on('click.bs.dropdown.data-api', function () {\n          if (!!that.$searchbox.val()) {\n            that.$searchbox.val('');\n            that.selectpicker.search.previousValue = undefined;\n          }\n        });\n        this.$searchbox.on('click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api', function (e) {\n          e.stopPropagation();\n        });\n        this.$searchbox.on('input propertychange', function () {\n          var searchValue = that.$searchbox[0].value;\n          that.selectpicker.search.elements = [];\n          that.selectpicker.search.data = [];\n\n          if (searchValue) {\n            that.selectpicker.search.previousValue = searchValue;\n\n            if (that.options.source.search) {\n              that.fetchData(function (builtData) {\n                that.render();\n                that.buildList(undefined, true);\n                that.noScroll = true;\n                that.$menuInner.scrollTop(0);\n                that.createView(true);\n                showNoResults.call(that, builtData, searchValue);\n              }, 'search', 0, searchValue);\n            } else {\n              var i,\n                  searchMatch = [],\n                  q = searchValue.toUpperCase(),\n                  cache = {},\n                  cacheArr = [],\n                  searchStyle = that._searchStyle(),\n                  normalizeSearch = that.options.liveSearchNormalize;\n\n              if (normalizeSearch) q = normalizeToBase(q);\n\n              for (var i = 0; i < that.selectpicker.main.data.length; i++) {\n                var li = that.selectpicker.main.data[i];\n\n                if (!cache[i]) {\n                  cache[i] = stringSearch(li, q, searchStyle, normalizeSearch);\n                }\n\n                if (cache[i] && li.headerIndex !== undefined && cacheArr.indexOf(li.headerIndex) === -1) {\n                  if (li.headerIndex > 0) {\n                    cache[li.headerIndex - 1] = true;\n                    cacheArr.push(li.headerIndex - 1);\n                  }\n\n                  cache[li.headerIndex] = true;\n                  cacheArr.push(li.headerIndex);\n                  cache[li.lastIndex + 1] = true;\n                }\n\n                if (cache[i] && li.type !== 'optgroup-label') cacheArr.push(i);\n              }\n\n              for (var i = 0, cacheLen = cacheArr.length; i < cacheLen; i++) {\n                var index = cacheArr[i],\n                    prevIndex = cacheArr[i - 1],\n                    li = that.selectpicker.main.data[index],\n                    liPrev = that.selectpicker.main.data[prevIndex];\n\n                if (li.type !== 'divider' || li.type === 'divider' && liPrev && liPrev.type !== 'divider' && cacheLen - 1 !== i) {\n                  that.selectpicker.search.data.push(li);\n                  searchMatch.push(that.selectpicker.main.elements[index]);\n                }\n              }\n\n              that.activeElement = undefined;\n              that.noScroll = true;\n              that.$menuInner.scrollTop(0);\n              that.selectpicker.search.elements = searchMatch;\n              that.createView(true);\n              showNoResults.call(that, searchMatch, searchValue);\n            }\n          } else if (that.selectpicker.search.previousValue) {\n            // for IE11 (#2402)\n            that.$menuInner.scrollTop(0);\n            that.createView(false);\n          }\n        });\n      },\n      _searchStyle: function () {\n        return this.options.liveSearchStyle || 'contains';\n      },\n      val: function (value) {\n        var element = this.$element[0];\n\n        if (typeof value !== 'undefined') {\n          var selectedOptions = getSelectedOptions.call(this),\n              prevValue = getSelectValues.call(this, selectedOptions);\n          changedArguments = [null, null, prevValue];\n          if (!Array.isArray(value)) value = [value];\n          value.map(String);\n\n          for (var i = 0; i < selectedOptions.length; i++) {\n            var item = selectedOptions[i];\n\n            if (item && value.indexOf(String(item.value)) === -1) {\n              this.setSelected(item, false);\n            }\n          } // only update selected value if it matches an existing option\n\n\n          this.selectpicker.main.data.filter(function (item) {\n            if (value.indexOf(String(item.value)) !== -1) {\n              this.setSelected(item, true);\n              return true;\n            }\n\n            return false;\n          }, this);\n          if (this.options.source.data) element.appendChild(this.selectpicker.main.optionQueue);\n          this.$element.trigger('changed' + EVENT_KEY, changedArguments);\n\n          if (this.$newElement.hasClass(classNames.SHOW)) {\n            if (this.multiple) {\n              this.setOptionStatus(true);\n            } else {\n              var liSelectedIndex = (element.options[element.selectedIndex] || {}).liIndex;\n\n              if (typeof liSelectedIndex === 'number') {\n                this.setSelected(this.selectpicker.current.data[liSelectedIndex], true);\n              }\n            }\n          }\n\n          this.render();\n          changedArguments = null;\n          return this.$element;\n        } else {\n          return this.$element.val();\n        }\n      },\n      changeAll: function (status) {\n        if (!this.multiple) return;\n        if (typeof status === 'undefined') status = true;\n        var element = this.$element[0],\n            previousSelected = 0,\n            currentSelected = 0,\n            prevValue = getSelectValues.call(this);\n        element.classList.add('bs-select-hidden');\n\n        for (var i = 0, data = this.selectpicker.current.data, len = data.length; i < len; i++) {\n          var liData = data[i],\n              option = liData.option;\n\n          if (option && !liData.disabled && liData.type !== 'divider') {\n            if (liData.selected) previousSelected++;\n            option.selected = status;\n            liData.selected = status;\n            if (status === true) currentSelected++;\n          }\n        }\n\n        element.classList.remove('bs-select-hidden');\n        if (previousSelected === currentSelected) return;\n        this.setOptionStatus();\n        changedArguments = [null, null, prevValue];\n        this.$element.triggerNative('change');\n      },\n      selectAll: function () {\n        return this.changeAll(true);\n      },\n      deselectAll: function () {\n        return this.changeAll(false);\n      },\n      toggle: function (e, state) {\n        var isActive,\n            triggerClick = state === undefined;\n        e = e || window.event;\n        if (e) e.stopPropagation();\n\n        if (triggerClick === false) {\n          isActive = this.$newElement[0].classList.contains(classNames.SHOW);\n          triggerClick = state === true && isActive === false || state === false && isActive === true;\n        }\n\n        if (triggerClick) this.$button.trigger('click.bs.dropdown.data-api');\n      },\n      open: function (e) {\n        this.toggle(e, true);\n      },\n      close: function (e) {\n        this.toggle(e, false);\n      },\n      keydown: function (e) {\n        var $this = $(this),\n            isToggle = $this.hasClass('dropdown-toggle'),\n            $parent = isToggle ? $this.closest('.dropdown') : $this.closest(Selector.MENU),\n            that = $parent.data('this'),\n            $items = that.findLis(),\n            index,\n            isActive,\n            liActive,\n            activeLi,\n            offset,\n            updateScroll = false,\n            downOnTab = e.which === keyCodes.TAB && !isToggle && !that.options.selectOnTab,\n            isArrowKey = REGEXP_ARROW.test(e.which) || downOnTab,\n            scrollTop = that.$menuInner[0].scrollTop,\n            isVirtual = that.isVirtual(),\n            position0 = isVirtual === true ? that.selectpicker.view.position0 : 0; // do nothing if a function key is pressed\n\n        if (e.which >= 112 && e.which <= 123) return;\n        isActive = that.$menu.hasClass(classNames.SHOW);\n\n        if (!isActive && (isArrowKey || e.which >= 48 && e.which <= 57 || e.which >= 96 && e.which <= 105 || e.which >= 65 && e.which <= 90)) {\n          that.$button.trigger('click.bs.dropdown.data-api');\n\n          if (that.options.liveSearch) {\n            that.$searchbox.trigger('focus');\n            return;\n          }\n        }\n\n        if (e.which === keyCodes.ESCAPE && isActive) {\n          e.preventDefault();\n          that.$button.trigger('click.bs.dropdown.data-api').trigger('focus');\n        }\n\n        if (isArrowKey) {\n          // if up or down\n          if (!$items.length) return;\n          liActive = that.activeElement;\n          index = liActive ? Array.prototype.indexOf.call(liActive.parentElement.children, liActive) : -1;\n\n          if (index !== -1) {\n            that.defocusItem(liActive);\n          }\n\n          if (e.which === keyCodes.ARROW_UP) {\n            // up\n            if (index !== -1) index--;\n            if (index + position0 < 0) index += $items.length;\n\n            if (!that.selectpicker.view.canHighlight[index + position0]) {\n              index = that.selectpicker.view.canHighlight.slice(0, index + position0).lastIndexOf(true) - position0;\n              if (index === -1) index = $items.length - 1;\n            }\n          } else if (e.which === keyCodes.ARROW_DOWN || downOnTab) {\n            // down\n            index++;\n            if (index + position0 >= that.selectpicker.view.canHighlight.length) index = that.selectpicker.view.firstHighlightIndex;\n\n            if (!that.selectpicker.view.canHighlight[index + position0]) {\n              index = index + 1 + that.selectpicker.view.canHighlight.slice(index + position0 + 1).indexOf(true);\n            }\n          }\n\n          e.preventDefault();\n          var liActiveIndex = position0 + index;\n\n          if (e.which === keyCodes.ARROW_UP) {\n            // up\n            // scroll to bottom and highlight last option\n            if (position0 === 0 && index === $items.length - 1) {\n              that.$menuInner[0].scrollTop = that.$menuInner[0].scrollHeight;\n              liActiveIndex = that.selectpicker.current.elements.length - 1;\n            } else {\n              activeLi = that.selectpicker.current.data[liActiveIndex]; // could be undefined if no results exist\n\n              if (activeLi) {\n                offset = activeLi.position - activeLi.height;\n                updateScroll = offset < scrollTop;\n              }\n            }\n          } else if (e.which === keyCodes.ARROW_DOWN || downOnTab) {\n            // down\n            // scroll to top and highlight first option\n            if (index === that.selectpicker.view.firstHighlightIndex) {\n              that.$menuInner[0].scrollTop = 0;\n              liActiveIndex = that.selectpicker.view.firstHighlightIndex;\n            } else {\n              activeLi = that.selectpicker.current.data[liActiveIndex]; // could be undefined if no results exist\n\n              if (activeLi) {\n                offset = activeLi.position - that.sizeInfo.menuInnerHeight;\n                updateScroll = offset > scrollTop;\n              }\n            }\n          }\n\n          liActive = that.selectpicker.current.elements[liActiveIndex];\n          that.activeElement = (that.selectpicker.current.data[liActiveIndex] || {}).element;\n          that.focusItem(liActive);\n          that.selectpicker.view.currentActive = liActive;\n          if (updateScroll) that.$menuInner[0].scrollTop = offset;\n\n          if (that.options.liveSearch) {\n            that.$searchbox.trigger('focus');\n          } else {\n            $this.trigger('focus');\n          }\n        } else if (!$this.is('input') && !REGEXP_TAB_OR_ESCAPE.test(e.which) || e.which === keyCodes.SPACE && that.selectpicker.keydown.keyHistory) {\n          var searchMatch,\n              matches = [],\n              keyHistory;\n          e.preventDefault();\n          that.selectpicker.keydown.keyHistory += keyCodeMap[e.which];\n          if (that.selectpicker.keydown.resetKeyHistory.cancel) clearTimeout(that.selectpicker.keydown.resetKeyHistory.cancel);\n          that.selectpicker.keydown.resetKeyHistory.cancel = that.selectpicker.keydown.resetKeyHistory.start();\n          keyHistory = that.selectpicker.keydown.keyHistory; // if all letters are the same, set keyHistory to just the first character when searching\n\n          if (/^(.)\\1+$/.test(keyHistory)) {\n            keyHistory = keyHistory.charAt(0);\n          } // find matches\n\n\n          for (var i = 0; i < that.selectpicker.current.data.length; i++) {\n            var li = that.selectpicker.current.data[i],\n                hasMatch;\n            hasMatch = stringSearch(li, keyHistory, 'startsWith', true);\n\n            if (hasMatch && that.selectpicker.view.canHighlight[i]) {\n              matches.push(li.element);\n            }\n          }\n\n          if (matches.length) {\n            var matchIndex = 0;\n            $items.removeClass('active').find('a').removeClass('active'); // either only one key has been pressed or they are all the same key\n\n            if (keyHistory.length === 1) {\n              matchIndex = matches.indexOf(that.activeElement);\n\n              if (matchIndex === -1 || matchIndex === matches.length - 1) {\n                matchIndex = 0;\n              } else {\n                matchIndex++;\n              }\n            }\n\n            searchMatch = matches[matchIndex];\n            activeLi = that.selectpicker.main.data[searchMatch];\n\n            if (scrollTop - activeLi.position > 0) {\n              offset = activeLi.position - activeLi.height;\n              updateScroll = true;\n            } else {\n              offset = activeLi.position - that.sizeInfo.menuInnerHeight; // if the option is already visible at the current scroll position, just keep it the same\n\n              updateScroll = activeLi.position > scrollTop + that.sizeInfo.menuInnerHeight;\n            }\n\n            liActive = that.selectpicker.main.elements[searchMatch];\n            that.activeElement = liActive;\n            that.focusItem(liActive);\n            if (liActive) liActive.firstChild.focus();\n            if (updateScroll) that.$menuInner[0].scrollTop = offset;\n            $this.trigger('focus');\n          }\n        } // Select focused option if \"Enter\", \"Spacebar\" or \"Tab\" (when selectOnTab is true) are pressed inside the menu.\n\n\n        if (isActive && (e.which === keyCodes.SPACE && !that.selectpicker.keydown.keyHistory || e.which === keyCodes.ENTER || e.which === keyCodes.TAB && that.options.selectOnTab)) {\n          if (e.which !== keyCodes.SPACE) e.preventDefault();\n\n          if (!that.options.liveSearch || e.which !== keyCodes.SPACE) {\n            that.$menuInner.find('.active a').trigger('click', true); // retain active class\n\n            $this.trigger('focus');\n\n            if (!that.options.liveSearch) {\n              // Prevent screen from scrolling if the user hits the spacebar\n              e.preventDefault(); // Fixes spacebar selection of dropdown items in FF & IE\n\n              $(document).data('spaceSelect', true);\n            }\n          }\n        }\n      },\n      mobile: function () {\n        // ensure mobile is set to true if mobile function is called after init\n        this.options.mobile = true;\n        this.$element[0].classList.add('mobile-device');\n      },\n      refresh: function () {\n        var that = this; // update options if data attributes have been changed\n\n        var config = $.extend({}, this.options, getAttributesObject(this.$element), this.$element.data()); // in this order on refresh, as user may change attributes on select, and options object is not passed on refresh\n\n        this.options = config;\n\n        if (this.options.source.data) {\n          this.render();\n          this.buildList();\n        } else {\n          this.fetchData(function () {\n            that.render();\n            that.buildList();\n          });\n        }\n\n        this.checkDisabled();\n        this.setStyle();\n        this.setWidth();\n        this.setSize(true);\n        this.$element.trigger('refreshed' + EVENT_KEY);\n      },\n      hide: function () {\n        this.$newElement.hide();\n      },\n      show: function () {\n        this.$newElement.show();\n      },\n      remove: function () {\n        this.$newElement.remove();\n        this.$element.remove();\n      },\n      destroy: function () {\n        this.$newElement.before(this.$element).remove();\n\n        if (this.$bsContainer) {\n          this.$bsContainer.remove();\n        } else {\n          this.$menu.remove();\n        }\n\n        if (this.selectpicker.view.titleOption && this.selectpicker.view.titleOption.parentNode) {\n          this.selectpicker.view.titleOption.parentNode.removeChild(this.selectpicker.view.titleOption);\n        }\n\n        this.$element.off(EVENT_KEY).removeData('selectpicker').removeClass('bs-select-hidden selectpicker mobile-device');\n        $(window).off(EVENT_KEY + '.' + this.selectId);\n      }\n    }; // SELECTPICKER PLUGIN DEFINITION\n    // ==============================\n\n    function Plugin(option) {\n      // get the args of the outer function..\n      var args = arguments; // The arguments of the function are explicitly re-defined from the argument list, because the shift causes them\n      // to get lost/corrupted in android 2.3 and IE9 #715 #775\n\n      var _option = option;\n      [].shift.apply(args); // if the version was not set successfully\n\n      if (!version.success) {\n        // try to retreive it again\n        try {\n          version.full = (getVersion() || '').split(' ')[0].split('.');\n        } catch (err) {\n          // fall back to use BootstrapVersion if set\n          if (Selectpicker.BootstrapVersion) {\n            version.full = Selectpicker.BootstrapVersion.split(' ')[0].split('.');\n          } else {\n            version.full = [version.major, '0', '0'];\n            console.warn('There was an issue retrieving Bootstrap\\'s version. ' + 'Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. ' + 'If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.', err);\n          }\n        }\n\n        version.major = version.full[0];\n        version.success = true;\n      }\n\n      if (version.major >= '4') {\n        // some defaults need to be changed if using Bootstrap 4\n        // check to see if they have already been manually changed before forcing them to update\n        var toUpdate = [];\n        if (Selectpicker.DEFAULTS.style === classNames.BUTTONCLASS) toUpdate.push({\n          name: 'style',\n          className: 'BUTTONCLASS'\n        });\n        if (Selectpicker.DEFAULTS.iconBase === classNames.ICONBASE) toUpdate.push({\n          name: 'iconBase',\n          className: 'ICONBASE'\n        });\n        if (Selectpicker.DEFAULTS.tickIcon === classNames.TICKICON) toUpdate.push({\n          name: 'tickIcon',\n          className: 'TICKICON'\n        });\n        classNames.DIVIDER = 'dropdown-divider';\n        classNames.SHOW = 'show';\n        classNames.BUTTONCLASS = 'btn-light';\n        classNames.POPOVERHEADER = 'popover-header';\n        classNames.ICONBASE = '';\n        classNames.TICKICON = 'bs-ok-default';\n\n        for (var i = 0; i < toUpdate.length; i++) {\n          var option = toUpdate[i];\n          Selectpicker.DEFAULTS[option.name] = classNames[option.className];\n        }\n      }\n\n      if (version.major > '4') {\n        Selector.DATA_TOGGLE = 'data-bs-toggle=\"dropdown\"';\n      }\n\n      var value;\n      var chain = this.each(function () {\n        var $this = $(this);\n\n        if ($this.is('select')) {\n          var data = $this.data('selectpicker'),\n              options = typeof _option == 'object' && _option; // for backwards compatibility\n          // (using title as placeholder is deprecated - remove in v2.0.0)\n\n          if (options.title) options.placeholder = options.title;\n\n          if (!data) {\n            var dataAttributes = $this.data();\n\n            for (var dataAttr in dataAttributes) {\n              if (Object.prototype.hasOwnProperty.call(dataAttributes, dataAttr) && $.inArray(dataAttr, DISALLOWED_ATTRIBUTES) !== -1) {\n                delete dataAttributes[dataAttr];\n              }\n            }\n\n            var config = $.extend({}, Selectpicker.DEFAULTS, $.fn.selectpicker.defaults || {}, getAttributesObject($this), dataAttributes, options); // this is correct order on initial render\n\n            config.template = $.extend({}, Selectpicker.DEFAULTS.template, $.fn.selectpicker.defaults ? $.fn.selectpicker.defaults.template : {}, dataAttributes.template, options.template);\n            config.source = $.extend({}, Selectpicker.DEFAULTS.source, $.fn.selectpicker.defaults ? $.fn.selectpicker.defaults.source : {}, options.source);\n            $this.data('selectpicker', data = new Selectpicker(this, config));\n          } else if (options) {\n            for (var i in options) {\n              if (Object.prototype.hasOwnProperty.call(options, i)) {\n                data.options[i] = options[i];\n              }\n            }\n          }\n\n          if (typeof _option == 'string') {\n            if (data[_option] instanceof Function) {\n              value = data[_option].apply(data, args);\n            } else {\n              value = data.options[_option];\n            }\n          }\n        }\n      });\n\n      if (typeof value !== 'undefined') {\n        // noinspection JSUnusedAssignment\n        return value;\n      } else {\n        return chain;\n      }\n    }\n\n    var old = $.fn.selectpicker;\n    $.fn.selectpicker = Plugin;\n    $.fn.selectpicker.Constructor = Selectpicker; // SELECTPICKER NO CONFLICT\n    // ========================\n\n    $.fn.selectpicker.noConflict = function () {\n      $.fn.selectpicker = old;\n      return this;\n    }; // get Bootstrap's keydown event handler for either Bootstrap 4 or Bootstrap 3\n\n\n    function keydownHandler() {\n      if (version.major < 5) {\n        if ($.fn.dropdown) {\n          // wait to define until function is called in case Bootstrap isn't loaded yet\n          var bootstrapKeydown = $.fn.dropdown.Constructor._dataApiKeydownHandler || $.fn.dropdown.Constructor.prototype.keydown;\n          return bootstrapKeydown.apply(this, arguments);\n        }\n      } else {\n        return Dropdown.dataApiKeydownHandler;\n      }\n    }\n\n    $(document).off('keydown.bs.dropdown.data-api').on('keydown.bs.dropdown.data-api', ':not(.bootstrap-select) > [' + Selector.DATA_TOGGLE + ']', keydownHandler).on('keydown.bs.dropdown.data-api', ':not(.bootstrap-select) > .dropdown-menu', keydownHandler).on('keydown' + EVENT_KEY, '.bootstrap-select [' + Selector.DATA_TOGGLE + '], .bootstrap-select [role=\"listbox\"], .bootstrap-select .bs-searchbox input', Selectpicker.prototype.keydown).on('focusin.modal', '.bootstrap-select [' + Selector.DATA_TOGGLE + '], .bootstrap-select [role=\"listbox\"], .bootstrap-select .bs-searchbox input', function (e) {\n      e.stopPropagation();\n    }); // SELECTPICKER DATA-API\n    // =====================\n\n    document.addEventListener('DOMContentLoaded', function () {\n      $('.selectpicker').each(function () {\n        var $selectpicker = $(this);\n        Plugin.call($selectpicker, $selectpicker.data());\n      });\n    });\n  })(jQuery);\n});","map":{"version":3,"mappings":"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","names":["$","DISALLOWED_ATTRIBUTES","uriAttrs","ARIA_ATTRIBUTE_PATTERN","DefaultWhitelist","a","area","b","br","col","code","div","em","hr","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","s","small","span","sub","sup","strong","u","ul","SAFE_URL_PATTERN","DATA_URL_PATTERN","ParseableAttributes","allowedAttribute","attr","allowedAttributeList","attrName","nodeName","toLowerCase","inArray","Boolean","nodeValue","match","regExp","filter","index","value","RegExp","l","length","sanitizeHtml","unsafeElements","whiteList","sanitizeFn","whitelistKeys","Object","keys","len","elements","querySelectorAll","j","len2","el","elName","indexOf","parentNode","removeChild","attributeList","slice","call","attributes","whitelistedAttributes","concat","k","len3","removeAttribute","getAttributesObject","$select","attributesObject","attrVal","forEach","item","placeholder","title","document","createElement","view","classListProp","protoProp","elemCtrProto","Element","objCtr","classListGetter","$elem","add","classes","Array","prototype","arguments","join","addClass","remove","removeClass","toggle","force","toggleClass","contains","hasClass","defineProperty","classListPropDesc","get","enumerable","configurable","ex","number","undefined","__defineGetter__","window","testElement","classList","_add","DOMTokenList","_remove","bind","_toggle","token","values","obj","map","key","isEqual","array1","array2","every","element","String","startsWith","toString","search","TypeError","string","stringLength","searchString","searchLength","position","pos","Number","start","Math","min","max","charCodeAt","toKebabCase","str","replace","ofs","getSelectedOptions","options","selectpicker","main","data","source","optionValuesDataMap","selectedOptions","selected","hideDisabled","disabled","multiple","getSelectValues","opt","push","text","valHooks","useDefault","_set","select","set","elem","apply","changedArguments","EventIsSupported","Event","e","fn","triggerNative","eventName","event","dispatchEvent","bubbles","createEvent","initEvent","stringSearch","method","normalize","stringTypes","searchSuccess","stringType","normalizeToBase","toUpperCase","toInteger","parseInt","deburredLetters","reLatin","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboMarksExtendedRange","rsComboMarksSupplementRange","rsComboRange","rsCombo","reComboMark","deburrLetter","escapeMap","createEscaper","escaper","testRegexp","replaceRegexp","test","htmlEscape","keyCodeMap","keyCodes","ESCAPE","ENTER","SPACE","TAB","ARROW_UP","ARROW_DOWN","Dropdown","bootstrap","getVersion","version","dropdown","Constructor","VERSION","err","success","major","full","split","selectId","EVENT_KEY","classNames","DISABLED","DIVIDER","SHOW","DROPUP","MENU","MENURIGHT","MENULEFT","BUTTONCLASS","POPOVERHEADER","ICONBASE","TICKICON","Selector","DATA_TOGGLE","elementTemplates","subtext","whitespace","createTextNode","fragment","createDocumentFragment","option","selectedOption","cloneNode","setAttribute","noResults","className","checkMark","REGEXP_ARROW","REGEXP_TAB_OR_ESCAPE","generateOption","content","optgroup","nodeType","appendChild","innerHTML","inline","insertAdjacentHTML","useFragment","textElement","subtextElement","iconElement","textContent","icon","iconBase","childNodes","label","display","getOptionData","fromOption","type","getAttribute","style","cssText","fromDataSource","showNoResults","searchMatch","searchValue","noneResultsText","$menuInner","firstChild","filterHidden","hidden","Selectpicker","that","$element","$newElement","$button","$menu","optionQueue","hasMore","current","isSearching","keydown","keyHistory","resetKeyHistory","setTimeout","sizeInfo","winPad","windowPadding","val","render","refresh","setStyle","selectAll","deselectAll","destroy","show","hide","init","DEFAULTS","noneSelectedText","countSelectedText","numSelected","numTotal","maxOptionsText","numAll","numGroup","selectAllText","deselectAllText","pageSize","chunkSize","doneButton","doneButtonText","multipleSeparator","styleBase","size","allowClear","selectedTextFormat","width","container","showSubtext","showIcon","showContent","dropupAuto","header","liveSearch","liveSearchPlaceholder","liveSearchNormalize","liveSearchStyle","actionsBox","tickIcon","showTick","template","caret","maxOptions","mobile","selectOnTab","dropdownAlignRight","virtualScroll","sanitize","constructor","id","form","prop","autofocus","createDropdown","after","prependTo","children","$clearButton","$searchbox","find","fetchData","buildList","requestAnimationFrame","trigger","checkDisabled","clickListener","liveSearchListener","focusedParent","setWidth","selectPosition","on","isVirtual","menuInner","emptyMenu","replaceChild","scrollTop","hasAttribute","off","validity","valid","multiselectable","inputGroup","parent","drop","searchbox","actionsbox","donebutton","clearButton","setPositionData","canHighlight","firstHighlightIndex","height","dividerHeight","dropdownHeaderHeight","liHeight","posinset","createView","setSize","selectedIndex","liIndex","selectedData","menuInnerHeight","scroll","updateValue","noScroll","chunks","chunkCount","firstChunk","lastChunk","currentChunk","prevPositions","positionIsDifferent","previousElements","menuIsDifferent","ceil","endOfChunk","position0","position1","activeElement","selectedElement","defocusItem","prevActiveElement","visibleElements","setOptionStatus","menuFragment","marginTop","marginBottom","toSanitize","visibleElementsLen","elText","elementData","lastChild","sanitized","hasScrollBar","menuInnerInnerWidth","offsetWidth","totalMenuWidth","selectWidth","minWidth","actualMenuWidth","page","floor","previousValue","newActive","currentActive","focusItem","isActive","liData","noStyle","setPlaceholder","updateIndex","titleOption","selectTitleOption","titleNotAppended","firstSelectable","querySelector","firstSelectableIndex","navigation","performance","getEntriesByType","isNotBackForward","defaultSelected","insertBefore","readyState","addEventListener","displayedValue","callback","builtData","more","totalItems","buildData","isArray","dataGetter","optionSelector","mainData","startLen","optID","startIndex","selectOptions","addDivider","config","previousData","addOption","divider","inlineStyle","optionClass","optgroupClass","trim","tokens","extend","addOptgroup","previous","next","headerIndex","lastIndex","searching","selectData","mainElements","widestOptionLength","buildElement","liElement","combinedLength","widestOption","findLis","placeholderSelected","selectedCount","selectedValues","button","buttonInner","titleFragment","showCount","countMax","hasContent","createSelected","createOption","titleOptions","totalCount","tr8nText","filterExpand","clone","newStyle","status","newElement","buttonClass","previousElementSibling","nextElementSibling","menu","menuInnerInner","dropdownHeader","actions","firstOption","css","input","body","offsetHeight","headerHeight","searchHeight","actionsHeight","doneButtonHeight","outerHeight","menuStyle","getComputedStyle","menuWidth","menuPadding","vert","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","horiz","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","menuExtras","marginLeft","marginRight","scrollBarWidth","overflowY","selectHeight","getSelectPosition","$window","offset","$container","containerPos","is","top","left","selectOffsetTop","selectOffsetBot","selectOffsetLeft","scrollLeft","selectOffsetRight","setMenuSize","isAuto","divHeight","menuHeight","divLength","minHeight","_minHeight","maxHeight","menuInnerMinHeight","estimate","isDropup","dropup","_popper","update","$selectClone","appendTo","btnWidth","outerWidth","$bsContainer","actualHeight","getPlacement","containerPosition","Default","isDisabled","append","detach","optionData","selectedOnly","setDisabled","setSelected","activeElementIsSet","thisIsActive","prevActive","keepActive","$document","keyCode","preventDefault","_menu","clearSelection","prevValue","prevIndex","prevOption","prevData","target","navigator","userAgent","elementFromPoint","clientX","clientY","parentElement","stopImmediatePropagation","setFocus","checkPopperExists","state","hoverLi","hoverData","retainActive","$this","clickedData","clickedElement","triggerChange","stopPropagation","$option","optgroupData","datum","optgroupOptions","maxOptionsGrp","focus","maxReached","selectedGroupOptions","maxReachedGrp","_option","maxOptionsArr","maxTxt","maxTxtGrp","$notify","currentTarget","tabindex","originalEvent","isTrusted","q","cache","cacheArr","searchStyle","_searchStyle","normalizeSearch","cacheLen","liPrev","liSelectedIndex","changeAll","previousSelected","currentSelected","triggerClick","open","close","isToggle","$parent","closest","$items","liActive","activeLi","updateScroll","downOnTab","which","isArrowKey","lastIndexOf","liActiveIndex","scrollHeight","matches","cancel","clearTimeout","charAt","hasMatch","matchIndex","before","removeData","Plugin","args","shift","BootstrapVersion","console","warn","toUpdate","name","chain","each","dataAttributes","dataAttr","hasOwnProperty","defaults","Function","old","noConflict","keydownHandler","bootstrapKeydown","_dataApiKeydownHandler","dataApiKeydownHandler","$selectpicker","jQuery"],"sources":["../../js/bootstrap-select.js"],"sourcesContent":["(function ($) {\n  'use strict';\n\n  var DISALLOWED_ATTRIBUTES = ['sanitize', 'whiteList', 'sanitizeFn'];\n\n  var uriAttrs = [\n    'background',\n    'cite',\n    'href',\n    'itemtype',\n    'longdesc',\n    'poster',\n    'src',\n    'xlink:href'\n  ];\n\n  var ARIA_ATTRIBUTE_PATTERN = /^aria-[\\w-]*$/i;\n\n  var DefaultWhitelist = {\n    // Global attributes allowed on any supplied element below.\n    '*': ['class', 'dir', 'id', 'lang', 'role', 'tabindex', 'style', ARIA_ATTRIBUTE_PATTERN],\n    a: ['target', 'href', 'title', 'rel'],\n    area: [],\n    b: [],\n    br: [],\n    col: [],\n    code: [],\n    div: [],\n    em: [],\n    hr: [],\n    h1: [],\n    h2: [],\n    h3: [],\n    h4: [],\n    h5: [],\n    h6: [],\n    i: [],\n    img: ['src', 'alt', 'title', 'width', 'height'],\n    li: [],\n    ol: [],\n    p: [],\n    pre: [],\n    s: [],\n    small: [],\n    span: [],\n    sub: [],\n    sup: [],\n    strong: [],\n    u: [],\n    ul: []\n  };\n\n  /**\n   * A pattern that recognizes a commonly useful subset of URLs that are safe.\n   *\n   * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts\n   */\n  var SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi;\n\n  /**\n   * A pattern that matches safe data URLs. Only matches image, video and audio types.\n   *\n   * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts\n   */\n  var DATA_URL_PATTERN = /^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;\n\n  var ParseableAttributes = ['title', 'placeholder']; // attributes to use as settings, can add others in the future\n\n  function allowedAttribute (attr, allowedAttributeList) {\n    var attrName = attr.nodeName.toLowerCase();\n\n    if ($.inArray(attrName, allowedAttributeList) !== -1) {\n      if ($.inArray(attrName, uriAttrs) !== -1) {\n        return Boolean(attr.nodeValue.match(SAFE_URL_PATTERN) || attr.nodeValue.match(DATA_URL_PATTERN));\n      }\n\n      return true;\n    }\n\n    var regExp = $(allowedAttributeList).filter(function (index, value) {\n      return value instanceof RegExp;\n    });\n\n    // Check if a regular expression validates the attribute.\n    for (var i = 0, l = regExp.length; i < l; i++) {\n      if (attrName.match(regExp[i])) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function sanitizeHtml (unsafeElements, whiteList, sanitizeFn) {\n    if (sanitizeFn && typeof sanitizeFn === 'function') {\n      return sanitizeFn(unsafeElements);\n    }\n\n    var whitelistKeys = Object.keys(whiteList);\n\n    for (var i = 0, len = unsafeElements.length; i < len; i++) {\n      var elements = unsafeElements[i].querySelectorAll('*');\n\n      for (var j = 0, len2 = elements.length; j < len2; j++) {\n        var el = elements[j];\n        var elName = el.nodeName.toLowerCase();\n\n        if (whitelistKeys.indexOf(elName) === -1) {\n          el.parentNode.removeChild(el);\n\n          continue;\n        }\n\n        var attributeList = [].slice.call(el.attributes);\n        var whitelistedAttributes = [].concat(whiteList['*'] || [], whiteList[elName] || []);\n\n        for (var k = 0, len3 = attributeList.length; k < len3; k++) {\n          var attr = attributeList[k];\n\n          if (!allowedAttribute(attr, whitelistedAttributes)) {\n            el.removeAttribute(attr.nodeName);\n          }\n        }\n      }\n    }\n  }\n\n  function getAttributesObject ($select) {\n    var attributesObject = {},\n        attrVal;\n\n    ParseableAttributes.forEach(function (item) {\n      attrVal = $select.attr(item);\n      if (attrVal) attributesObject[item] = attrVal;\n    });\n\n    // for backwards compatibility\n    // (using title as placeholder is deprecated - remove in v2.0.0)\n    if (!attributesObject.placeholder && attributesObject.title) {\n      attributesObject.placeholder = attributesObject.title;\n    }\n\n    return attributesObject;\n  }\n\n  // Polyfill for browsers with no classList support\n  // Remove in v2\n  if (!('classList' in document.createElement('_'))) {\n    (function (view) {\n      if (!('Element' in view)) return;\n\n      var classListProp = 'classList',\n          protoProp = 'prototype',\n          elemCtrProto = view.Element[protoProp],\n          objCtr = Object,\n          classListGetter = function () {\n            var $elem = $(this);\n\n            return {\n              add: function (classes) {\n                classes = Array.prototype.slice.call(arguments).join(' ');\n                return $elem.addClass(classes);\n              },\n              remove: function (classes) {\n                classes = Array.prototype.slice.call(arguments).join(' ');\n                return $elem.removeClass(classes);\n              },\n              toggle: function (classes, force) {\n                return $elem.toggleClass(classes, force);\n              },\n              contains: function (classes) {\n                return $elem.hasClass(classes);\n              }\n            };\n          };\n\n      if (objCtr.defineProperty) {\n        var classListPropDesc = {\n          get: classListGetter,\n          enumerable: true,\n          configurable: true\n        };\n        try {\n          objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n        } catch (ex) { // IE 8 doesn't support enumerable:true\n          // adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\n          // modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\n          if (ex.number === undefined || ex.number === -0x7FF5EC54) {\n            classListPropDesc.enumerable = false;\n            objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n          }\n        }\n      } else if (objCtr[protoProp].__defineGetter__) {\n        elemCtrProto.__defineGetter__(classListProp, classListGetter);\n      }\n    }(window));\n  }\n\n  var testElement = document.createElement('_');\n\n  testElement.classList.add('c1', 'c2');\n\n  if (!testElement.classList.contains('c2')) {\n    var _add = DOMTokenList.prototype.add,\n        _remove = DOMTokenList.prototype.remove;\n\n    DOMTokenList.prototype.add = function () {\n      Array.prototype.forEach.call(arguments, _add.bind(this));\n    };\n\n    DOMTokenList.prototype.remove = function () {\n      Array.prototype.forEach.call(arguments, _remove.bind(this));\n    };\n  }\n\n  testElement.classList.toggle('c3', false);\n\n  // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n  // support the second argument.\n  if (testElement.classList.contains('c3')) {\n    var _toggle = DOMTokenList.prototype.toggle;\n\n    DOMTokenList.prototype.toggle = function (token, force) {\n      if (1 in arguments && !this.contains(token) === !force) {\n        return force;\n      } else {\n        return _toggle.call(this, token);\n      }\n    };\n  }\n\n  testElement = null;\n\n  // Polyfill for IE (remove in v2)\n  Object.values = typeof Object.values === 'function' ? Object.values : function (obj) {\n    return Object.keys(obj).map(function (key) {\n      return obj[key];\n    });\n  };\n\n  // shallow array comparison\n  function isEqual (array1, array2) {\n    return array1.length === array2.length && array1.every(function (element, index) {\n      return element === array2[index];\n    });\n  };\n\n  // <editor-fold desc=\"Shims\">\n  if (!String.prototype.startsWith) {\n    (function () {\n      'use strict'; // needed to support `apply`/`call` with `undefined`/`null`\n      var toString = {}.toString;\n      var startsWith = function (search) {\n        if (this == null) {\n          throw new TypeError();\n        }\n        var string = String(this);\n        if (search && toString.call(search) == '[object RegExp]') {\n          throw new TypeError();\n        }\n        var stringLength = string.length;\n        var searchString = String(search);\n        var searchLength = searchString.length;\n        var position = arguments.length > 1 ? arguments[1] : undefined;\n        // `ToInteger`\n        var pos = position ? Number(position) : 0;\n        if (pos != pos) { // better `isNaN`\n          pos = 0;\n        }\n        var start = Math.min(Math.max(pos, 0), stringLength);\n        // Avoid the `indexOf` call if no match is possible\n        if (searchLength + start > stringLength) {\n          return false;\n        }\n        var index = -1;\n        while (++index < searchLength) {\n          if (string.charCodeAt(start + index) != searchString.charCodeAt(index)) {\n            return false;\n          }\n        }\n        return true;\n      };\n      if (Object.defineProperty) {\n        Object.defineProperty(String.prototype, 'startsWith', {\n          'value': startsWith,\n          'configurable': true,\n          'writable': true\n        });\n      } else {\n        String.prototype.startsWith = startsWith;\n      }\n    }());\n  }\n\n  function toKebabCase (str) {\n    return str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, function ($, ofs) {\n      return (ofs ? '-' : '') + $.toLowerCase();\n    });\n  }\n\n  function getSelectedOptions () {\n    var options = this.selectpicker.main.data;\n\n    if (this.options.source.data || this.options.source.search) {\n      options = Object.values(this.selectpicker.optionValuesDataMap);\n    }\n\n    var selectedOptions = options.filter(function (item) {\n      if (item.selected) {\n        if (this.options.hideDisabled && item.disabled) return false;\n        return true;\n      }\n\n      return false;\n    }, this);\n\n    // ensure only 1 option is selected if multiple are set in the data source\n    if (this.options.source.data && !this.multiple && selectedOptions.length > 1) {\n      for (var i = 0; i < selectedOptions.length - 1; i++) {\n        selectedOptions[i].selected = false;\n      }\n\n      selectedOptions = [ selectedOptions[selectedOptions.length - 1] ];\n    }\n\n    return selectedOptions;\n  }\n\n  // much faster than $.val()\n  function getSelectValues (selectedOptions) {\n    var value = [],\n        options = selectedOptions || getSelectedOptions.call(this),\n        opt;\n\n    for (var i = 0, len = options.length; i < len; i++) {\n      opt = options[i];\n\n      if (!opt.disabled) {\n        value.push(opt.value === undefined ? opt.text : opt.value);\n      }\n    }\n\n    if (!this.multiple) {\n      return !value.length ? null : value[0];\n    }\n\n    return value;\n  }\n\n  // set data-selected on select element if the value has been programmatically selected\n  // prior to initialization of bootstrap-select\n  // * consider removing or replacing an alternative method *\n  var valHooks = {\n    useDefault: false,\n    _set: $.valHooks.select.set\n  };\n\n  $.valHooks.select.set = function (elem, value) {\n    if (value && !valHooks.useDefault) $(elem).data('selected', true);\n\n    return valHooks._set.apply(this, arguments);\n  };\n\n  var changedArguments = null;\n\n  var EventIsSupported = (function () {\n    try {\n      new Event('change');\n      return true;\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  $.fn.triggerNative = function (eventName) {\n    var el = this[0],\n        event;\n\n    if (el.dispatchEvent) { // for modern browsers & IE9+\n      if (EventIsSupported) {\n        // For modern browsers\n        event = new Event(eventName, {\n          bubbles: true\n        });\n      } else {\n        // For IE since it doesn't support Event constructor\n        event = document.createEvent('Event');\n        event.initEvent(eventName, true, false);\n      }\n\n      el.dispatchEvent(event);\n    }\n  };\n  // </editor-fold>\n\n  function stringSearch (li, searchString, method, normalize) {\n    var stringTypes = [\n          'display',\n          'subtext',\n          'tokens'\n        ],\n        searchSuccess = false;\n\n    for (var i = 0; i < stringTypes.length; i++) {\n      var stringType = stringTypes[i],\n          string = li[stringType];\n\n      if (string) {\n        string = string.toString();\n\n        // Strip HTML tags. This isn't perfect, but it's much faster than any other method\n        if (stringType === 'display') {\n          string = string.replace(/<[^>]+>/g, '');\n        }\n\n        if (normalize) string = normalizeToBase(string);\n        string = string.toUpperCase();\n\n        if (typeof method === 'function') {\n          searchSuccess = method(string, searchString);\n        } else if (method === 'contains') {\n          searchSuccess = string.indexOf(searchString) >= 0;\n        } else {\n          searchSuccess = string.startsWith(searchString);\n        }\n\n        if (searchSuccess) break;\n      }\n    }\n\n    return searchSuccess;\n  }\n\n  function toInteger (value) {\n    return parseInt(value, 10) || 0;\n  }\n\n  // Borrowed from Lodash (_.deburr)\n  /** Used to map Latin Unicode letters to basic Latin letters. */\n  var deburredLetters = {\n    // Latin-1 Supplement block.\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    '\\xc6': 'Ae', '\\xe6': 'ae',\n    '\\xde': 'Th', '\\xfe': 'th',\n    '\\xdf': 'ss',\n    // Latin Extended-A block.\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n    '\\u0134': 'J',  '\\u0135': 'j',\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n    '\\u0174': 'W',  '\\u0175': 'w',\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n    '\\u0132': 'IJ', '\\u0133': 'ij',\n    '\\u0152': 'Oe', '\\u0153': 'oe',\n    '\\u0149': \"'n\", '\\u017f': 's'\n  };\n\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n  /** Used to compose unicode character classes. */\n  var rsComboMarksRange = '\\\\u0300-\\\\u036f',\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n      rsComboMarksExtendedRange = '\\\\u1ab0-\\\\u1aff',\n      rsComboMarksSupplementRange = '\\\\u1dc0-\\\\u1dff',\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange + rsComboMarksExtendedRange + rsComboMarksSupplementRange;\n\n  /** Used to compose unicode capture groups. */\n  var rsCombo = '[' + rsComboRange + ']';\n\n  /**\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n   */\n  var reComboMark = RegExp(rsCombo, 'g');\n\n  function deburrLetter (key) {\n    return deburredLetters[key];\n  };\n\n  function normalizeToBase (string) {\n    string = string.toString();\n    return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n  }\n\n  // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function (map) {\n    var escaper = function (match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped.\n    var source = '(?:' + Object.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function (string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n\n  var htmlEscape = createEscaper(escapeMap);\n\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  var keyCodeMap = {\n    32: ' ',\n    48: '0',\n    49: '1',\n    50: '2',\n    51: '3',\n    52: '4',\n    53: '5',\n    54: '6',\n    55: '7',\n    56: '8',\n    57: '9',\n    59: ';',\n    65: 'A',\n    66: 'B',\n    67: 'C',\n    68: 'D',\n    69: 'E',\n    70: 'F',\n    71: 'G',\n    72: 'H',\n    73: 'I',\n    74: 'J',\n    75: 'K',\n    76: 'L',\n    77: 'M',\n    78: 'N',\n    79: 'O',\n    80: 'P',\n    81: 'Q',\n    82: 'R',\n    83: 'S',\n    84: 'T',\n    85: 'U',\n    86: 'V',\n    87: 'W',\n    88: 'X',\n    89: 'Y',\n    90: 'Z',\n    96: '0',\n    97: '1',\n    98: '2',\n    99: '3',\n    100: '4',\n    101: '5',\n    102: '6',\n    103: '7',\n    104: '8',\n    105: '9'\n  };\n\n  var keyCodes = {\n    ESCAPE: 27, // KeyboardEvent.which value for Escape (Esc) key\n    ENTER: 13, // KeyboardEvent.which value for Enter key\n    SPACE: 32, // KeyboardEvent.which value for space key\n    TAB: 9, // KeyboardEvent.which value for tab key\n    ARROW_UP: 38, // KeyboardEvent.which value for up arrow key\n    ARROW_DOWN: 40 // KeyboardEvent.which value for down arrow key\n  };\n\n  // eslint-disable-next-line no-undef\n  var Dropdown = window.Dropdown || bootstrap.Dropdown;\n\n  function getVersion () {\n    var version;\n\n    try {\n      version = $.fn.dropdown.Constructor.VERSION;\n    } catch (err) {\n      version = Dropdown.VERSION;\n    }\n\n    return version;\n  }\n\n  var version = {\n    success: false,\n    major: '3'\n  };\n\n  try {\n    version.full = (getVersion() || '').split(' ')[0].split('.');\n    version.major = version.full[0];\n    version.success = true;\n  } catch (err) {\n    // do nothing\n  }\n\n  var selectId = 0;\n\n  var EVENT_KEY = '.bs.select';\n\n  var classNames = {\n    DISABLED: 'disabled',\n    DIVIDER: 'divider',\n    SHOW: 'open',\n    DROPUP: 'dropup',\n    MENU: 'dropdown-menu',\n    MENURIGHT: 'dropdown-menu-right',\n    MENULEFT: 'dropdown-menu-left',\n    // to-do: replace with more advanced template/customization options\n    BUTTONCLASS: 'btn-default',\n    POPOVERHEADER: 'popover-title',\n    ICONBASE: 'glyphicon',\n    TICKICON: 'glyphicon-ok'\n  };\n\n  var Selector = {\n    MENU: '.' + classNames.MENU,\n    DATA_TOGGLE: 'data-toggle=\"dropdown\"'\n  };\n\n  var elementTemplates = {\n    div: document.createElement('div'),\n    span: document.createElement('span'),\n    i: document.createElement('i'),\n    subtext: document.createElement('small'),\n    a: document.createElement('a'),\n    li: document.createElement('li'),\n    whitespace: document.createTextNode('\\u00A0'),\n    fragment: document.createDocumentFragment(),\n    option: document.createElement('option')\n  };\n\n  elementTemplates.selectedOption = elementTemplates.option.cloneNode(false);\n  elementTemplates.selectedOption.setAttribute('selected', true);\n\n  elementTemplates.noResults = elementTemplates.li.cloneNode(false);\n  elementTemplates.noResults.className = 'no-results';\n\n  elementTemplates.a.setAttribute('role', 'option');\n  elementTemplates.a.className = 'dropdown-item';\n\n  elementTemplates.subtext.className = 'text-muted';\n\n  elementTemplates.text = elementTemplates.span.cloneNode(false);\n  elementTemplates.text.className = 'text';\n\n  elementTemplates.checkMark = elementTemplates.span.cloneNode(false);\n\n  var REGEXP_ARROW = new RegExp(keyCodes.ARROW_UP + '|' + keyCodes.ARROW_DOWN);\n  var REGEXP_TAB_OR_ESCAPE = new RegExp('^' + keyCodes.TAB + '$|' + keyCodes.ESCAPE);\n\n  var generateOption = {\n    li: function (content, classes, optgroup) {\n      var li = elementTemplates.li.cloneNode(false);\n\n      if (content) {\n        if (content.nodeType === 1 || content.nodeType === 11) {\n          li.appendChild(content);\n        } else {\n          li.innerHTML = content;\n        }\n      }\n\n      if (typeof classes !== 'undefined' && classes !== '') li.className = classes;\n      if (typeof optgroup !== 'undefined' && optgroup !== null) li.classList.add('optgroup-' + optgroup);\n\n      return li;\n    },\n\n    a: function (text, classes, inline) {\n      var a = elementTemplates.a.cloneNode(true);\n\n      if (text) {\n        if (text.nodeType === 11) {\n          a.appendChild(text);\n        } else {\n          a.insertAdjacentHTML('beforeend', text);\n        }\n      }\n\n      if (typeof classes !== 'undefined' && classes !== '') a.classList.add.apply(a.classList, classes.split(/\\s+/));\n      if (inline) a.setAttribute('style', inline);\n\n      return a;\n    },\n\n    text: function (options, useFragment) {\n      var textElement = elementTemplates.text.cloneNode(false),\n          subtextElement,\n          iconElement;\n\n      if (options.content) {\n        textElement.innerHTML = options.content;\n      } else {\n        textElement.textContent = options.text;\n\n        if (options.icon) {\n          var whitespace = elementTemplates.whitespace.cloneNode(false);\n\n          // need to use <i> for icons in the button to prevent a breaking change\n          // note: switch to span in next major release\n          iconElement = (useFragment === true ? elementTemplates.i : elementTemplates.span).cloneNode(false);\n          iconElement.className = this.options.iconBase + ' ' + options.icon;\n\n          elementTemplates.fragment.appendChild(iconElement);\n          elementTemplates.fragment.appendChild(whitespace);\n        }\n\n        if (options.subtext) {\n          subtextElement = elementTemplates.subtext.cloneNode(false);\n          subtextElement.textContent = options.subtext;\n          textElement.appendChild(subtextElement);\n        }\n      }\n\n      if (useFragment === true) {\n        while (textElement.childNodes.length > 0) {\n          elementTemplates.fragment.appendChild(textElement.childNodes[0]);\n        }\n      } else {\n        elementTemplates.fragment.appendChild(textElement);\n      }\n\n      return elementTemplates.fragment;\n    },\n\n    label: function (options) {\n      var textElement = elementTemplates.text.cloneNode(false),\n          subtextElement,\n          iconElement;\n\n      textElement.innerHTML = options.display;\n\n      if (options.icon) {\n        var whitespace = elementTemplates.whitespace.cloneNode(false);\n\n        iconElement = elementTemplates.span.cloneNode(false);\n        iconElement.className = this.options.iconBase + ' ' + options.icon;\n\n        elementTemplates.fragment.appendChild(iconElement);\n        elementTemplates.fragment.appendChild(whitespace);\n      }\n\n      if (options.subtext) {\n        subtextElement = elementTemplates.subtext.cloneNode(false);\n        subtextElement.textContent = options.subtext;\n        textElement.appendChild(subtextElement);\n      }\n\n      elementTemplates.fragment.appendChild(textElement);\n\n      return elementTemplates.fragment;\n    }\n  };\n\n  var getOptionData = {\n    fromOption: function (option, type) {\n      var value;\n\n      switch (type) {\n        case 'divider':\n          value = option.getAttribute('data-divider') === 'true';\n          break;\n\n        case 'text':\n          value = option.textContent;\n          break;\n\n        case 'label':\n          value = option.label;\n          break;\n\n        case 'style':\n          value = option.style.cssText;\n          break;\n\n        case 'title':\n          value = option.title;\n          break;\n\n        default:\n          value = option.getAttribute('data-' + toKebabCase(type));\n          break;\n      }\n\n      return value;\n    },\n    fromDataSource: function (option, type) {\n      var value;\n\n      switch (type) {\n        case 'text':\n        case 'label':\n          value = option.text || option.value || '';\n          break;\n\n        default:\n          value = option[type];\n          break;\n      }\n\n      return value;\n    }\n  };\n\n  function showNoResults (searchMatch, searchValue) {\n    if (!searchMatch.length) {\n      elementTemplates.noResults.innerHTML = this.options.noneResultsText.replace('{0}', '\"' + htmlEscape(searchValue) + '\"');\n      this.$menuInner[0].firstChild.appendChild(elementTemplates.noResults);\n    }\n  }\n\n  function filterHidden (item) {\n    return !(item.hidden || this.options.hideDisabled && item.disabled);\n  }\n\n  var Selectpicker = function (element, options) {\n    var that = this;\n\n    // bootstrap-select has been initialized - revert valHooks.select.set back to its original function\n    if (!valHooks.useDefault) {\n      $.valHooks.select.set = valHooks._set;\n      valHooks.useDefault = true;\n    }\n\n    this.$element = $(element);\n    this.$newElement = null;\n    this.$button = null;\n    this.$menu = null;\n    this.options = options;\n    this.selectpicker = {\n      main: {\n        data: [],\n        optionQueue: elementTemplates.fragment.cloneNode(false),\n        hasMore: false\n      },\n      search: {\n        data: [],\n        hasMore: false\n      },\n      current: {}, // current is either equal to main or search depending on if a search is in progress\n      view: {},\n      // map of option values and their respective data (only used in conjunction with options.source)\n      optionValuesDataMap: {},\n      isSearching: false,\n      keydown: {\n        keyHistory: '',\n        resetKeyHistory: {\n          start: function () {\n            return setTimeout(function () {\n              that.selectpicker.keydown.keyHistory = '';\n            }, 800);\n          }\n        }\n      }\n    };\n\n    this.sizeInfo = {};\n\n    // Format window padding\n    var winPad = this.options.windowPadding;\n    if (typeof winPad === 'number') {\n      this.options.windowPadding = [winPad, winPad, winPad, winPad];\n    }\n\n    // Expose public methods\n    this.val = Selectpicker.prototype.val;\n    this.render = Selectpicker.prototype.render;\n    this.refresh = Selectpicker.prototype.refresh;\n    this.setStyle = Selectpicker.prototype.setStyle;\n    this.selectAll = Selectpicker.prototype.selectAll;\n    this.deselectAll = Selectpicker.prototype.deselectAll;\n    this.destroy = Selectpicker.prototype.destroy;\n    this.remove = Selectpicker.prototype.remove;\n    this.show = Selectpicker.prototype.show;\n    this.hide = Selectpicker.prototype.hide;\n\n    this.init();\n  };\n\n  Selectpicker.VERSION = '1.14.0-beta3';\n\n  // part of this is duplicated in i18n/defaults-en_US.js. Make sure to update both.\n  Selectpicker.DEFAULTS = {\n    noneSelectedText: 'Nothing selected',\n    noneResultsText: 'No results matched {0}',\n    countSelectedText: function (numSelected, numTotal) {\n      return (numSelected == 1) ? '{0} item selected' : '{0} items selected';\n    },\n    maxOptionsText: function (numAll, numGroup) {\n      return [\n        (numAll == 1) ? 'Limit reached ({n} item max)' : 'Limit reached ({n} items max)',\n        (numGroup == 1) ? 'Group limit reached ({n} item max)' : 'Group limit reached ({n} items max)'\n      ];\n    },\n    selectAllText: 'Select All',\n    deselectAllText: 'Deselect All',\n    source: {\n      pageSize: 40\n    },\n    chunkSize: 40,\n    doneButton: false,\n    doneButtonText: 'Close',\n    multipleSeparator: ', ',\n    styleBase: 'btn',\n    style: classNames.BUTTONCLASS,\n    size: 'auto',\n    title: null,\n    placeholder: null,\n    allowClear: false,\n    selectedTextFormat: 'values',\n    width: false,\n    container: false,\n    hideDisabled: false,\n    showSubtext: false,\n    showIcon: true,\n    showContent: true,\n    dropupAuto: true,\n    header: false,\n    liveSearch: false,\n    liveSearchPlaceholder: null,\n    liveSearchNormalize: false,\n    liveSearchStyle: 'contains',\n    actionsBox: false,\n    iconBase: classNames.ICONBASE,\n    tickIcon: classNames.TICKICON,\n    showTick: false,\n    template: {\n      caret: '<span class=\"caret\"></span>'\n    },\n    maxOptions: false,\n    mobile: false,\n    selectOnTab: true,\n    dropdownAlignRight: false,\n    windowPadding: 0,\n    virtualScroll: 600,\n    display: false,\n    sanitize: true,\n    sanitizeFn: null,\n    whiteList: DefaultWhitelist\n  };\n\n  Selectpicker.prototype = {\n\n    constructor: Selectpicker,\n\n    init: function () {\n      var that = this,\n          id = this.$element.attr('id'),\n          element = this.$element[0],\n          form = element.form;\n\n      selectId++;\n      this.selectId = 'bs-select-' + selectId;\n\n      element.classList.add('bs-select-hidden');\n\n      this.multiple = this.$element.prop('multiple');\n      this.autofocus = this.$element.prop('autofocus');\n\n      if (element.classList.contains('show-tick')) {\n        this.options.showTick = true;\n      }\n\n      this.$newElement = this.createDropdown();\n\n      this.$element\n        .after(this.$newElement)\n        .prependTo(this.$newElement);\n\n      // ensure select is associated with form element if it got unlinked after moving it inside newElement\n      if (form && element.form === null) {\n        if (!form.id) form.id = 'form-' + this.selectId;\n        element.setAttribute('form', form.id);\n      }\n\n      this.$button = this.$newElement.children('button');\n      if (this.options.allowClear) this.$clearButton = this.$button.children('.bs-select-clear-selected');\n      this.$menu = this.$newElement.children(Selector.MENU);\n      this.$menuInner = this.$menu.children('.inner');\n      this.$searchbox = this.$menu.find('input');\n\n      element.classList.remove('bs-select-hidden');\n\n      this.fetchData(function () {\n        that.render(true);\n        that.buildList();\n\n        requestAnimationFrame(function () {\n          that.$element.trigger('loaded' + EVENT_KEY);\n        });\n      });\n\n      if (this.options.dropdownAlignRight === true) this.$menu[0].classList.add(classNames.MENURIGHT);\n\n      if (typeof id !== 'undefined') {\n        this.$button.attr('data-id', id);\n      }\n\n      this.checkDisabled();\n      this.clickListener();\n\n      if (version.major > 4) this.dropdown = new Dropdown(this.$button[0]);\n\n      if (this.options.liveSearch) {\n        this.liveSearchListener();\n        this.focusedParent = this.$searchbox[0];\n      } else {\n        this.focusedParent = this.$menuInner[0];\n      }\n\n      this.setStyle();\n      this.setWidth();\n      if (this.options.container) {\n        this.selectPosition();\n      } else {\n        this.$element.on('hide' + EVENT_KEY, function () {\n          if (that.isVirtual()) {\n            // empty menu on close\n            var menuInner = that.$menuInner[0],\n                emptyMenu = menuInner.firstChild.cloneNode(false);\n\n            // replace the existing UL with an empty one - this is faster than $.empty() or innerHTML = ''\n            menuInner.replaceChild(emptyMenu, menuInner.firstChild);\n            menuInner.scrollTop = 0;\n          }\n        });\n      }\n      this.$menu.data('this', this);\n      this.$newElement.data('this', this);\n      if (this.options.mobile) this.mobile();\n\n      this.$newElement.on({\n        'hide.bs.dropdown': function (e) {\n          that.$element.trigger('hide' + EVENT_KEY, e);\n        },\n        'hidden.bs.dropdown': function (e) {\n          that.$element.trigger('hidden' + EVENT_KEY, e);\n        },\n        'show.bs.dropdown': function (e) {\n          that.$element.trigger('show' + EVENT_KEY, e);\n        },\n        'shown.bs.dropdown': function (e) {\n          that.$element.trigger('shown' + EVENT_KEY, e);\n        }\n      });\n\n      if (element.hasAttribute('required')) {\n        this.$element.on('invalid' + EVENT_KEY, function () {\n          that.$button[0].classList.add('bs-invalid');\n\n          that.$element\n            .on('shown' + EVENT_KEY + '.invalid', function () {\n              that.$element\n                .val(that.$element.val()) // set the value to hide the validation message in Chrome when menu is opened\n                .off('shown' + EVENT_KEY + '.invalid');\n            })\n            .on('rendered' + EVENT_KEY, function () {\n              // if select is no longer invalid, remove the bs-invalid class\n              if (this.validity.valid) that.$button[0].classList.remove('bs-invalid');\n              that.$element.off('rendered' + EVENT_KEY);\n            });\n\n          that.$button.on('blur' + EVENT_KEY, function () {\n            that.$element.trigger('focus').trigger('blur');\n            that.$button.off('blur' + EVENT_KEY);\n          });\n        });\n      }\n\n      if (form) {\n        $(form).on('reset' + EVENT_KEY, function () {\n          requestAnimationFrame(function () {\n            that.render();\n          });\n        });\n      }\n    },\n\n    createDropdown: function () {\n      // Options\n      // If we are multiple or showTick option is set, then add the show-tick class\n      var showTick = (this.multiple || this.options.showTick) ? ' show-tick' : '',\n          multiselectable = this.multiple ? ' aria-multiselectable=\"true\"' : '',\n          inputGroup = '',\n          autofocus = this.autofocus ? ' autofocus' : '';\n\n      if (version.major < 4 && this.$element.parent().hasClass('input-group')) {\n        inputGroup = ' input-group-btn';\n      }\n\n      // Elements\n      var drop,\n          header = '',\n          searchbox = '',\n          actionsbox = '',\n          donebutton = '',\n          clearButton = '';\n\n      if (this.options.header) {\n        header =\n          '<div class=\"' + classNames.POPOVERHEADER + '\">' +\n            '<button type=\"button\" class=\"close\" aria-hidden=\"true\">&times;</button>' +\n              this.options.header +\n          '</div>';\n      }\n\n      if (this.options.liveSearch) {\n        searchbox =\n          '<div class=\"bs-searchbox\">' +\n            '<input type=\"search\" class=\"form-control\" autocomplete=\"off\"' +\n              (\n                this.options.liveSearchPlaceholder === null ? ''\n                :\n                ' placeholder=\"' + htmlEscape(this.options.liveSearchPlaceholder) + '\"'\n              ) +\n              ' role=\"combobox\" aria-label=\"Search\" aria-controls=\"' + this.selectId + '\" aria-autocomplete=\"list\">' +\n          '</div>';\n      }\n\n      if (this.multiple && this.options.actionsBox) {\n        actionsbox =\n          '<div class=\"bs-actionsbox\">' +\n            '<div class=\"btn-group btn-group-sm\">' +\n              '<button type=\"button\" class=\"actions-btn bs-select-all btn ' + classNames.BUTTONCLASS + '\">' +\n                this.options.selectAllText +\n              '</button>' +\n              '<button type=\"button\" class=\"actions-btn bs-deselect-all btn ' + classNames.BUTTONCLASS + '\">' +\n                this.options.deselectAllText +\n              '</button>' +\n            '</div>' +\n          '</div>';\n      }\n\n      if (this.multiple && this.options.doneButton) {\n        donebutton =\n          '<div class=\"bs-donebutton\">' +\n            '<div class=\"btn-group\">' +\n              '<button type=\"button\" class=\"btn btn-sm ' + classNames.BUTTONCLASS + '\">' +\n                this.options.doneButtonText +\n              '</button>' +\n            '</div>' +\n          '</div>';\n      }\n\n      if (this.options.allowClear) {\n        clearButton = '<span class=\"close bs-select-clear-selected\" title=\"' + this.options.deselectAllText + '\"><span>&times;</span>';\n      }\n\n      drop =\n        '<div class=\"dropdown bootstrap-select' + showTick + inputGroup + '\">' +\n          '<button type=\"button\" tabindex=\"-1\" class=\"' +\n            this.options.styleBase +\n            ' dropdown-toggle\" ' +\n            (this.options.display === 'static' ? 'data-display=\"static\"' : '') +\n            Selector.DATA_TOGGLE +\n            autofocus +\n            ' role=\"combobox\" aria-owns=\"' +\n            this.selectId +\n            '\" aria-haspopup=\"listbox\" aria-expanded=\"false\">' +\n            '<div class=\"filter-option\">' +\n              '<div class=\"filter-option-inner\">' +\n                '<div class=\"filter-option-inner-inner\">&nbsp;</div>' +\n              '</div> ' +\n            '</div>' +\n            clearButton +\n            '</span>' +\n            (\n              version.major >= '4' ? ''\n              :\n              '<span class=\"bs-caret\">' +\n                this.options.template.caret +\n              '</span>'\n            ) +\n          '</button>' +\n          '<div class=\"' + classNames.MENU + ' ' + (version.major >= '4' ? '' : classNames.SHOW) + '\">' +\n            header +\n            searchbox +\n            actionsbox +\n            '<div class=\"inner ' + classNames.SHOW + '\" role=\"listbox\" id=\"' + this.selectId + '\" tabindex=\"-1\" ' + multiselectable + '>' +\n                '<ul class=\"' + classNames.MENU + ' inner ' + (version.major >= '4' ? classNames.SHOW : '') + '\" role=\"presentation\">' +\n                '</ul>' +\n            '</div>' +\n            donebutton +\n          '</div>' +\n        '</div>';\n\n      return $(drop);\n    },\n\n    setPositionData: function () {\n      this.selectpicker.view.canHighlight = [];\n      this.selectpicker.view.size = 0;\n      this.selectpicker.view.firstHighlightIndex = false;\n\n      for (var i = 0; i < this.selectpicker.current.data.length; i++) {\n        var li = this.selectpicker.current.data[i],\n            canHighlight = true;\n\n        if (li.type === 'divider') {\n          canHighlight = false;\n          li.height = this.sizeInfo.dividerHeight;\n        } else if (li.type === 'optgroup-label') {\n          canHighlight = false;\n          li.height = this.sizeInfo.dropdownHeaderHeight;\n        } else {\n          li.height = this.sizeInfo.liHeight;\n        }\n\n        if (li.disabled) canHighlight = false;\n\n        this.selectpicker.view.canHighlight.push(canHighlight);\n\n        if (canHighlight) {\n          this.selectpicker.view.size++;\n          li.posinset = this.selectpicker.view.size;\n          if (this.selectpicker.view.firstHighlightIndex === false) this.selectpicker.view.firstHighlightIndex = i;\n        }\n\n        li.position = (i === 0 ? 0 : this.selectpicker.current.data[i - 1].position) + li.height;\n      }\n    },\n\n    isVirtual: function () {\n      return (this.options.virtualScroll !== false) && (this.selectpicker.main.data.length >= this.options.virtualScroll) || this.options.virtualScroll === true;\n    },\n\n    createView: function (isSearching, setSize, refresh) {\n      var that = this,\n          scrollTop = 0;\n\n      this.selectpicker.isSearching = isSearching;\n      this.selectpicker.current = isSearching ? this.selectpicker.search : this.selectpicker.main;\n\n      this.setPositionData();\n\n      if (setSize) {\n        if (refresh) {\n          scrollTop = this.$menuInner[0].scrollTop;\n        } else if (!that.multiple) {\n          var element = that.$element[0],\n              selectedIndex = (element.options[element.selectedIndex] || {}).liIndex;\n\n          if (typeof selectedIndex === 'number' && that.options.size !== false) {\n            var selectedData = that.selectpicker.main.data[selectedIndex],\n                position = selectedData && selectedData.position;\n\n            if (position) {\n              scrollTop = position - ((that.sizeInfo.menuInnerHeight + that.sizeInfo.liHeight) / 2);\n            }\n          }\n        }\n      }\n\n      scroll(scrollTop, true);\n\n      this.$menuInner.off('scroll.createView').on('scroll.createView', function (e, updateValue) {\n        if (!that.noScroll) scroll(this.scrollTop, updateValue);\n        that.noScroll = false;\n      });\n\n      function scroll (scrollTop, init) {\n        var size = that.selectpicker.current.data.length,\n            chunks = [],\n            chunkSize,\n            chunkCount,\n            firstChunk,\n            lastChunk,\n            currentChunk,\n            prevPositions,\n            positionIsDifferent,\n            previousElements,\n            menuIsDifferent = true,\n            isVirtual = that.isVirtual();\n\n        that.selectpicker.view.scrollTop = scrollTop;\n\n        chunkSize = that.options.chunkSize; // number of options in a chunk\n        chunkCount = Math.ceil(size / chunkSize) || 1; // number of chunks\n\n        for (var i = 0; i < chunkCount; i++) {\n          var endOfChunk = (i + 1) * chunkSize;\n\n          if (i === chunkCount - 1) {\n            endOfChunk = size;\n          }\n\n          chunks[i] = [\n            (i) * chunkSize + (!i ? 0 : 1),\n            endOfChunk\n          ];\n\n          if (!size) break;\n\n          if (currentChunk === undefined && scrollTop - 1 <= that.selectpicker.current.data[endOfChunk - 1].position - that.sizeInfo.menuInnerHeight) {\n            currentChunk = i;\n          }\n        }\n\n        if (currentChunk === undefined) currentChunk = 0;\n\n        prevPositions = [that.selectpicker.view.position0, that.selectpicker.view.position1];\n\n        // always display previous, current, and next chunks\n        firstChunk = Math.max(0, currentChunk - 1);\n        lastChunk = Math.min(chunkCount - 1, currentChunk + 1);\n\n        that.selectpicker.view.position0 = isVirtual === false ? 0 : (Math.max(0, chunks[firstChunk][0]) || 0);\n        that.selectpicker.view.position1 = isVirtual === false ? size : (Math.min(size, chunks[lastChunk][1]) || 0);\n\n        positionIsDifferent = prevPositions[0] !== that.selectpicker.view.position0 || prevPositions[1] !== that.selectpicker.view.position1;\n\n        if (that.activeElement !== undefined) {\n          if (init) {\n            if (that.activeElement !== that.selectedElement) {\n              that.defocusItem(that.activeElement);\n            }\n            that.activeElement = undefined;\n          }\n\n          if (that.activeElement !== that.selectedElement) {\n            that.defocusItem(that.selectedElement);\n          }\n        }\n\n        if (that.prevActiveElement !== undefined && that.prevActiveElement !== that.activeElement && that.prevActiveElement !== that.selectedElement) {\n          that.defocusItem(that.prevActiveElement);\n        }\n\n        if (init || positionIsDifferent || that.selectpicker.current.hasMore) {\n          previousElements = that.selectpicker.view.visibleElements ? that.selectpicker.view.visibleElements.slice() : [];\n\n          if (isVirtual === false) {\n            that.selectpicker.view.visibleElements = that.selectpicker.current.elements;\n          } else {\n            that.selectpicker.view.visibleElements = that.selectpicker.current.elements.slice(that.selectpicker.view.position0, that.selectpicker.view.position1);\n          }\n\n          that.setOptionStatus();\n\n          // if searching, check to make sure the list has actually been updated before updating DOM\n          // this prevents unnecessary repaints\n          if (isSearching || (isVirtual === false && init)) menuIsDifferent = !isEqual(previousElements, that.selectpicker.view.visibleElements);\n\n          // if virtual scroll is disabled and not searching,\n          // menu should never need to be updated more than once\n          if ((init || isVirtual === true) && menuIsDifferent) {\n            var menuInner = that.$menuInner[0],\n                menuFragment = document.createDocumentFragment(),\n                emptyMenu = menuInner.firstChild.cloneNode(false),\n                marginTop,\n                marginBottom,\n                elements = that.selectpicker.view.visibleElements,\n                toSanitize = [];\n\n            // replace the existing UL with an empty one - this is faster than $.empty()\n            menuInner.replaceChild(emptyMenu, menuInner.firstChild);\n\n            for (var i = 0, visibleElementsLen = elements.length; i < visibleElementsLen; i++) {\n              var element = elements[i],\n                  elText,\n                  elementData;\n\n              if (that.options.sanitize) {\n                elText = element.lastChild;\n\n                if (elText) {\n                  elementData = that.selectpicker.current.data[i + that.selectpicker.view.position0];\n\n                  if (elementData && elementData.content && !elementData.sanitized) {\n                    toSanitize.push(elText);\n                    elementData.sanitized = true;\n                  }\n                }\n              }\n\n              menuFragment.appendChild(element);\n            }\n\n            if (that.options.sanitize && toSanitize.length) {\n              sanitizeHtml(toSanitize, that.options.whiteList, that.options.sanitizeFn);\n            }\n\n            if (isVirtual === true) {\n              marginTop = (that.selectpicker.view.position0 === 0 ? 0 : that.selectpicker.current.data[that.selectpicker.view.position0 - 1].position);\n              marginBottom = (that.selectpicker.view.position1 > size - 1 ? 0 : that.selectpicker.current.data[size - 1].position - that.selectpicker.current.data[that.selectpicker.view.position1 - 1].position);\n\n              menuInner.firstChild.style.marginTop = marginTop + 'px';\n              menuInner.firstChild.style.marginBottom = marginBottom + 'px';\n            } else {\n              menuInner.firstChild.style.marginTop = 0;\n              menuInner.firstChild.style.marginBottom = 0;\n            }\n\n            menuInner.firstChild.appendChild(menuFragment);\n\n            // if an option is encountered that is wider than the current menu width, update the menu width accordingly\n            // switch to ResizeObserver with increased browser support\n            if (isVirtual === true && that.sizeInfo.hasScrollBar) {\n              var menuInnerInnerWidth = menuInner.firstChild.offsetWidth;\n\n              if (init && menuInnerInnerWidth < that.sizeInfo.menuInnerInnerWidth && that.sizeInfo.totalMenuWidth > that.sizeInfo.selectWidth) {\n                menuInner.firstChild.style.minWidth = that.sizeInfo.menuInnerInnerWidth + 'px';\n              } else if (menuInnerInnerWidth > that.sizeInfo.menuInnerInnerWidth) {\n                // set to 0 to get actual width of menu\n                that.$menu[0].style.minWidth = 0;\n\n                var actualMenuWidth = menuInner.firstChild.offsetWidth;\n\n                if (actualMenuWidth > that.sizeInfo.menuInnerInnerWidth) {\n                  that.sizeInfo.menuInnerInnerWidth = actualMenuWidth;\n                  menuInner.firstChild.style.minWidth = that.sizeInfo.menuInnerInnerWidth + 'px';\n                }\n\n                // reset to default CSS styling\n                that.$menu[0].style.minWidth = '';\n              }\n            }\n          }\n\n          if ((!isSearching && that.options.source.data || isSearching && that.options.source.search) && that.selectpicker.current.hasMore && currentChunk === chunkCount - 1) {\n            // Don't load the next chunk until scrolling has started\n            // This prevents unnecessary requests while the user is typing if pageSize is <= chunkSize\n            if (scrollTop > 0) {\n              // Chunks use 0-based indexing, but pages use 1-based. Add 1 to convert and add 1 again to get next page\n              var page = Math.floor((currentChunk * that.options.chunkSize) / that.options.source.pageSize) + 2;\n\n              that.fetchData(function () {\n                that.render();\n                that.buildList(size, isSearching);\n                that.setPositionData();\n                scroll(scrollTop);\n              }, isSearching ? 'search' : 'data', page, isSearching ? that.selectpicker.search.previousValue : undefined);\n            }\n          }\n        }\n\n        that.prevActiveElement = that.activeElement;\n\n        if (!that.options.liveSearch) {\n          that.$menuInner.trigger('focus');\n        } else if (isSearching && init) {\n          var index = 0,\n              newActive;\n\n          if (!that.selectpicker.view.canHighlight[index]) {\n            index = 1 + that.selectpicker.view.canHighlight.slice(1).indexOf(true);\n          }\n\n          newActive = that.selectpicker.view.visibleElements[index];\n\n          that.defocusItem(that.selectpicker.view.currentActive);\n\n          that.activeElement = (that.selectpicker.current.data[index] || {}).element;\n\n          that.focusItem(newActive);\n        }\n      }\n\n      $(window)\n        .off('resize' + EVENT_KEY + '.' + this.selectId + '.createView')\n        .on('resize' + EVENT_KEY + '.' + this.selectId + '.createView', function () {\n          var isActive = that.$newElement.hasClass(classNames.SHOW);\n\n          if (isActive) scroll(that.$menuInner[0].scrollTop);\n        });\n    },\n\n    focusItem: function (li, liData, noStyle) {\n      if (li) {\n        liData = liData || this.selectpicker.current.data[this.selectpicker.current.elements.indexOf(this.activeElement)];\n        var a = li.firstChild;\n\n        if (a) {\n          a.setAttribute('aria-setsize', this.selectpicker.view.size);\n          a.setAttribute('aria-posinset', liData.posinset);\n\n          if (noStyle !== true) {\n            this.focusedParent.setAttribute('aria-activedescendant', a.id);\n            li.classList.add('active');\n            a.classList.add('active');\n          }\n        }\n      }\n    },\n\n    defocusItem: function (li) {\n      if (li) {\n        li.classList.remove('active');\n        if (li.firstChild) li.firstChild.classList.remove('active');\n      }\n    },\n\n    setPlaceholder: function () {\n      var that = this,\n          updateIndex = false;\n\n      if ((this.options.placeholder || this.options.allowClear) && !this.multiple) {\n        if (!this.selectpicker.view.titleOption) this.selectpicker.view.titleOption = document.createElement('option');\n\n        // this option doesn't create a new <li> element, but does add a new option at the start,\n        // so startIndex should increase to prevent having to check every option for the bs-title-option class\n        updateIndex = true;\n\n        var element = this.$element[0],\n            selectTitleOption = false,\n            titleNotAppended = !this.selectpicker.view.titleOption.parentNode,\n            selectedIndex = element.selectedIndex,\n            selectedOption = element.options[selectedIndex],\n            firstSelectable = element.querySelector('select > *:not(:disabled)'),\n            firstSelectableIndex = firstSelectable ? firstSelectable.index : 0,\n            navigation = window.performance && window.performance.getEntriesByType('navigation'),\n            // Safari doesn't support getEntriesByType('navigation') - fall back to performance.navigation\n            isNotBackForward = (navigation && navigation.length) ? navigation[0].type !== 'back_forward' : window.performance.navigation.type !== 2;\n\n        if (titleNotAppended) {\n          // Use native JS to prepend option (faster)\n          this.selectpicker.view.titleOption.className = 'bs-title-option';\n          this.selectpicker.view.titleOption.value = '';\n\n          // Check if selected or data-selected attribute is already set on an option. If not, select the titleOption option.\n          // the selected item may have been changed by user or programmatically before the bootstrap select plugin runs,\n          // if so, the select will have the data-selected attribute\n          selectTitleOption = !selectedOption || (selectedIndex === firstSelectableIndex && selectedOption.defaultSelected === false && this.$element.data('selected') === undefined);\n        }\n\n        if (titleNotAppended || this.selectpicker.view.titleOption.index !== 0) {\n          element.insertBefore(this.selectpicker.view.titleOption, element.firstChild);\n        }\n\n        // Set selected *after* appending to select,\n        // otherwise the option doesn't get selected in IE\n        // set using selectedIndex, as setting the selected attr to true here doesn't work in IE11\n        if (selectTitleOption && isNotBackForward) {\n          element.selectedIndex = 0;\n        } else if (document.readyState !== 'complete') {\n          // if navigation type is back_forward, there's a chance the select will have its value set by BFCache\n          // wait for that value to be set, then run render again\n          window.addEventListener('pageshow', function () {\n            if (that.selectpicker.view.displayedValue !== element.value) that.render();\n          });\n        }\n      }\n\n      return updateIndex;\n    },\n\n    fetchData: function (callback, type, page, searchValue) {\n      page = page || 1;\n      type = type || 'data';\n\n      var that = this,\n          data = this.options.source[type],\n          builtData;\n\n      if (data) {\n        this.options.virtualScroll = true;\n\n        if (typeof data === 'function') {\n          data.call(\n            this,\n            function (data, more, totalItems) {\n              var current = that.selectpicker[type === 'search' ? 'search' : 'main'];\n              current.hasMore = more;\n              current.totalItems = totalItems;\n              builtData = that.buildData(data, type);\n              callback.call(that, builtData);\n              that.$element.trigger('fetched' + EVENT_KEY);\n            },\n            page,\n            searchValue\n          );\n        } else if (Array.isArray(data)) {\n          builtData = that.buildData(data, type);\n          callback.call(that, builtData);\n        }\n      } else {\n        builtData = this.buildData(false, type);\n        callback.call(that, builtData);\n      }\n    },\n\n    buildData: function (data, type) {\n      var that = this;\n      var dataGetter = data === false ? getOptionData.fromOption : getOptionData.fromDataSource;\n\n      var optionSelector = ':not([hidden]):not([data-hidden=\"true\"]):not([style*=\"display: none\"])',\n          mainData = [],\n          startLen = this.selectpicker.main.data ? this.selectpicker.main.data.length : 0,\n          optID = 0,\n          startIndex = this.setPlaceholder() && !data ? 1 : 0; // append the titleOption if necessary and skip the first option in the loop\n\n      if (type === 'search') {\n        startLen = this.selectpicker.search.data.length;\n      }\n\n      if (this.options.hideDisabled) optionSelector += ':not(:disabled)';\n\n      var selectOptions = data ? data.filter(filterHidden, this) : this.$element[0].querySelectorAll('select > *' + optionSelector);\n\n      function addDivider (config) {\n        var previousData = mainData[mainData.length - 1];\n\n        // ensure optgroup doesn't create back-to-back dividers\n        if (\n          previousData &&\n          previousData.type === 'divider' &&\n          (previousData.optID || config.optID)\n        ) {\n          return;\n        }\n\n        config = config || {};\n        config.type = 'divider';\n\n        mainData.push(config);\n      }\n\n      function addOption (item, config) {\n        config = config || {};\n\n        config.divider = dataGetter(item, 'divider');\n\n        if (config.divider === true) {\n          addDivider({\n            optID: config.optID\n          });\n        } else {\n          var liIndex = mainData.length + startLen,\n              cssText = dataGetter(item, 'style'),\n              inlineStyle = cssText ? htmlEscape(cssText) : '',\n              optionClass = (item.className || '') + (config.optgroupClass || '');\n\n          if (config.optID) optionClass = 'opt ' + optionClass;\n\n          config.optionClass = optionClass.trim();\n          config.inlineStyle = inlineStyle;\n\n          config.text = dataGetter(item, 'text');\n          config.title = dataGetter(item, 'title');\n          config.content = dataGetter(item, 'content');\n          config.tokens = dataGetter(item, 'tokens');\n          config.subtext = dataGetter(item, 'subtext');\n          config.icon = dataGetter(item, 'icon');\n\n          config.display = config.content || config.text;\n          config.value = item.value === undefined ? item.text : item.value;\n          config.type = 'option';\n          config.index = liIndex;\n\n          config.option = !item.option ? item : item.option; // reference option element if it exists\n          config.option.liIndex = liIndex;\n          config.selected = !!item.selected;\n          config.disabled = config.disabled || !!item.disabled;\n\n          if (data !== false) {\n            if (that.selectpicker.optionValuesDataMap[config.value]) {\n              config = $.extend(that.selectpicker.optionValuesDataMap[config.value], config);\n            } else {\n              that.selectpicker.optionValuesDataMap[config.value] = config;\n            }\n          }\n\n          mainData.push(config);\n        }\n      }\n\n      function addOptgroup (index, selectOptions) {\n        var optgroup = selectOptions[index],\n            // skip placeholder option\n            previous = index - 1 < startIndex ? false : selectOptions[index - 1],\n            next = selectOptions[index + 1],\n            options = data ? optgroup.children.filter(filterHidden, this) : optgroup.querySelectorAll('option' + optionSelector);\n\n        if (!options.length) return;\n\n        var config = {\n              display: htmlEscape(dataGetter(item, 'label')),\n              subtext: dataGetter(optgroup, 'subtext'),\n              icon: dataGetter(optgroup, 'icon'),\n              type: 'optgroup-label',\n              optgroupClass: ' ' + (optgroup.className || ''),\n              optgroup: optgroup\n            },\n            headerIndex,\n            lastIndex;\n\n        optID++;\n\n        if (previous) {\n          addDivider({ optID: optID });\n        }\n\n        config.optID = optID;\n\n        mainData.push(config);\n\n        for (var j = 0, len = options.length; j < len; j++) {\n          var option = options[j];\n\n          if (j === 0) {\n            headerIndex = mainData.length - 1;\n            lastIndex = headerIndex + len;\n          }\n\n          addOption(option, {\n            headerIndex: headerIndex,\n            lastIndex: lastIndex,\n            optID: config.optID,\n            optgroupClass: config.optgroupClass,\n            disabled: optgroup.disabled\n          });\n        }\n\n        if (next) {\n          addDivider({ optID: optID });\n        }\n      }\n\n      for (var len = selectOptions.length, i = startIndex; i < len; i++) {\n        var item = selectOptions[i],\n            children = item.children;\n\n        if (children && children.length) {\n          addOptgroup.call(this, i, selectOptions);\n        } else {\n          addOption.call(this, item, {});\n        }\n      }\n\n      switch (type) {\n        case 'data': {\n          if (!this.selectpicker.main.data) {\n            this.selectpicker.main.data = [];\n          }\n          Array.prototype.push.apply(this.selectpicker.main.data, mainData);\n          this.selectpicker.current.data = this.selectpicker.main.data;\n          break;\n        }\n        case 'search': {\n          Array.prototype.push.apply(this.selectpicker.search.data, mainData);\n          break;\n        }\n      }\n\n      return mainData;\n    },\n\n    buildList: function (size, searching) {\n      var that = this,\n          selectData = searching ? this.selectpicker.search.data : this.selectpicker.main.data,\n          mainElements = [],\n          widestOptionLength = 0;\n\n      if ((that.options.showTick || that.multiple) && !elementTemplates.checkMark.parentNode) {\n        elementTemplates.checkMark.className = this.options.iconBase + ' ' + that.options.tickIcon + ' check-mark';\n        elementTemplates.a.appendChild(elementTemplates.checkMark);\n      }\n\n      function buildElement (mainElements, item) {\n        var liElement,\n            combinedLength = 0;\n\n        switch (item.type) {\n          case 'divider':\n            liElement = generateOption.li(\n              false,\n              classNames.DIVIDER,\n              (item.optID ? item.optID + 'div' : undefined)\n            );\n\n            break;\n\n          case 'option':\n            liElement = generateOption.li(\n              generateOption.a(\n                generateOption.text.call(that, item),\n                item.optionClass,\n                item.inlineStyle\n              ),\n              '',\n              item.optID\n            );\n\n            if (liElement.firstChild) {\n              liElement.firstChild.id = that.selectId + '-' + item.index;\n            }\n\n            break;\n\n          case 'optgroup-label':\n            liElement = generateOption.li(\n              generateOption.label.call(that, item),\n              'dropdown-header' + item.optgroupClass,\n              item.optID\n            );\n\n            break;\n        }\n\n        if (!item.element) {\n          item.element = liElement;\n        } else {\n          item.element.innerHTML = liElement.innerHTML;\n        }\n        mainElements.push(item.element);\n\n        // count the number of characters in the option - not perfect, but should work in most cases\n        if (item.display) combinedLength += item.display.length;\n        if (item.subtext) combinedLength += item.subtext.length;\n        // if there is an icon, ensure this option's width is checked\n        if (item.icon) combinedLength += 1;\n\n        if (combinedLength > widestOptionLength) {\n          widestOptionLength = combinedLength;\n\n          // guess which option is the widest\n          // use this when calculating menu width\n          // not perfect, but it's fast, and the width will be updating accordingly when scrolling\n          that.selectpicker.view.widestOption = mainElements[mainElements.length - 1];\n        }\n      }\n\n      var startIndex = size || 0;\n\n      for (var len = selectData.length, i = startIndex; i < len; i++) {\n        var item = selectData[i];\n\n        buildElement(mainElements, item);\n      }\n\n      if (size) {\n        if (searching) {\n          Array.prototype.push.apply(this.selectpicker.search.elements, mainElements);\n        } else {\n          Array.prototype.push.apply(this.selectpicker.main.elements, mainElements);\n          this.selectpicker.current.elements = this.selectpicker.main.elements;\n        }\n      } else {\n        if (searching) {\n          this.selectpicker.search.elements = mainElements;\n        } else {\n          this.selectpicker.main.elements = this.selectpicker.current.elements = mainElements;\n        }\n      }\n    },\n\n    findLis: function () {\n      return this.$menuInner.find('.inner > li');\n    },\n\n    render: function (init) {\n      var that = this,\n          element = this.$element[0],\n          // ensure titleOption is appended and selected (if necessary) before getting selectedOptions\n          placeholderSelected = this.setPlaceholder() && element.selectedIndex === 0,\n          selectedOptions = getSelectedOptions.call(this),\n          selectedCount = selectedOptions.length,\n          selectedValues = getSelectValues.call(this, selectedOptions),\n          button = this.$button[0],\n          buttonInner = button.querySelector('.filter-option-inner-inner'),\n          multipleSeparator = document.createTextNode(this.options.multipleSeparator),\n          titleFragment = elementTemplates.fragment.cloneNode(false),\n          showCount,\n          countMax,\n          hasContent = false;\n\n      function createSelected (item) {\n        if (item.selected) {\n          that.createOption(item, true);\n        } else if (item.children && item.children.length) {\n          item.children.map(createSelected);\n        }\n      }\n\n      // create selected option elements to ensure select value is correct\n      if (this.options.source.data && init) {\n        selectedOptions.map(createSelected);\n        element.appendChild(this.selectpicker.main.optionQueue);\n\n        if (placeholderSelected) placeholderSelected = element.selectedIndex === 0;\n      }\n\n      button.classList.toggle('bs-placeholder', that.multiple ? !selectedCount : !selectedValues && selectedValues !== 0);\n\n      if (!that.multiple && selectedOptions.length === 1) {\n        that.selectpicker.view.displayedValue = selectedValues;\n      }\n\n      if (this.options.selectedTextFormat === 'static') {\n        titleFragment = generateOption.text.call(this, { text: this.options.placeholder }, true);\n      } else {\n        showCount = this.multiple && this.options.selectedTextFormat.indexOf('count') !== -1 && selectedCount > 0;\n\n        // determine if the number of selected options will be shown (showCount === true)\n        if (showCount) {\n          countMax = this.options.selectedTextFormat.split('>');\n          showCount = (countMax.length > 1 && selectedCount > countMax[1]) || (countMax.length === 1 && selectedCount >= 2);\n        }\n\n        // only loop through all selected options if the count won't be shown\n        if (showCount === false) {\n          if (!placeholderSelected) {\n            for (var selectedIndex = 0; selectedIndex < selectedCount; selectedIndex++) {\n              if (selectedIndex < 50) {\n                var option = selectedOptions[selectedIndex],\n                    titleOptions = {};\n\n                if (option) {\n                  if (this.multiple && selectedIndex > 0) {\n                    titleFragment.appendChild(multipleSeparator.cloneNode(false));\n                  }\n\n                  if (option.title) {\n                    titleOptions.text = option.title;\n                  } else if (option.content && that.options.showContent) {\n                    titleOptions.content = option.content.toString();\n                    hasContent = true;\n                  } else {\n                    if (that.options.showIcon) {\n                      titleOptions.icon = option.icon;\n                    }\n                    if (that.options.showSubtext && !that.multiple && option.subtext) titleOptions.subtext = ' ' + option.subtext;\n                    titleOptions.text = option.text.trim();\n                  }\n\n                  titleFragment.appendChild(generateOption.text.call(this, titleOptions, true));\n                }\n              } else {\n                break;\n              }\n            }\n\n            // add ellipsis\n            if (selectedCount > 49) {\n              titleFragment.appendChild(document.createTextNode('...'));\n            }\n          }\n        } else {\n          var optionSelector = ':not([hidden]):not([data-hidden=\"true\"]):not([data-divider=\"true\"]):not([style*=\"display: none\"])';\n          if (this.options.hideDisabled) optionSelector += ':not(:disabled)';\n\n          // If this is a multiselect, and selectedTextFormat is count, then show 1 of 2 selected, etc.\n          var totalCount = this.$element[0].querySelectorAll('select > option' + optionSelector + ', optgroup' + optionSelector + ' option' + optionSelector).length,\n              tr8nText = (typeof this.options.countSelectedText === 'function') ? this.options.countSelectedText(selectedCount, totalCount) : this.options.countSelectedText;\n\n          titleFragment = generateOption.text.call(this, {\n            text: tr8nText.replace('{0}', selectedCount.toString()).replace('{1}', totalCount.toString())\n          }, true);\n        }\n      }\n\n      // If the select doesn't have a title, then use the default, or if nothing is set at all, use noneSelectedText\n      if (!titleFragment.childNodes.length) {\n        titleFragment = generateOption.text.call(this, {\n          text: this.options.placeholder ? this.options.placeholder : this.options.noneSelectedText\n        }, true);\n      }\n\n      // if the select has a title, apply it to the button, and if not, apply titleFragment text\n      // strip all HTML tags and trim the result, then unescape any escaped tags\n      button.title = titleFragment.textContent.replace(/<[^>]*>?/g, '').trim();\n\n      if (this.options.sanitize && hasContent) {\n        sanitizeHtml([titleFragment], that.options.whiteList, that.options.sanitizeFn);\n      }\n\n      buttonInner.innerHTML = '';\n      buttonInner.appendChild(titleFragment);\n\n      if (version.major < 4 && this.$newElement[0].classList.contains('bs3-has-addon')) {\n        var filterExpand = button.querySelector('.filter-expand'),\n            clone = buttonInner.cloneNode(true);\n\n        clone.className = 'filter-expand';\n\n        if (filterExpand) {\n          button.replaceChild(clone, filterExpand);\n        } else {\n          button.appendChild(clone);\n        }\n      }\n\n      this.$element.trigger('rendered' + EVENT_KEY);\n    },\n\n    /**\n     * @param [style]\n     * @param [status]\n     */\n    setStyle: function (newStyle, status) {\n      var button = this.$button[0],\n          newElement = this.$newElement[0],\n          style = this.options.style.trim(),\n          buttonClass;\n\n      if (this.$element.attr('class')) {\n        this.$newElement.addClass(this.$element.attr('class').replace(/selectpicker|mobile-device|bs-select-hidden|validate\\[.*\\]/gi, ''));\n      }\n\n      if (version.major < 4) {\n        newElement.classList.add('bs3');\n\n        if (newElement.parentNode.classList && newElement.parentNode.classList.contains('input-group') &&\n            (newElement.previousElementSibling || newElement.nextElementSibling) &&\n            (newElement.previousElementSibling || newElement.nextElementSibling).classList.contains('input-group-addon')\n        ) {\n          newElement.classList.add('bs3-has-addon');\n        }\n      }\n\n      if (newStyle) {\n        buttonClass = newStyle.trim();\n      } else {\n        buttonClass = style;\n      }\n\n      if (status == 'add') {\n        if (buttonClass) button.classList.add.apply(button.classList, buttonClass.split(' '));\n      } else if (status == 'remove') {\n        if (buttonClass) button.classList.remove.apply(button.classList, buttonClass.split(' '));\n      } else {\n        if (style) button.classList.remove.apply(button.classList, style.split(' '));\n        if (buttonClass) button.classList.add.apply(button.classList, buttonClass.split(' '));\n      }\n    },\n\n    liHeight: function (refresh) {\n      if (!refresh && (this.options.size === false || Object.keys(this.sizeInfo).length)) return;\n\n      var newElement = elementTemplates.div.cloneNode(false),\n          menu = elementTemplates.div.cloneNode(false),\n          menuInner = elementTemplates.div.cloneNode(false),\n          menuInnerInner = document.createElement('ul'),\n          divider = elementTemplates.li.cloneNode(false),\n          dropdownHeader = elementTemplates.li.cloneNode(false),\n          li,\n          a = elementTemplates.a.cloneNode(false),\n          text = elementTemplates.span.cloneNode(false),\n          header = this.options.header && this.$menu.find('.' + classNames.POPOVERHEADER).length > 0 ? this.$menu.find('.' + classNames.POPOVERHEADER)[0].cloneNode(true) : null,\n          search = this.options.liveSearch ? elementTemplates.div.cloneNode(false) : null,\n          actions = this.options.actionsBox && this.multiple && this.$menu.find('.bs-actionsbox').length > 0 ? this.$menu.find('.bs-actionsbox')[0].cloneNode(true) : null,\n          doneButton = this.options.doneButton && this.multiple && this.$menu.find('.bs-donebutton').length > 0 ? this.$menu.find('.bs-donebutton')[0].cloneNode(true) : null,\n          firstOption = this.$element[0].options[0];\n\n      this.sizeInfo.selectWidth = this.$newElement[0].offsetWidth;\n\n      text.className = 'text';\n      a.className = 'dropdown-item ' + (firstOption ? firstOption.className : '');\n      newElement.className = this.$menu[0].parentNode.className + ' ' + classNames.SHOW;\n      newElement.style.width = 0; // ensure button width doesn't affect natural width of menu when calculating\n      if (this.options.width === 'auto') menu.style.minWidth = 0;\n      menu.className = classNames.MENU + ' ' + classNames.SHOW;\n      menuInner.className = 'inner ' + classNames.SHOW;\n      menuInnerInner.className = classNames.MENU + ' inner ' + (version.major >= '4' ? classNames.SHOW : '');\n      divider.className = classNames.DIVIDER;\n      dropdownHeader.className = 'dropdown-header';\n\n      text.appendChild(document.createTextNode('\\u200b'));\n\n      if (this.selectpicker.current.data.length) {\n        for (var i = 0; i < this.selectpicker.current.data.length; i++) {\n          var data = this.selectpicker.current.data[i];\n          if (data.type === 'option' && $(data.element.firstChild).css('display') !== 'none') {\n            li = data.element;\n            break;\n          }\n        }\n      } else {\n        li = elementTemplates.li.cloneNode(false);\n        a.appendChild(text);\n        li.appendChild(a);\n      }\n\n      dropdownHeader.appendChild(text.cloneNode(true));\n\n      if (this.selectpicker.view.widestOption) {\n        menuInnerInner.appendChild(this.selectpicker.view.widestOption.cloneNode(true));\n      }\n\n      menuInnerInner.appendChild(li);\n      menuInnerInner.appendChild(divider);\n      menuInnerInner.appendChild(dropdownHeader);\n      if (header) menu.appendChild(header);\n      if (search) {\n        var input = document.createElement('input');\n        search.className = 'bs-searchbox';\n        input.className = 'form-control';\n        search.appendChild(input);\n        menu.appendChild(search);\n      }\n      if (actions) menu.appendChild(actions);\n      menuInner.appendChild(menuInnerInner);\n      menu.appendChild(menuInner);\n      if (doneButton) menu.appendChild(doneButton);\n      newElement.appendChild(menu);\n\n      document.body.appendChild(newElement);\n\n      var liHeight = li.offsetHeight,\n          dropdownHeaderHeight = dropdownHeader ? dropdownHeader.offsetHeight : 0,\n          headerHeight = header ? header.offsetHeight : 0,\n          searchHeight = search ? search.offsetHeight : 0,\n          actionsHeight = actions ? actions.offsetHeight : 0,\n          doneButtonHeight = doneButton ? doneButton.offsetHeight : 0,\n          dividerHeight = $(divider).outerHeight(true),\n          menuStyle = window.getComputedStyle(menu),\n          menuWidth = menu.offsetWidth,\n          menuPadding = {\n            vert: toInteger(menuStyle.paddingTop) +\n                  toInteger(menuStyle.paddingBottom) +\n                  toInteger(menuStyle.borderTopWidth) +\n                  toInteger(menuStyle.borderBottomWidth),\n            horiz: toInteger(menuStyle.paddingLeft) +\n                  toInteger(menuStyle.paddingRight) +\n                  toInteger(menuStyle.borderLeftWidth) +\n                  toInteger(menuStyle.borderRightWidth)\n          },\n          menuExtras = {\n            vert: menuPadding.vert +\n                  toInteger(menuStyle.marginTop) +\n                  toInteger(menuStyle.marginBottom) + 2,\n            horiz: menuPadding.horiz +\n                  toInteger(menuStyle.marginLeft) +\n                  toInteger(menuStyle.marginRight) + 2\n          },\n          scrollBarWidth;\n\n      menuInner.style.overflowY = 'scroll';\n\n      scrollBarWidth = menu.offsetWidth - menuWidth;\n\n      document.body.removeChild(newElement);\n\n      this.sizeInfo.liHeight = liHeight;\n      this.sizeInfo.dropdownHeaderHeight = dropdownHeaderHeight;\n      this.sizeInfo.headerHeight = headerHeight;\n      this.sizeInfo.searchHeight = searchHeight;\n      this.sizeInfo.actionsHeight = actionsHeight;\n      this.sizeInfo.doneButtonHeight = doneButtonHeight;\n      this.sizeInfo.dividerHeight = dividerHeight;\n      this.sizeInfo.menuPadding = menuPadding;\n      this.sizeInfo.menuExtras = menuExtras;\n      this.sizeInfo.menuWidth = menuWidth;\n      this.sizeInfo.menuInnerInnerWidth = menuWidth - menuPadding.horiz;\n      this.sizeInfo.totalMenuWidth = this.sizeInfo.menuWidth;\n      this.sizeInfo.scrollBarWidth = scrollBarWidth;\n      this.sizeInfo.selectHeight = this.$newElement[0].offsetHeight;\n\n      this.setPositionData();\n    },\n\n    getSelectPosition: function () {\n      var that = this,\n          $window = $(window),\n          pos = that.$newElement.offset(),\n          $container = $(that.options.container),\n          containerPos;\n\n      if (that.options.container && $container.length && !$container.is('body')) {\n        containerPos = $container.offset();\n        containerPos.top += parseInt($container.css('borderTopWidth'));\n        containerPos.left += parseInt($container.css('borderLeftWidth'));\n      } else {\n        containerPos = { top: 0, left: 0 };\n      }\n\n      var winPad = that.options.windowPadding;\n\n      this.sizeInfo.selectOffsetTop = pos.top - containerPos.top - $window.scrollTop();\n      this.sizeInfo.selectOffsetBot = $window.height() - this.sizeInfo.selectOffsetTop - this.sizeInfo.selectHeight - containerPos.top - winPad[2];\n      this.sizeInfo.selectOffsetLeft = pos.left - containerPos.left - $window.scrollLeft();\n      this.sizeInfo.selectOffsetRight = $window.width() - this.sizeInfo.selectOffsetLeft - this.sizeInfo.selectWidth - containerPos.left - winPad[1];\n      this.sizeInfo.selectOffsetTop -= winPad[0];\n      this.sizeInfo.selectOffsetLeft -= winPad[3];\n    },\n\n    setMenuSize: function (isAuto) {\n      this.getSelectPosition();\n\n      var selectWidth = this.sizeInfo.selectWidth,\n          liHeight = this.sizeInfo.liHeight,\n          headerHeight = this.sizeInfo.headerHeight,\n          searchHeight = this.sizeInfo.searchHeight,\n          actionsHeight = this.sizeInfo.actionsHeight,\n          doneButtonHeight = this.sizeInfo.doneButtonHeight,\n          divHeight = this.sizeInfo.dividerHeight,\n          menuPadding = this.sizeInfo.menuPadding,\n          menuInnerHeight,\n          menuHeight,\n          divLength = 0,\n          minHeight,\n          _minHeight,\n          maxHeight,\n          menuInnerMinHeight,\n          estimate,\n          isDropup;\n\n      if (this.options.dropupAuto) {\n        // Get the estimated height of the menu without scrollbars.\n        // This is useful for smaller menus, where there might be plenty of room\n        // below the button without setting dropup, but we can't know\n        // the exact height of the menu until createView is called later\n        estimate = liHeight * this.selectpicker.current.data.length + menuPadding.vert;\n\n        isDropup = this.sizeInfo.selectOffsetTop - this.sizeInfo.selectOffsetBot > this.sizeInfo.menuExtras.vert && estimate + this.sizeInfo.menuExtras.vert + 50 > this.sizeInfo.selectOffsetBot;\n\n        // ensure dropup doesn't change while searching (so menu doesn't bounce back and forth)\n        if (this.selectpicker.isSearching === true) {\n          isDropup = this.selectpicker.dropup;\n        }\n\n        this.$newElement.toggleClass(classNames.DROPUP, isDropup);\n        this.selectpicker.dropup = isDropup;\n      }\n\n      if (this.options.size === 'auto') {\n        _minHeight = this.selectpicker.current.data.length > 3 ? this.sizeInfo.liHeight * 3 + this.sizeInfo.menuExtras.vert - 2 : 0;\n        menuHeight = this.sizeInfo.selectOffsetBot - this.sizeInfo.menuExtras.vert;\n        minHeight = _minHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight;\n        menuInnerMinHeight = Math.max(_minHeight - menuPadding.vert, 0);\n\n        if (this.$newElement.hasClass(classNames.DROPUP)) {\n          menuHeight = this.sizeInfo.selectOffsetTop - this.sizeInfo.menuExtras.vert;\n        }\n\n        maxHeight = menuHeight;\n        menuInnerHeight = menuHeight - headerHeight - searchHeight - actionsHeight - doneButtonHeight - menuPadding.vert;\n      } else if (this.options.size && this.options.size != 'auto' && this.selectpicker.current.elements.length > this.options.size) {\n        for (var i = 0; i < this.options.size; i++) {\n          if (this.selectpicker.current.data[i].type === 'divider') divLength++;\n        }\n\n        menuHeight = liHeight * this.options.size + divLength * divHeight + menuPadding.vert;\n        menuInnerHeight = menuHeight - menuPadding.vert;\n        maxHeight = menuHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight;\n        minHeight = menuInnerMinHeight = '';\n      }\n\n      this.$menu.css({\n        'max-height': maxHeight + 'px',\n        'overflow': 'hidden',\n        'min-height': minHeight + 'px'\n      });\n\n      this.$menuInner.css({\n        'max-height': menuInnerHeight + 'px',\n        'overflow': 'hidden auto',\n        'min-height': menuInnerMinHeight + 'px'\n      });\n\n      // ensure menuInnerHeight is always a positive number to prevent issues calculating chunkSize in createView\n      this.sizeInfo.menuInnerHeight = Math.max(menuInnerHeight, 1);\n\n      if (this.selectpicker.current.data.length && this.selectpicker.current.data[this.selectpicker.current.data.length - 1].position > this.sizeInfo.menuInnerHeight) {\n        this.sizeInfo.hasScrollBar = true;\n        this.sizeInfo.totalMenuWidth = this.sizeInfo.menuWidth + this.sizeInfo.scrollBarWidth;\n      }\n\n      if (this.options.dropdownAlignRight === 'auto') {\n        this.$menu.toggleClass(classNames.MENURIGHT, this.sizeInfo.selectOffsetLeft > this.sizeInfo.selectOffsetRight && this.sizeInfo.selectOffsetRight < (this.sizeInfo.totalMenuWidth - selectWidth));\n      }\n\n      if (this.dropdown && this.dropdown._popper) this.dropdown._popper.update();\n    },\n\n    setSize: function (refresh) {\n      this.liHeight(refresh);\n\n      if (this.options.header) this.$menu.css('padding-top', 0);\n\n      if (this.options.size !== false) {\n        var that = this,\n            $window = $(window);\n\n        this.setMenuSize();\n\n        if (this.options.liveSearch) {\n          this.$searchbox\n            .off('input.setMenuSize propertychange.setMenuSize')\n            .on('input.setMenuSize propertychange.setMenuSize', function () {\n              return that.setMenuSize();\n            });\n        }\n\n        if (this.options.size === 'auto') {\n          $window\n            .off('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize')\n            .on('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize', function () {\n              return that.setMenuSize();\n            });\n        } else if (this.options.size && this.options.size != 'auto' && this.selectpicker.current.elements.length > this.options.size) {\n          $window.off('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize');\n        }\n      }\n\n      this.createView(false, true, refresh);\n    },\n\n    setWidth: function () {\n      var that = this;\n\n      if (this.options.width === 'auto') {\n        requestAnimationFrame(function () {\n          that.$menu.css('min-width', '0');\n\n          that.$element.on('loaded' + EVENT_KEY, function () {\n            that.liHeight();\n            that.setMenuSize();\n\n            // Get correct width if element is hidden\n            var $selectClone = that.$newElement.clone().appendTo('body'),\n                btnWidth = $selectClone.css('width', 'auto').children('button').outerWidth();\n\n            $selectClone.remove();\n\n            // Set width to whatever's larger, button title or longest option\n            that.sizeInfo.selectWidth = Math.max(that.sizeInfo.totalMenuWidth, btnWidth);\n            that.$newElement.css('width', that.sizeInfo.selectWidth + 'px');\n          });\n        });\n      } else if (this.options.width === 'fit') {\n        // Remove inline min-width so width can be changed from 'auto'\n        this.$menu.css('min-width', '');\n        this.$newElement.css('width', '').addClass('fit-width');\n      } else if (this.options.width) {\n        // Remove inline min-width so width can be changed from 'auto'\n        this.$menu.css('min-width', '');\n        this.$newElement.css('width', this.options.width);\n      } else {\n        // Remove inline min-width/width so width can be changed\n        this.$menu.css('min-width', '');\n        this.$newElement.css('width', '');\n      }\n      // Remove fit-width class if width is changed programmatically\n      if (this.$newElement.hasClass('fit-width') && this.options.width !== 'fit') {\n        this.$newElement[0].classList.remove('fit-width');\n      }\n    },\n\n    selectPosition: function () {\n      this.$bsContainer = $('<div class=\"bs-container\" />');\n\n      var that = this,\n          $container = $(this.options.container),\n          pos,\n          containerPos,\n          actualHeight,\n          getPlacement = function ($element) {\n            var containerPosition = {},\n                // fall back to dropdown's default display setting if display is not manually set\n                display = that.options.display || (\n                  // Bootstrap 3 doesn't have $.fn.dropdown.Constructor.Default\n                  $.fn.dropdown.Constructor.Default ? $.fn.dropdown.Constructor.Default.display\n                  : false\n                );\n\n            that.$bsContainer.addClass($element.attr('class').replace(/form-control|fit-width/gi, '')).toggleClass(classNames.DROPUP, $element.hasClass(classNames.DROPUP));\n            pos = $element.offset();\n\n            if (!$container.is('body')) {\n              containerPos = $container.offset();\n              containerPos.top += parseInt($container.css('borderTopWidth')) - $container.scrollTop();\n              containerPos.left += parseInt($container.css('borderLeftWidth')) - $container.scrollLeft();\n            } else {\n              containerPos = { top: 0, left: 0 };\n            }\n\n            actualHeight = $element.hasClass(classNames.DROPUP) ? 0 : $element[0].offsetHeight;\n\n            // Bootstrap 4+ uses Popper for menu positioning\n            if (version.major < 4 || display === 'static') {\n              containerPosition.top = pos.top - containerPos.top + actualHeight;\n              containerPosition.left = pos.left - containerPos.left;\n            }\n\n            containerPosition.width = $element[0].offsetWidth;\n\n            that.$bsContainer.css(containerPosition);\n          };\n\n      this.$button.on('click.bs.dropdown.data-api', function () {\n        if (that.isDisabled()) {\n          return;\n        }\n\n        getPlacement(that.$newElement);\n\n        that.$bsContainer\n          .appendTo(that.options.container)\n          .toggleClass(classNames.SHOW, !that.$button.hasClass(classNames.SHOW))\n          .append(that.$menu);\n      });\n\n      $(window)\n        .off('resize' + EVENT_KEY + '.' + this.selectId + ' scroll' + EVENT_KEY + '.' + this.selectId)\n        .on('resize' + EVENT_KEY + '.' + this.selectId + ' scroll' + EVENT_KEY + '.' + this.selectId, function () {\n          var isActive = that.$newElement.hasClass(classNames.SHOW);\n\n          if (isActive) getPlacement(that.$newElement);\n        });\n\n      this.$element.on('hide' + EVENT_KEY, function () {\n        that.$menu.data('height', that.$menu.height());\n        that.$bsContainer.detach();\n      });\n    },\n\n    createOption: function (data, init) {\n      var optionData = !data.option ? data : data.option;\n\n      if (optionData && optionData.nodeType !== 1) {\n        var option = (init ? elementTemplates.selectedOption : elementTemplates.option).cloneNode(true);\n        if (optionData.value !== undefined) option.value = optionData.value;\n        option.textContent = optionData.text;\n\n        option.selected = true;\n\n        if (optionData.liIndex !== undefined) {\n          option.liIndex = optionData.liIndex;\n        } else if (!init) {\n          option.liIndex = data.index;\n        }\n\n        data.option = option;\n\n        this.selectpicker.main.optionQueue.appendChild(option);\n      }\n    },\n\n    setOptionStatus: function (selectedOnly) {\n      var that = this;\n\n      that.noScroll = false;\n\n      if (that.selectpicker.view.visibleElements && that.selectpicker.view.visibleElements.length) {\n        for (var i = 0; i < that.selectpicker.view.visibleElements.length; i++) {\n          var liData = that.selectpicker.current.data[i + that.selectpicker.view.position0],\n              option = liData.option;\n\n          if (option) {\n            if (selectedOnly !== true) {\n              that.setDisabled(liData);\n            }\n\n            that.setSelected(liData);\n          }\n        }\n\n        // append optionQueue (documentFragment with option elements for select options)\n        if (this.options.source.data) this.$element[0].appendChild(this.selectpicker.main.optionQueue);\n      }\n    },\n\n    /**\n     * @param {Object} liData - the option object that is being changed\n     * @param {boolean} selected - true if the option is being selected, false if being deselected\n     */\n    setSelected: function (liData, selected) {\n      selected = selected === undefined ? liData.selected : selected;\n\n      var li = liData.element,\n          activeElementIsSet = this.activeElement !== undefined,\n          thisIsActive = this.activeElement === li,\n          prevActive,\n          a,\n          // if current option is already active\n          // OR\n          // if the current option is being selected, it's NOT multiple, and\n          // activeElement is undefined:\n          //  - when the menu is first being opened, OR\n          //  - after a search has been performed, OR\n          //  - when retainActive is false when selecting a new option (i.e. index of the newly selected option is not the same as the current activeElement)\n          keepActive = thisIsActive || (selected && !this.multiple && !activeElementIsSet);\n\n      if (!li) return;\n\n      if (selected !== undefined) {\n        liData.selected = selected;\n        if (liData.option) liData.option.selected = selected;\n      }\n\n      if (selected && this.options.source.data) {\n        this.createOption(liData, false);\n      }\n\n      a = li.firstChild;\n\n      if (selected) {\n        this.selectedElement = li;\n      }\n\n      li.classList.toggle('selected', selected);\n\n      if (keepActive) {\n        this.focusItem(li, liData);\n        this.selectpicker.view.currentActive = li;\n        this.activeElement = li;\n      } else {\n        this.defocusItem(li);\n      }\n\n      if (a) {\n        a.classList.toggle('selected', selected);\n\n        if (selected) {\n          a.setAttribute('aria-selected', true);\n        } else {\n          if (this.multiple) {\n            a.setAttribute('aria-selected', false);\n          } else {\n            a.removeAttribute('aria-selected');\n          }\n        }\n      }\n\n      if (!keepActive && !activeElementIsSet && selected && this.prevActiveElement !== undefined) {\n        prevActive = this.prevActiveElement;\n\n        this.defocusItem(prevActive);\n      }\n    },\n\n    /**\n     * @param {number} index - the index of the option that is being disabled\n     * @param {boolean} disabled - true if the option is being disabled, false if being enabled\n     */\n    setDisabled: function (liData) {\n      var disabled = liData.disabled,\n          li = liData.element,\n          a;\n\n      if (!li) return;\n\n      a = li.firstChild;\n\n      li.classList.toggle(classNames.DISABLED, disabled);\n\n      if (a) {\n        if (version.major >= '4') a.classList.toggle(classNames.DISABLED, disabled);\n\n        if (disabled) {\n          a.setAttribute('aria-disabled', disabled);\n          a.setAttribute('tabindex', -1);\n        } else {\n          a.removeAttribute('aria-disabled');\n          a.setAttribute('tabindex', 0);\n        }\n      }\n    },\n\n    isDisabled: function () {\n      return this.$element[0].disabled;\n    },\n\n    checkDisabled: function () {\n      if (this.isDisabled()) {\n        this.$newElement[0].classList.add(classNames.DISABLED);\n        this.$button.addClass(classNames.DISABLED).attr('aria-disabled', true);\n      } else {\n        if (this.$button[0].classList.contains(classNames.DISABLED)) {\n          this.$newElement[0].classList.remove(classNames.DISABLED);\n          this.$button.removeClass(classNames.DISABLED).attr('aria-disabled', false);\n        }\n      }\n    },\n\n    clickListener: function () {\n      var that = this,\n          $document = $(document);\n\n      $document.data('spaceSelect', false);\n\n      this.$button.on('keyup', function (e) {\n        if (/(32)/.test(e.keyCode.toString(10)) && $document.data('spaceSelect')) {\n          e.preventDefault();\n          $document.data('spaceSelect', false);\n        }\n      });\n\n      this.$newElement.on('show.bs.dropdown', function () {\n        if (!that.dropdown && version.major === '4') {\n          that.dropdown = that.$button.data('bs.dropdown');\n          that.dropdown._menu = that.$menu[0];\n        }\n      });\n\n      function clearSelection (e) {\n        if (that.multiple) {\n          that.deselectAll();\n        } else {\n          var element = that.$element[0],\n              prevValue = element.value,\n              prevIndex = element.selectedIndex,\n              prevOption = element.options[prevIndex],\n              prevData = prevOption ? that.selectpicker.main.data[prevOption.liIndex] : false;\n\n          if (prevData) {\n            that.setSelected(prevData, false);\n          }\n\n          element.selectedIndex = 0;\n\n          changedArguments = [prevIndex, false, prevValue];\n          that.$element.triggerNative('change');\n        }\n\n        // remove selected styling if menu is open\n        if (that.$newElement.hasClass(classNames.SHOW)) {\n          if (that.options.liveSearch) {\n            that.$searchbox.trigger('focus');\n          }\n\n          that.createView(false);\n        }\n      }\n\n      this.$button.on('click.bs.dropdown.data-api', function (e) {\n        if (that.options.allowClear) {\n          var target = e.target,\n              clearButton = that.$clearButton[0];\n\n          // IE doesn't support event listeners on child elements of buttons\n          if (/MSIE|Trident/.test(window.navigator.userAgent)) {\n            target = document.elementFromPoint(e.clientX, e.clientY);\n          }\n\n          if (target === clearButton || target.parentElement === clearButton) {\n            e.stopImmediatePropagation();\n            clearSelection(e);\n          }\n        }\n\n        if (!that.$newElement.hasClass(classNames.SHOW)) {\n          that.setSize();\n        }\n      });\n\n      function setFocus () {\n        if (that.options.liveSearch) {\n          that.$searchbox.trigger('focus');\n        } else {\n          that.$menuInner.trigger('focus');\n        }\n      }\n\n      function checkPopperExists () {\n        if (that.dropdown && that.dropdown._popper && that.dropdown._popper.state) {\n          setFocus();\n        } else {\n          requestAnimationFrame(checkPopperExists);\n        }\n      }\n\n      this.$element.on('shown' + EVENT_KEY, function () {\n        if (that.$menuInner[0].scrollTop !== that.selectpicker.view.scrollTop) {\n          that.$menuInner[0].scrollTop = that.selectpicker.view.scrollTop;\n        }\n\n        if (version.major > 3) {\n          requestAnimationFrame(checkPopperExists);\n        } else {\n          setFocus();\n        }\n      });\n\n      // ensure posinset and setsize are correct before selecting an option via a click\n      this.$menuInner.on('mouseenter', 'li a', function (e) {\n        var hoverLi = this.parentElement,\n            position0 = that.isVirtual() ? that.selectpicker.view.position0 : 0,\n            index = Array.prototype.indexOf.call(hoverLi.parentElement.children, hoverLi),\n            hoverData = that.selectpicker.current.data[index + position0];\n\n        that.focusItem(hoverLi, hoverData, true);\n      });\n\n      this.$menuInner.on('click', 'li a', function (e, retainActive) {\n        var $this = $(this),\n            element = that.$element[0],\n            position0 = that.isVirtual() ? that.selectpicker.view.position0 : 0,\n            clickedData = that.selectpicker.current.data[$this.parent().index() + position0],\n            clickedElement = clickedData.element,\n            prevValue = getSelectValues.call(that),\n            prevIndex = element.selectedIndex,\n            prevOption = element.options[prevIndex],\n            prevData = prevOption ? that.selectpicker.main.data[prevOption.liIndex] : false,\n            triggerChange = true;\n\n        // Don't close on multi choice menu\n        if (that.multiple && that.options.maxOptions !== 1) {\n          e.stopPropagation();\n        }\n\n        e.preventDefault();\n\n        // Don't run if the select is disabled\n        if (!that.isDisabled() && !$this.parent().hasClass(classNames.DISABLED)) {\n          var option = clickedData.option,\n              $option = $(option),\n              state = option.selected,\n              optgroupData = that.selectpicker.current.data.find(function (datum) {\n                return datum.optID === clickedData.optID && datum.type === 'optgroup-label';\n              }),\n              optgroup = optgroupData ? optgroupData.optgroup : undefined,\n              dataGetter = optgroup instanceof Element ? getOptionData.fromOption : getOptionData.fromDataSource,\n              optgroupOptions = optgroup && optgroup.children,\n              maxOptions = parseInt(that.options.maxOptions),\n              maxOptionsGrp = optgroup && parseInt(dataGetter(optgroup, 'maxOptions')) || false;\n\n          if (clickedElement === that.activeElement) retainActive = true;\n\n          if (!retainActive) {\n            that.prevActiveElement = that.activeElement;\n            that.activeElement = undefined;\n          }\n\n          if (!that.multiple || maxOptions === 1) { // Deselect previous option if not multi select\n            if (prevData) that.setSelected(prevData, false);\n            that.setSelected(clickedData, true);\n          } else { // Toggle the clicked option if multi select.\n            that.setSelected(clickedData, !state);\n            that.focusedParent.focus();\n\n            if (maxOptions !== false || maxOptionsGrp !== false) {\n              var maxReached = maxOptions < getSelectedOptions.call(that).length,\n                  selectedGroupOptions = 0;\n\n              if (optgroup && optgroup.children) {\n                for (var i = 0; i < optgroup.children.length; i++) {\n                  if (optgroup.children[i].selected) selectedGroupOptions++;\n                }\n              }\n\n              var maxReachedGrp = maxOptionsGrp < selectedGroupOptions;\n\n              if ((maxOptions && maxReached) || (maxOptionsGrp && maxReachedGrp)) {\n                if (maxOptions && maxOptions === 1) {\n                  element.selectedIndex = -1;\n                  that.setOptionStatus(true);\n                } else if (maxOptionsGrp && maxOptionsGrp === 1) {\n                  for (var i = 0; i < optgroupOptions.length; i++) {\n                    var _option = optgroupOptions[i];\n                    that.setSelected(that.selectpicker.current.data[_option.liIndex], false);\n                  }\n\n                  that.setSelected(clickedData, true);\n                } else {\n                  var maxOptionsText = typeof that.options.maxOptionsText === 'string' ? [that.options.maxOptionsText, that.options.maxOptionsText] : that.options.maxOptionsText,\n                      maxOptionsArr = typeof maxOptionsText === 'function' ? maxOptionsText(maxOptions, maxOptionsGrp) : maxOptionsText,\n                      maxTxt = maxOptionsArr[0].replace('{n}', maxOptions),\n                      maxTxtGrp = maxOptionsArr[1].replace('{n}', maxOptionsGrp),\n                      $notify = $('<div class=\"notify\"></div>');\n                  // If {var} is set in array, replace it\n                  /** @deprecated */\n                  if (maxOptionsArr[2]) {\n                    maxTxt = maxTxt.replace('{var}', maxOptionsArr[2][maxOptions > 1 ? 0 : 1]);\n                    maxTxtGrp = maxTxtGrp.replace('{var}', maxOptionsArr[2][maxOptionsGrp > 1 ? 0 : 1]);\n                  }\n\n                  that.$menu.append($notify);\n\n                  if (maxOptions && maxReached) {\n                    $notify.append($('<div>' + maxTxt + '</div>'));\n                    triggerChange = false;\n                    that.$element.trigger('maxReached' + EVENT_KEY);\n                  }\n\n                  if (maxOptionsGrp && maxReachedGrp) {\n                    $notify.append($('<div>' + maxTxtGrp + '</div>'));\n                    triggerChange = false;\n                    that.$element.trigger('maxReachedGrp' + EVENT_KEY);\n                  }\n\n                  setTimeout(function () {\n                    that.setSelected(clickedData, false);\n                  }, 10);\n\n                  $notify[0].classList.add('fadeOut');\n\n                  setTimeout(function () {\n                    $notify.remove();\n                  }, 1050);\n                }\n              }\n            }\n          }\n\n          if (that.options.source.data) that.$element[0].appendChild(that.selectpicker.main.optionQueue);\n\n          if (!that.multiple || (that.multiple && that.options.maxOptions === 1)) {\n            that.$button.trigger('focus');\n          } else if (that.options.liveSearch) {\n            that.$searchbox.trigger('focus');\n          }\n\n          // Trigger select 'change'\n          if (triggerChange) {\n            if (that.multiple || prevIndex !== element.selectedIndex) {\n              // $option.prop('selected') is current option state (selected/unselected). prevValue is the value of the select prior to being changed.\n              changedArguments = [option.index, $option.prop('selected'), prevValue];\n              that.$element\n                .triggerNative('change');\n            }\n          }\n        }\n      });\n\n      this.$menu.on('click', 'li.' + classNames.DISABLED + ' a, .' + classNames.POPOVERHEADER + ', .' + classNames.POPOVERHEADER + ' :not(.close)', function (e) {\n        if (e.currentTarget == this) {\n          e.preventDefault();\n          e.stopPropagation();\n          if (that.options.liveSearch && !$(e.target).hasClass('close')) {\n            that.$searchbox.trigger('focus');\n          } else {\n            that.$button.trigger('focus');\n          }\n        }\n      });\n\n      this.$menuInner.on('click', '.divider, .dropdown-header', function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (that.options.liveSearch) {\n          that.$searchbox.trigger('focus');\n        } else {\n          that.$button.trigger('focus');\n        }\n      });\n\n      this.$menu.on('click', '.' + classNames.POPOVERHEADER + ' .close', function () {\n        that.$button.trigger('click');\n      });\n\n      this.$searchbox.on('click', function (e) {\n        e.stopPropagation();\n      });\n\n      this.$menu.on('click', '.actions-btn', function (e) {\n        if (that.options.liveSearch) {\n          that.$searchbox.trigger('focus');\n        } else {\n          that.$button.trigger('focus');\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n\n        if ($(this).hasClass('bs-select-all')) {\n          that.selectAll();\n        } else {\n          that.deselectAll();\n        }\n      });\n\n      this.$button\n        .on('focus' + EVENT_KEY, function (e) {\n          var tabindex = that.$element[0].getAttribute('tabindex');\n\n          // only change when button is actually focused\n          if (tabindex !== undefined && e.originalEvent && e.originalEvent.isTrusted) {\n            // apply select element's tabindex to ensure correct order is followed when tabbing to the next element\n            this.setAttribute('tabindex', tabindex);\n            // set element's tabindex to -1 to allow for reverse tabbing\n            that.$element[0].setAttribute('tabindex', -1);\n            that.selectpicker.view.tabindex = tabindex;\n          }\n        })\n        .on('blur' + EVENT_KEY, function (e) {\n          // revert everything to original tabindex\n          if (that.selectpicker.view.tabindex !== undefined && e.originalEvent && e.originalEvent.isTrusted) {\n            that.$element[0].setAttribute('tabindex', that.selectpicker.view.tabindex);\n            this.setAttribute('tabindex', -1);\n            that.selectpicker.view.tabindex = undefined;\n          }\n        });\n\n      this.$element\n        .on('change' + EVENT_KEY, function () {\n          that.render();\n          that.$element.trigger('changed' + EVENT_KEY, changedArguments);\n          changedArguments = null;\n        })\n        .on('focus' + EVENT_KEY, function () {\n          if (!that.options.mobile) that.$button[0].focus();\n        });\n    },\n\n    liveSearchListener: function () {\n      var that = this;\n\n      this.$button.on('click.bs.dropdown.data-api', function () {\n        if (!!that.$searchbox.val()) {\n          that.$searchbox.val('');\n          that.selectpicker.search.previousValue = undefined;\n        }\n      });\n\n      this.$searchbox.on('click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api', function (e) {\n        e.stopPropagation();\n      });\n\n      this.$searchbox.on('input propertychange', function () {\n        var searchValue = that.$searchbox[0].value;\n\n        that.selectpicker.search.elements = [];\n        that.selectpicker.search.data = [];\n\n        if (searchValue) {\n          that.selectpicker.search.previousValue = searchValue;\n\n          if (that.options.source.search) {\n            that.fetchData(function (builtData) {\n              that.render();\n              that.buildList(undefined, true);\n              that.noScroll = true;\n              that.$menuInner.scrollTop(0);\n              that.createView(true);\n              showNoResults.call(that, builtData, searchValue);\n            }, 'search', 0, searchValue);\n          } else {\n            var i,\n                searchMatch = [],\n                q = searchValue.toUpperCase(),\n                cache = {},\n                cacheArr = [],\n                searchStyle = that._searchStyle(),\n                normalizeSearch = that.options.liveSearchNormalize;\n\n            if (normalizeSearch) q = normalizeToBase(q);\n\n            for (var i = 0; i < that.selectpicker.main.data.length; i++) {\n              var li = that.selectpicker.main.data[i];\n\n              if (!cache[i]) {\n                cache[i] = stringSearch(li, q, searchStyle, normalizeSearch);\n              }\n\n              if (cache[i] && li.headerIndex !== undefined && cacheArr.indexOf(li.headerIndex) === -1) {\n                if (li.headerIndex > 0) {\n                  cache[li.headerIndex - 1] = true;\n                  cacheArr.push(li.headerIndex - 1);\n                }\n\n                cache[li.headerIndex] = true;\n                cacheArr.push(li.headerIndex);\n\n                cache[li.lastIndex + 1] = true;\n              }\n\n              if (cache[i] && li.type !== 'optgroup-label') cacheArr.push(i);\n            }\n\n            for (var i = 0, cacheLen = cacheArr.length; i < cacheLen; i++) {\n              var index = cacheArr[i],\n                  prevIndex = cacheArr[i - 1],\n                  li = that.selectpicker.main.data[index],\n                  liPrev = that.selectpicker.main.data[prevIndex];\n\n              if (li.type !== 'divider' || (li.type === 'divider' && liPrev && liPrev.type !== 'divider' && cacheLen - 1 !== i)) {\n                that.selectpicker.search.data.push(li);\n                searchMatch.push(that.selectpicker.main.elements[index]);\n              }\n            }\n\n            that.activeElement = undefined;\n            that.noScroll = true;\n            that.$menuInner.scrollTop(0);\n            that.selectpicker.search.elements = searchMatch;\n            that.createView(true);\n            showNoResults.call(that, searchMatch, searchValue);\n          }\n        } else if (that.selectpicker.search.previousValue) { // for IE11 (#2402)\n          that.$menuInner.scrollTop(0);\n          that.createView(false);\n        }\n      });\n    },\n\n    _searchStyle: function () {\n      return this.options.liveSearchStyle || 'contains';\n    },\n\n    val: function (value) {\n      var element = this.$element[0];\n\n      if (typeof value !== 'undefined') {\n        var selectedOptions = getSelectedOptions.call(this),\n            prevValue = getSelectValues.call(this, selectedOptions);\n\n        changedArguments = [null, null, prevValue];\n\n        if (!Array.isArray(value)) value = [ value ];\n\n        value.map(String);\n\n        for (var i = 0; i < selectedOptions.length; i++) {\n          var item = selectedOptions[i];\n\n          if (item && value.indexOf(String(item.value)) === -1) {\n            this.setSelected(item, false);\n          }\n        }\n\n        // only update selected value if it matches an existing option\n        this.selectpicker.main.data.filter(function (item) {\n          if (value.indexOf(String(item.value)) !== -1) {\n            this.setSelected(item, true);\n            return true;\n          }\n\n          return false;\n        }, this);\n\n        if (this.options.source.data) element.appendChild(this.selectpicker.main.optionQueue);\n\n        this.$element.trigger('changed' + EVENT_KEY, changedArguments);\n\n        if (this.$newElement.hasClass(classNames.SHOW)) {\n          if (this.multiple) {\n            this.setOptionStatus(true);\n          } else {\n            var liSelectedIndex = (element.options[element.selectedIndex] || {}).liIndex;\n\n            if (typeof liSelectedIndex === 'number') {\n              this.setSelected(this.selectpicker.current.data[liSelectedIndex], true);\n            }\n          }\n        }\n\n        this.render();\n\n        changedArguments = null;\n\n        return this.$element;\n      } else {\n        return this.$element.val();\n      }\n    },\n\n    changeAll: function (status) {\n      if (!this.multiple) return;\n      if (typeof status === 'undefined') status = true;\n\n      var element = this.$element[0],\n          previousSelected = 0,\n          currentSelected = 0,\n          prevValue = getSelectValues.call(this);\n\n      element.classList.add('bs-select-hidden');\n\n      for (var i = 0, data = this.selectpicker.current.data, len = data.length; i < len; i++) {\n        var liData = data[i],\n            option = liData.option;\n\n        if (option && !liData.disabled && liData.type !== 'divider') {\n          if (liData.selected) previousSelected++;\n          option.selected = status;\n          liData.selected = status;\n          if (status === true) currentSelected++;\n        }\n      }\n\n      element.classList.remove('bs-select-hidden');\n\n      if (previousSelected === currentSelected) return;\n\n      this.setOptionStatus();\n\n      changedArguments = [null, null, prevValue];\n\n      this.$element\n        .triggerNative('change');\n    },\n\n    selectAll: function () {\n      return this.changeAll(true);\n    },\n\n    deselectAll: function () {\n      return this.changeAll(false);\n    },\n\n    toggle: function (e, state) {\n      var isActive,\n          triggerClick = state === undefined;\n\n      e = e || window.event;\n\n      if (e) e.stopPropagation();\n\n      if (triggerClick === false) {\n        isActive = this.$newElement[0].classList.contains(classNames.SHOW);\n        triggerClick = state === true && isActive === false || state === false && isActive === true;\n      }\n\n      if (triggerClick) this.$button.trigger('click.bs.dropdown.data-api');\n    },\n\n    open: function (e) {\n      this.toggle(e, true);\n    },\n\n    close: function (e) {\n      this.toggle(e, false);\n    },\n\n    keydown: function (e) {\n      var $this = $(this),\n          isToggle = $this.hasClass('dropdown-toggle'),\n          $parent = isToggle ? $this.closest('.dropdown') : $this.closest(Selector.MENU),\n          that = $parent.data('this'),\n          $items = that.findLis(),\n          index,\n          isActive,\n          liActive,\n          activeLi,\n          offset,\n          updateScroll = false,\n          downOnTab = e.which === keyCodes.TAB && !isToggle && !that.options.selectOnTab,\n          isArrowKey = REGEXP_ARROW.test(e.which) || downOnTab,\n          scrollTop = that.$menuInner[0].scrollTop,\n          isVirtual = that.isVirtual(),\n          position0 = isVirtual === true ? that.selectpicker.view.position0 : 0;\n\n      // do nothing if a function key is pressed\n      if (e.which >= 112 && e.which <= 123) return;\n\n      isActive = that.$menu.hasClass(classNames.SHOW);\n\n      if (\n        !isActive &&\n        (\n          isArrowKey ||\n          (e.which >= 48 && e.which <= 57) ||\n          (e.which >= 96 && e.which <= 105) ||\n          (e.which >= 65 && e.which <= 90)\n        )\n      ) {\n        that.$button.trigger('click.bs.dropdown.data-api');\n\n        if (that.options.liveSearch) {\n          that.$searchbox.trigger('focus');\n          return;\n        }\n      }\n\n      if (e.which === keyCodes.ESCAPE && isActive) {\n        e.preventDefault();\n        that.$button.trigger('click.bs.dropdown.data-api').trigger('focus');\n      }\n\n      if (isArrowKey) { // if up or down\n        if (!$items.length) return;\n\n        liActive = that.activeElement;\n        index = liActive ? Array.prototype.indexOf.call(liActive.parentElement.children, liActive) : -1;\n\n        if (index !== -1) {\n          that.defocusItem(liActive);\n        }\n\n        if (e.which === keyCodes.ARROW_UP) { // up\n          if (index !== -1) index--;\n          if (index + position0 < 0) index += $items.length;\n\n          if (!that.selectpicker.view.canHighlight[index + position0]) {\n            index = that.selectpicker.view.canHighlight.slice(0, index + position0).lastIndexOf(true) - position0;\n            if (index === -1) index = $items.length - 1;\n          }\n        } else if (e.which === keyCodes.ARROW_DOWN || downOnTab) { // down\n          index++;\n          if (index + position0 >= that.selectpicker.view.canHighlight.length) index = that.selectpicker.view.firstHighlightIndex;\n\n          if (!that.selectpicker.view.canHighlight[index + position0]) {\n            index = index + 1 + that.selectpicker.view.canHighlight.slice(index + position0 + 1).indexOf(true);\n          }\n        }\n\n        e.preventDefault();\n\n        var liActiveIndex = position0 + index;\n\n        if (e.which === keyCodes.ARROW_UP) { // up\n          // scroll to bottom and highlight last option\n          if (position0 === 0 && index === $items.length - 1) {\n            that.$menuInner[0].scrollTop = that.$menuInner[0].scrollHeight;\n\n            liActiveIndex = that.selectpicker.current.elements.length - 1;\n          } else {\n            activeLi = that.selectpicker.current.data[liActiveIndex];\n\n            // could be undefined if no results exist\n            if (activeLi) {\n              offset = activeLi.position - activeLi.height;\n\n              updateScroll = offset < scrollTop;\n            }\n          }\n        } else if (e.which === keyCodes.ARROW_DOWN || downOnTab) { // down\n          // scroll to top and highlight first option\n          if (index === that.selectpicker.view.firstHighlightIndex) {\n            that.$menuInner[0].scrollTop = 0;\n\n            liActiveIndex = that.selectpicker.view.firstHighlightIndex;\n          } else {\n            activeLi = that.selectpicker.current.data[liActiveIndex];\n\n            // could be undefined if no results exist\n            if (activeLi) {\n              offset = activeLi.position - that.sizeInfo.menuInnerHeight;\n\n              updateScroll = offset > scrollTop;\n            }\n          }\n        }\n\n        liActive = that.selectpicker.current.elements[liActiveIndex];\n\n        that.activeElement = (that.selectpicker.current.data[liActiveIndex] || {}).element;\n\n        that.focusItem(liActive);\n\n        that.selectpicker.view.currentActive = liActive;\n\n        if (updateScroll) that.$menuInner[0].scrollTop = offset;\n\n        if (that.options.liveSearch) {\n          that.$searchbox.trigger('focus');\n        } else {\n          $this.trigger('focus');\n        }\n      } else if (\n        (!$this.is('input') && !REGEXP_TAB_OR_ESCAPE.test(e.which)) ||\n        (e.which === keyCodes.SPACE && that.selectpicker.keydown.keyHistory)\n      ) {\n        var searchMatch,\n            matches = [],\n            keyHistory;\n\n        e.preventDefault();\n\n        that.selectpicker.keydown.keyHistory += keyCodeMap[e.which];\n\n        if (that.selectpicker.keydown.resetKeyHistory.cancel) clearTimeout(that.selectpicker.keydown.resetKeyHistory.cancel);\n        that.selectpicker.keydown.resetKeyHistory.cancel = that.selectpicker.keydown.resetKeyHistory.start();\n\n        keyHistory = that.selectpicker.keydown.keyHistory;\n\n        // if all letters are the same, set keyHistory to just the first character when searching\n        if (/^(.)\\1+$/.test(keyHistory)) {\n          keyHistory = keyHistory.charAt(0);\n        }\n\n        // find matches\n        for (var i = 0; i < that.selectpicker.current.data.length; i++) {\n          var li = that.selectpicker.current.data[i],\n              hasMatch;\n\n          hasMatch = stringSearch(li, keyHistory, 'startsWith', true);\n\n          if (hasMatch && that.selectpicker.view.canHighlight[i]) {\n            matches.push(li.element);\n          }\n        }\n\n        if (matches.length) {\n          var matchIndex = 0;\n\n          $items.removeClass('active').find('a').removeClass('active');\n\n          // either only one key has been pressed or they are all the same key\n          if (keyHistory.length === 1) {\n            matchIndex = matches.indexOf(that.activeElement);\n\n            if (matchIndex === -1 || matchIndex === matches.length - 1) {\n              matchIndex = 0;\n            } else {\n              matchIndex++;\n            }\n          }\n\n          searchMatch = matches[matchIndex];\n\n          activeLi = that.selectpicker.main.data[searchMatch];\n\n          if (scrollTop - activeLi.position > 0) {\n            offset = activeLi.position - activeLi.height;\n            updateScroll = true;\n          } else {\n            offset = activeLi.position - that.sizeInfo.menuInnerHeight;\n            // if the option is already visible at the current scroll position, just keep it the same\n            updateScroll = activeLi.position > scrollTop + that.sizeInfo.menuInnerHeight;\n          }\n\n          liActive = that.selectpicker.main.elements[searchMatch];\n\n          that.activeElement = liActive;\n\n          that.focusItem(liActive);\n\n          if (liActive) liActive.firstChild.focus();\n\n          if (updateScroll) that.$menuInner[0].scrollTop = offset;\n\n          $this.trigger('focus');\n        }\n      }\n\n      // Select focused option if \"Enter\", \"Spacebar\" or \"Tab\" (when selectOnTab is true) are pressed inside the menu.\n      if (\n        isActive &&\n        (\n          (e.which === keyCodes.SPACE && !that.selectpicker.keydown.keyHistory) ||\n          e.which === keyCodes.ENTER ||\n          (e.which === keyCodes.TAB && that.options.selectOnTab)\n        )\n      ) {\n        if (e.which !== keyCodes.SPACE) e.preventDefault();\n\n        if (!that.options.liveSearch || e.which !== keyCodes.SPACE) {\n          that.$menuInner.find('.active a').trigger('click', true); // retain active class\n          $this.trigger('focus');\n\n          if (!that.options.liveSearch) {\n            // Prevent screen from scrolling if the user hits the spacebar\n            e.preventDefault();\n            // Fixes spacebar selection of dropdown items in FF & IE\n            $(document).data('spaceSelect', true);\n          }\n        }\n      }\n    },\n\n    mobile: function () {\n      // ensure mobile is set to true if mobile function is called after init\n      this.options.mobile = true;\n      this.$element[0].classList.add('mobile-device');\n    },\n\n    refresh: function () {\n      var that = this;\n      // update options if data attributes have been changed\n      var config = $.extend({}, this.options, getAttributesObject(this.$element), this.$element.data()); // in this order on refresh, as user may change attributes on select, and options object is not passed on refresh\n      this.options = config;\n\n      if (this.options.source.data) {\n        this.render();\n        this.buildList();\n      } else {\n        this.fetchData(function () {\n          that.render();\n          that.buildList();\n        });\n      }\n\n      this.checkDisabled();\n      this.setStyle();\n      this.setWidth();\n\n      this.setSize(true);\n\n      this.$element.trigger('refreshed' + EVENT_KEY);\n    },\n\n    hide: function () {\n      this.$newElement.hide();\n    },\n\n    show: function () {\n      this.$newElement.show();\n    },\n\n    remove: function () {\n      this.$newElement.remove();\n      this.$element.remove();\n    },\n\n    destroy: function () {\n      this.$newElement.before(this.$element).remove();\n\n      if (this.$bsContainer) {\n        this.$bsContainer.remove();\n      } else {\n        this.$menu.remove();\n      }\n\n      if (this.selectpicker.view.titleOption && this.selectpicker.view.titleOption.parentNode) {\n        this.selectpicker.view.titleOption.parentNode.removeChild(this.selectpicker.view.titleOption);\n      }\n\n      this.$element\n        .off(EVENT_KEY)\n        .removeData('selectpicker')\n        .removeClass('bs-select-hidden selectpicker mobile-device');\n\n      $(window).off(EVENT_KEY + '.' + this.selectId);\n    }\n  };\n\n  // SELECTPICKER PLUGIN DEFINITION\n  // ==============================\n  function Plugin (option) {\n    // get the args of the outer function..\n    var args = arguments;\n    // The arguments of the function are explicitly re-defined from the argument list, because the shift causes them\n    // to get lost/corrupted in android 2.3 and IE9 #715 #775\n    var _option = option;\n\n    [].shift.apply(args);\n\n    // if the version was not set successfully\n    if (!version.success) {\n      // try to retreive it again\n      try {\n        version.full = (getVersion() || '').split(' ')[0].split('.');\n      } catch (err) {\n        // fall back to use BootstrapVersion if set\n        if (Selectpicker.BootstrapVersion) {\n          version.full = Selectpicker.BootstrapVersion.split(' ')[0].split('.');\n        } else {\n          version.full = [version.major, '0', '0'];\n\n          console.warn(\n            'There was an issue retrieving Bootstrap\\'s version. ' +\n            'Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. ' +\n            'If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.',\n            err\n          );\n        }\n      }\n\n      version.major = version.full[0];\n      version.success = true;\n    }\n\n    if (version.major >= '4') {\n      // some defaults need to be changed if using Bootstrap 4\n      // check to see if they have already been manually changed before forcing them to update\n      var toUpdate = [];\n\n      if (Selectpicker.DEFAULTS.style === classNames.BUTTONCLASS) toUpdate.push({ name: 'style', className: 'BUTTONCLASS' });\n      if (Selectpicker.DEFAULTS.iconBase === classNames.ICONBASE) toUpdate.push({ name: 'iconBase', className: 'ICONBASE' });\n      if (Selectpicker.DEFAULTS.tickIcon === classNames.TICKICON) toUpdate.push({ name: 'tickIcon', className: 'TICKICON' });\n\n      classNames.DIVIDER = 'dropdown-divider';\n      classNames.SHOW = 'show';\n      classNames.BUTTONCLASS = 'btn-light';\n      classNames.POPOVERHEADER = 'popover-header';\n      classNames.ICONBASE = '';\n      classNames.TICKICON = 'bs-ok-default';\n\n      for (var i = 0; i < toUpdate.length; i++) {\n        var option = toUpdate[i];\n        Selectpicker.DEFAULTS[option.name] = classNames[option.className];\n      }\n    }\n\n    if (version.major > '4') {\n      Selector.DATA_TOGGLE = 'data-bs-toggle=\"dropdown\"';\n    }\n\n    var value;\n    var chain = this.each(function () {\n      var $this = $(this);\n      if ($this.is('select')) {\n        var data = $this.data('selectpicker'),\n            options = typeof _option == 'object' && _option;\n\n        // for backwards compatibility\n        // (using title as placeholder is deprecated - remove in v2.0.0)\n        if (options.title) options.placeholder = options.title;\n\n        if (!data) {\n          var dataAttributes = $this.data();\n\n          for (var dataAttr in dataAttributes) {\n            if (Object.prototype.hasOwnProperty.call(dataAttributes, dataAttr) && $.inArray(dataAttr, DISALLOWED_ATTRIBUTES) !== -1) {\n              delete dataAttributes[dataAttr];\n            }\n          }\n\n          var config = $.extend({}, Selectpicker.DEFAULTS, $.fn.selectpicker.defaults || {}, getAttributesObject($this), dataAttributes, options); // this is correct order on initial render\n          config.template = $.extend({}, Selectpicker.DEFAULTS.template, ($.fn.selectpicker.defaults ? $.fn.selectpicker.defaults.template : {}), dataAttributes.template, options.template);\n          config.source = $.extend({}, Selectpicker.DEFAULTS.source, ($.fn.selectpicker.defaults ? $.fn.selectpicker.defaults.source : {}), options.source);\n          $this.data('selectpicker', (data = new Selectpicker(this, config)));\n        } else if (options) {\n          for (var i in options) {\n            if (Object.prototype.hasOwnProperty.call(options, i)) {\n              data.options[i] = options[i];\n            }\n          }\n        }\n\n        if (typeof _option == 'string') {\n          if (data[_option] instanceof Function) {\n            value = data[_option].apply(data, args);\n          } else {\n            value = data.options[_option];\n          }\n        }\n      }\n    });\n\n    if (typeof value !== 'undefined') {\n      // noinspection JSUnusedAssignment\n      return value;\n    } else {\n      return chain;\n    }\n  }\n\n  var old = $.fn.selectpicker;\n  $.fn.selectpicker = Plugin;\n  $.fn.selectpicker.Constructor = Selectpicker;\n\n  // SELECTPICKER NO CONFLICT\n  // ========================\n  $.fn.selectpicker.noConflict = function () {\n    $.fn.selectpicker = old;\n    return this;\n  };\n\n  // get Bootstrap's keydown event handler for either Bootstrap 4 or Bootstrap 3\n  function keydownHandler () {\n    if (version.major < 5) {\n      if ($.fn.dropdown) {\n        // wait to define until function is called in case Bootstrap isn't loaded yet\n        var bootstrapKeydown = $.fn.dropdown.Constructor._dataApiKeydownHandler || $.fn.dropdown.Constructor.prototype.keydown;\n        return bootstrapKeydown.apply(this, arguments);\n      }\n    } else {\n      return Dropdown.dataApiKeydownHandler;\n    }\n  }\n\n  $(document)\n    .off('keydown.bs.dropdown.data-api')\n    .on('keydown.bs.dropdown.data-api', ':not(.bootstrap-select) > [' + Selector.DATA_TOGGLE + ']', keydownHandler)\n    .on('keydown.bs.dropdown.data-api', ':not(.bootstrap-select) > .dropdown-menu', keydownHandler)\n    .on('keydown' + EVENT_KEY, '.bootstrap-select [' + Selector.DATA_TOGGLE + '], .bootstrap-select [role=\"listbox\"], .bootstrap-select .bs-searchbox input', Selectpicker.prototype.keydown)\n    .on('focusin.modal', '.bootstrap-select [' + Selector.DATA_TOGGLE + '], .bootstrap-select [role=\"listbox\"], .bootstrap-select .bs-searchbox input', function (e) {\n      e.stopPropagation();\n    });\n\n  // SELECTPICKER DATA-API\n  // =====================\n  document.addEventListener('DOMContentLoaded', function () {\n    $('.selectpicker').each(function () {\n      var $selectpicker = $(this);\n      Plugin.call($selectpicker, $selectpicker.data());\n    });\n  });\n})(jQuery);\n"]},"metadata":{},"sourceType":"script"}