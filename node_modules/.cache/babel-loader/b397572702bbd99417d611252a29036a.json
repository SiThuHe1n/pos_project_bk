{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport router from './../../router';\nexport default {\n  data() {\n    return {\n      link: 'http://127.0.0.1:8000',\n      percentage: '',\n      saleprice: '',\n      purchaseprice: '',\n      brandlist: '',\n      categorylist: '',\n      subcategorylist: '',\n      mtypelist: '',\n      listbrand: [],\n      category: [],\n      subcategory: [],\n      mtype: [],\n      newbrand: '',\n      newcategory: '',\n      newsubcategory: '',\n      newmtype: '',\n      isedit: false,\n      isaddproduct: false,\n      productlist: null\n    };\n  },\n\n  watch: {\n    productlist(val) {\n      this.dat.destroy();\n      this.$nextTick(() => {\n        this.dat = $(this.$refs.tablefeature).DataTable({\n          \"fnRowCallback\": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {\n            $('td:eq(0)', nRow).html(iDisplayIndexFull + 1);\n          }\n        });\n      });\n    }\n\n  },\n\n  mounted() {\n    this.doshow('brand');\n    this.doshow('category');\n    this.doshow('subcategory');\n    this.doshow('unittype');\n    this.doshowproduct();\n    this.dat = $(this.$refs.tablefeature).DataTable({\n      \"fnRowCallback\": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {\n        $('td:eq(0)', nRow).html(iDisplayIndexFull + 1);\n      }\n    });\n  },\n\n  methods: {\n    productdetail: function (id) {\n      router.push({\n        path: '/productdetail',\n        query: {\n          product_id: id\n        }\n      });\n    },\n    doshowproduct: function () {\n      axios.get(localStorage.getItem(\"link\") + \"/api/product\").then(response => {\n        this.productlist = response.data;\n        console.log(this.productlist);\n      }).catch(error => {\n        this.errorMessage = error.message;\n        console.error(\"There was an error!\", error);\n      });\n    },\n    docreate: function () {\n      let inputdata = {\n        data: this.$refs.form\n      };\n\n      if (this.isedit == false) {\n        axios.post(localStorage.getItem(\"link\") + \"/api/product\", this.$refs.form).then(response => {\n          console.log(response);\n          this.doshowproduct();\n        }).catch(error => {\n          this.errorMessage = error.message;\n          console.error(\"There was an error!\", error);\n        });\n      } else {\n        let article = {\n          'name': this.name,\n          'code': this.code\n        };\n        axios.patch(localStorage.getItem(\"link\") + \"/api/product/\" + this.id, article).then(response => {\n          console.log(response);\n          this.doshowproduct();\n          this.isedit = false;\n        }).catch(error => {\n          this.errorMessage = error.message;\n          console.error(\"There was an error!\", error);\n        });\n      }\n    },\n    dodelete: function (id) {\n      axios.delete(localStorage.getItem(\"link\") + \"/api/product/\" + id).then(response => {\n        console.log(response);\n        this.doshowproduct();\n      }).catch(error => {\n        this.errorMessage = error.message;\n        console.error(\"There was an error!\", error);\n      });\n    },\n    doshow: function (database) {\n      axios.get(localStorage.getItem(\"link\") + \"/api/\" + database).then(response => {\n        if (database == 'brand') {\n          this.listbrand = response.data;\n        }\n\n        if (database == 'category') {\n          this.category = response.data;\n        }\n\n        if (database == 'subcategory') {\n          this.subcategory = response.data;\n        }\n\n        if (database == 'unittype') {\n          this.mtype = response.data;\n        }\n      }).catch(error => {\n        this.errorMessage = error.message;\n        console.error(\"There was an error!\", error);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","router","data","link","percentage","saleprice","purchaseprice","brandlist","categorylist","subcategorylist","mtypelist","listbrand","category","subcategory","mtype","newbrand","newcategory","newsubcategory","newmtype","isedit","isaddproduct","productlist","watch","val","dat","destroy","$nextTick","$","$refs","tablefeature","DataTable","nRow","aData","iDisplayIndex","iDisplayIndexFull","html","mounted","doshow","doshowproduct","methods","productdetail","id","push","path","query","product_id","get","localStorage","getItem","then","response","console","log","catch","error","errorMessage","message","docreate","inputdata","form","post","article","name","code","patch","dodelete","delete","database"],"sourceRoot":"","sources":["/Users/sithuhein/Desktop/PosSystem/pos_project_bk/src/views/Product/p_register.vue"],"sourcesContent":["<template>\n    <div>\n        <div>\n            <div v-if=\"isaddproduct==true\" class=\"row gx-0 d-flex justify-content-center\">\n                <div class=\"col-xxl-5 col-xl-8 col-lg-8  col-md-8 border shadow p-5 m-5\">\n                    <h1> <b>Add Product</b></h1>\n                  <form  ref=\"form\"  action=\"\" v-on:submit.prevent=\"docreate\">\n                    <div class=\"row\">\n                <div class=\"col-6\">\n                    <label for=\"\">Name</label>\n                    <input class=\"form-control m-1\" name=\"name\" v-model=\"productname\" type=\"text\" placeholder=\"Enter Product Name\" required> \n                    <label for=\"\">Code</label>\n                    <input class=\"form-control m-1\" name=\"code\" v-model=\"productname\" type=\"text\" placeholder=\"Enter Product Name\" required>\n\n              \n                    <!-- <label for=\"\">Quantity</label>\n                    <input class=\"form-control m-1\" name=\"amount\" v-model=\"quantity\" type=\"text\" placeholder=\"Enter Product Name\">\n         \n\n                     -->\n\n                    <!-- <label for=\"\">Purchase Price</label>\n                    <div class=\"row gx-0 \">\n                        <div class=\"col-sm-12\"> \n                            <input type=\"text\" name=\"price\" class=\"form-control\" v-model=\"purchaseprice\">\n                        </div>\n\n                    \n                                                \n                     </div> -->\n<!-- \n                     <label for=\"\">Amount </label>\n                    <div class=\"row gx-0 \">\n                        <div class=\"col-sm-12\"> \n                            <input type=\"text\" name=\"amount\" class=\"form-control\" v-model=\"amount\">\n                        </div>\n\n                    \n                                                \n                     </div> -->\n\n\n                     <label for=\"\">Description</label>\n                    <textarea  class=\"form-control\" name=\"description\" v-model=\"productdescription\" id=\"\" cols=\"30\" rows=\"3\"></textarea>\n            \n                    \n           \n              \n                </div>\n                <div class=\"col-6 \">\n                    \n                    <label for=\"\">Category</label> \n                    <div class=\"row gx-0\">\n                        <div class=\"col-sm-12\">\n                            <select  name=\"category\" class=\"form-select\" v-model=\"categorylist\" id=\"categorylist\">\n                            <option v-for=\"c in category\" :value=c.code>{{c.name}}</option>\n                           \n                            </select>\n        \n                        </div>\n\n                    \n                      \n                    </div>\n              \n\n\n                    <!--  -->\n                    <label for=\"\">Subcategory</label> \n                    <div class=\"row gx-0\">\n                        <div class=\"col-sm-12\">\n                            <select  name=\"subcategory\" class=\"form-select \" v-model=\"subcategorylist\" id=\"subcategorylist\">\n                            <option v-for=\"c in subcategory\" :value=c.code>{{c.name}}</option>\n                           \n                            </select>\n        \n                        </div>\n\n                  \n                      \n                    </div>\n               \n                    <!-- unittype -->\n                    <!-- <label for=\"\">Unit Type</label> \n                    <div class=\"row gx-0\">\n                        <div class=\"col-sm-12\">\n                            <select  name=\"unittype\" class=\"form-select \" v-model=\"mtypelist\" id=\"mtypelist\" required>\n                          <option value=\"\">Please Select</option>\n                 \n                            <option v-for=\"c in mtype\" :value=c.code>{{c.name}}</option>\n                           \n                            </select>\n        \n                        </div>\n\n                      \n                    </div> -->\n\n                    <label for=\"\">Brand</label> \n                    <div class=\"row gx-0\">\n                        <div class=\"col-sm-12\">\n                            <select    name=\"brand\" v-model=\"brandlist\" class=\"form-select\" id=\"\">\n                            <option v-for=\"b in listbrand\" :value=b.code>{{b.name}}</option>\n       \n                            </select>\n        \n                        </div>\n\n                      \n                      \n                    </div>\n                \n\n\n             \n               \n\n\n       \n\n\n\n\n\n                   \n                </div>\n                \n            </div>\n            <div class=\"d-flex justify-content-end\">\n            <button type=\"button\" class=\"btn btn-secondary m-2\" @click=\"isaddproduct=!isaddproduct\" >Close</button>\n        <button type=\"submit\" class=\"btn btn-primary m-2\">Create</button>\n       \n        </div>\n     \n                  </form>\n        \n        \n        \n     \n              </div>\n            </div>\n      \n\n<div class=\"row gx-0 d-flex justify-content-center p-5\">\n    <div class=\"col-sm-3  d-flex justify-content-center\">\n        \n<button type=\"button\" class=\"btn btn-primary\" v-if=\"isaddproduct==false\" @click=\"isaddproduct=!isaddproduct\">\n  Add Product\n</button>\n\n    </div>\n\n\n</div>\n\n<div class=\"row gx-0 d-flex justify-content-center mt-5\">\n<div class=\"col-sm-10 \">\n    <table ref=\"tablefeature\" class=\"table table-bordered table-hover\">\n        <thead> \n            <tr>\n             \n                <th>No</th>\n                <th>Code</th>\n                <th>Name</th>\n                <th>Brand</th>\n                <th>Category</th>\n                <th>Description</th>\n          \n                <th>Action</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr v-for=\"(dat,index) in productlist\">\n                <td> {{++index}} </td>\n                <td> {{dat.code}} </td>\n                <td>  {{dat.name}} </td>\n                <td  > <span v-for=\"b in listbrand \"> <span v-if=\"dat.brand_id==b.code\">{{b.name}}  </span> </span> </td>\n                <td  > <span v-for=\"cat in category \"> <span v-if=\"dat.category_id==cat.code\">{{cat.name}} </span>  </span></td>\n                <td>  {{dat.description}} </td>\n     \n                <td>\n                    <button class=\"btn btn-primary\" @click=\"productdetail(dat.id)\"><font-awesome-icon icon=\"fa-solid fa-info\" /></button>\n                \n                    <button class=\"btn btn-warning\" @click=\"doupdate(dat.id)\">    <font-awesome-icon icon=\"fa-solid fa-pen-to-square\" /> </button>\n                    <button class=\"btn btn-danger\" @click=\"dodelete(dat.id)\">  <font-awesome-icon icon=\"fa-solid fa-trash\" /></button></td>\n            \n\n            </tr>\n        </tbody>\n    </table>\n</div>\n\n</div>\n\n<!-- Modal -->\n<div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-lg\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">Add Product</h5>\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n      </div>\n      <div class=\"modal-body\">\n  \n      </div>\n      <div class=\"modal-footer\">\n    \n      </div>\n    </div>\n  </div>\n</div>\n\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport router from './../../router'\n\n\nexport default {\n    data () {\n        \n\n        return {\n            link:'http://127.0.0.1:8000',\n            percentage:'',\n            saleprice:'',\n            purchaseprice:'',\n            brandlist:'',\n            categorylist:'',\n           subcategorylist:'',\n            mtypelist:'',\n\n            listbrand:[],\n\n            category:[],\n            subcategory:[],\n            mtype:[],\n            newbrand:'',\n            newcategory:'',\n            newsubcategory:'',\n            newmtype:'',\n      \n            isedit:false,\n            isaddproduct:false,\n            productlist:null,\n\n        }\n    },\n    watch: {\n        productlist(val) {\n    this.dat.destroy();\n    this.$nextTick(() => {\n        this.dat= $(this.$refs.tablefeature).DataTable({\n\n            \"fnRowCallback\": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {\n        $('td:eq(0)', nRow).html(iDisplayIndexFull +1);\n    }\n\n        })\n    });\n    }\n},\n    mounted () {\n        \n        this.doshow('brand')\n        this.doshow('category')\n        this.doshow('subcategory')\n        this.doshow('unittype')\n        this.doshowproduct()\n        this.dat= $(this.$refs.tablefeature).DataTable({\n            \"fnRowCallback\": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {\n        $('td:eq(0)', nRow).html(iDisplayIndexFull +1);\n    }\n        })\n    },\n    methods: {\n        productdetail:function(id)\n        {\n            router.push({ path: '/productdetail', query: { product_id:id } })\n        },\n      doshowproduct:function()\n      {\n        \n        axios.get(localStorage.getItem(\"link\")+\"/api/product\")\n   .then(response =>{\n    this.productlist=response.data\n    console.log(this.productlist);\n   \n   \n  \n   })\n   .catch(error => {\n     this.errorMessage = error.message;\n     console.error(\"There was an error!\", error);\n      })\n      },\n        docreate:function() {\n\n                let inputdata={\n                    data:this.$refs.form,\n              \n                }\n\n         if(this.isedit==false)\n         {\n\n            axios.post(localStorage.getItem(\"link\")+\"/api/product\",this.$refs.form)\n   .then(response =>{console.log(response)\n   \n    this.doshowproduct()\n  \n   })\n   .catch(error => {\n     this.errorMessage = error.message;\n     console.error(\"There was an error!\", error);\n      })\n         }\n         else{\n            let article={\n                    'name':this.name,\n                    'code':this.code\n                }\n            axios.patch(localStorage.getItem(\"link\")+\"/api/product/\"+this.id, article)\n   .then(response =>{console.log(response)\n   \n    this.doshowproduct()\n   this.isedit=false;\n  \n   })\n   .catch(error => {\n     this.errorMessage = error.message;\n     console.error(\"There was an error!\", error);\n      })\n         }\n\n    },\n    dodelete:function(id) {\n\n\naxios.delete(localStorage.getItem(\"link\")+\"/api/product/\"+id)\n.then(response =>{console.log(response)\n\nthis.doshowproduct()\n\n})\n.catch(error => {\nthis.errorMessage = error.message;\nconsole.error(\"There was an error!\", error);\n})\n\n},\n\n \ndoshow:function(database){\n\n  \n    axios.get(localStorage.getItem(\"link\")+\"/api/\"+database)\n       .then(response => {\n        if(database=='brand')\n        {\n            this.listbrand = response.data\n        }\n        if(database=='category')\n        {\n            this.category = response.data\n        }\n        if(database=='subcategory')\n        {\n            this.subcategory = response.data\n        }\n        if(database=='unittype')\n        {\n            this.mtype = response.data\n        }\n \n \n      \n        \n           \n       })\n       .catch(error => {\n         this.errorMessage = error.message;\n         console.error(\"There was an error!\", error);});\n         \n\n           },\n\n\n    },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n   \n</style>"]},"metadata":{},"sourceType":"module"}